<!DOCTYPE HTML> 
<html>
   <head>
   <meta charset=utf-8> 
   <title>Updating from CVS &larr; </title>
   <meta name="author" content="Vinod Kurup" />

   <link rel='openid.server' href='http://www.myopenid.com/server' />
   <link rel='openid.delegate' href='http://www.kurup.org' />

   <link rel="start" href="/" />

	
	
	
  	<link rel="alternate" type="application/atom+xml" href="atom.xml" title="RSS feed" />
	

   <!-- syntax highlighting CSS -->
   <link rel="stylesheet" href="/files/css/syntax.css" type="text/css" />

   <!-- Homepage CSS -->
   <link rel="stylesheet" href="/files/css/screen.css" type="text/css" />

</head>
<body id="">
<div id="site">

  <div id="header">
	<h1>
	<a href="/" title="My Personal Site">Vinod Kurup</a>
</h1>
<ul class="nav">
  <li><a class="home" href="/">Home</a></li>
  <li><a class="medicine" href="/medicine">Medicine</a></li>
  <li><a class="feed" href="/blog/atom.xml">Feed</a></li>
</ul>

  </div>

  <div id="page">
	
<h1 class="emphnext">Updating from CVS</h1>


<p> Here's the steps I take in order to update my site from the latest OpenACS CVS. All of this info comes from <a href="http://piskorski.com/docs/cvs-conventions.html">Andrew Piskorski's great CVS page</a> or from pages listed in his document. </p>  <ol> <li>Make sure that I've committed all the local changes that I've made. <pre> vinod:~$ cd web/kurup vinod:~/web/kurup$ cvs commit -m "Fixed foo, bar and blah" </pre> </li>  <li>Go into the directory containing my OpenACS CVS checkout and grab the latest sources. I'm using the <code>oacs-4-6</code> branch. <pre> vinod:~/web/kurup$ cd ~/web/openacs-4 vinod:~/web/openacs-4$ cvs update -r oacs-4-6 </pre> </li>  <li>Import the code into a vendor branch. My repository name is <code>kurup</code>. <code>OpenACS</code> is the vendor tag. <pre> vinod:~/web/openacs-4$ cvs -d /var/lib/cvs \      import -m "importing latest OpenACS 4.6 branch" \      kurup OpenACS openacs-4-6-3-20030719 </pre> </li>  <li>This produces the usual CVS scroll and then a message like this: <pre> 7 conflicts created by this import. Use the following command to help the merge:      cvs -d /var/lib/cvs checkout -j&lt;prev_rel_tag&gt; \         -jopenacs-4-6-3-20030719 kurup </pre> </li>  <li>Follow the instructions just given above. This will checkout a full set of code into the <code>kurup</code> directory, while simultaneously merging the new imported code in. <pre> vinod@vkurup:~/web/openacs-4$ cd vinod@vkurup:~$ mkdir tmp vinod@vkurup:~$ cd tmp vinod@vkurup:~/tmp$ cvs -d /var/lib/cvs checkout \      -jOpenACS:yesterday \      -jopenacs-4-6-3-20030719 kurup </pre> </li>  <li>Go through and fix all the conflicts. This is the part that I sometimes find confusing. How to find the files that have conflicts? The command in instruction #3 above will list conflict files with a C in front of the filename. Check each file that has a C in front of it. This is why I like to do this process inside an emacs shell, so that I can look over the output as needed. For example, one piece of my listing looked like this: <pre> U kurup/packages/lars-blogger/www/blog-oracle.xql U kurup/packages/lars-blogger/www/blog.adp C kurup/packages/lars-blogger/www/blog.tcl U kurup/packages/lars-blogger/www/calendar-oracle.xql </pre> So, I need to check ~/tmp/kurup/packages/lars-blogger/www/blog.tcl, look for conflict markers and resolve any conflicts. Do this for every file marked 'C' in your listing. </li>  <li>Commit my work. <pre> vinod:~/tmp$ cd kurup vinod:~/tmp/kurup$ cvs commit \ -m "merged with openacs-4-6-3-20030719, conflicts resolved" </pre> </li>  <li>Blow away that tmp checkout <pre> vinod:~/tmp/kurup$ cd vinod:~$ rm -r tmp </pre> </li>  <li>Update my local checkout <pre> vinod:~$ cd web/kurup vinod:~/web/kurup$ cvs update </pre> </li>  <li>Restart my server. <pre> vinod:~$ svc -t /service/master </pre> </li>  <li>Once the server is back up, I visit http://kurup.org/acs-admin/apm with my broswer and click on 'Install Packages'. I look for any packages that are listed as 'Upgrade'. Click on these packages and follow the instructions to perform any needed upgrades. This is always a touchy process because if the upgrade script errors out, your server may be left in an in-between state. Hope and pray liberally. </li>  <li>Repeat as needed, maybe monthly, or whenever there's a new feature/bugfix available that you need.</li> </ol>   <p> &nbsp; </p>


<address class="signature">
  <span class="author">&nbsp;</span>
  <span class="date">20 July 2003</span>
  <span class="tags"><a href="http://www.google.com/search?q=openacs+site:www.kurup.org" rel="tag">openacs</a>  | <a href="http://www.google.com/search?q=cvs+site:www.kurup.org" rel="tag">cvs</a>  | <a href="http://www.google.com/search?q=updating+site:www.kurup.org" rel="tag">updating</a>  </span>
</address>

  </div>
  
  <div id="footer">
	<address>
		<span class="copyright">
			Design by 
			<a href="http://mark.reid.name">Mark Reid</a>
			<br/>
			(<a rel="licence" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Some rights reserved</a>)			
		</span>
		<span class="engine">
			Powered by 
			<a href="http://github.com/mojombo/jekyll/" title="A static, minimalist CMS">Jekyll</a>
		</span>
	</address>
  </div>
</div>

<!-- Google Analytics script goes here -->
<!--<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1051817-4");
pageTracker._trackPageview();
</script>
-->
<!--[if IE 6]>
<script type="text/javascript"> 
	/*Load jQuery if not already loaded*/ if(typeof jQuery == 'undefined'){ document.write("<script type=\"text/javascript\"   src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js\"></"+"script>"); var __noconflict = true; } 
	var IE6UPDATE_OPTIONS = {
		icons_path: "http://static.ie6update.com/hosted/ie6update/images/"
	}
</script>
<script type="text/javascript" src="http://static.ie6update.com/hosted/ie6update/ie6update.js"></script>
<![endif]-->
</body>
</html>
