<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: version-control | Vinod Kurup]]></title>
  <link href="https://www.kurup.org/blog/categories/version-control/atom.xml" rel="self"/>
  <link href="https://www.kurup.org/"/>
  <updated>2019-04-09T08:22:17-04:00</updated>
  <id>https://www.kurup.org/</id>
  <author>
    <name><![CDATA[Vinod Kurup]]></name>
    <email><![CDATA[vinod@kurup.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Updating from CVS]]></title>
    <link href="https://www.kurup.org/blog/2003/07/20/updating-from-cvs"/>
    <updated>2003-07-20T00:00:00-04:00</updated>
    <id>https://www.kurup.org/blog/2003/07/20/updating-from-cvs</id>
    <content type="html"><![CDATA[<p>Here's the steps I take in order to update my site from the latest OpenACS CVS. All of this info comes from <a href="http://piskorski.com/docs/cvs-conventions.html">Andrew Piskorski's great CVS page</a> or from pages listed in his document.</p>

<ol>
<li><p>Make sure that I've committed all the local changes that I've made.</p>

<p> vinod:~$ cd web/kurup
 vinod:~/web/kurup$ cvs commit -m "Fixed foo, bar and blah"</p></li>
<li><p>Go into the directory containing my OpenACS CVS checkout and grab the latest sources. I'm using the <code>oacs-4-6</code> branch.</p>

<p> vinod:~/web/kurup$ cd ~/web/openacs-4
 vinod:~/web/openacs-4$ cvs update -r oacs-4-6</p></li>
<li><p>Import the code into a vendor branch. My repository name is <code>kurup</code>. <code>OpenACS</code> is the vendor tag.</p>

<p> vinod:~/web/openacs-4$ cvs -d /var/lib/cvs \</p>

<pre><code>  import -m "importing latest OpenACS 4.6 branch" \
  kurup OpenACS openacs-4-6-3-20030719 
</code></pre></li>
<li><p>This produces the usual CVS scroll and then a message like this:</p>

<p> 7 conflicts created by this import. Use the following command to help the merge:
 cvs -d /var/lib/cvs checkout -j&lt;prev_rel_tag&gt; \
 jopenacs-4-6-3-20030719 kurup</p></li>
<li><p>Follow the instructions just given above. This will checkout a full set of code into the <code>kurup</code> directory, while simultaneously merging the new imported code in.</p>

<p> vinod@vkurup:~/web/openacs-4$ cd
 vinod@vkurup:~$ mkdir tmp
 vinod@vkurup:~$ cd tmp
 vinod@vkurup:~/tmp$ cvs -d /var/lib/cvs checkout \</p>

<pre><code>  -jOpenACS:yesterday \
  jopenacs-4-6-3-20030719 kurup 
</code></pre></li>
<li><p>Go through and fix all the conflicts. This is the part that I sometimes find confusing. How to find the files that have conflicts? The command in instruction #3 above will list conflict files with a C in front of the filename. Check each file that has a C in front of it. This is why I like to do this process inside an emacs shell, so that I can look over the output as needed. For example, one piece of my listing looked like this:</p>

<p> U kurup/packages/lars-blogger/www/blog-oracle.xql
 U kurup/packages/lars-blogger/www/blog.adp
 C kurup/packages/lars-blogger/www/blog.tcl
 U kurup/packages/lars-blogger/www/calendar-oracle.xql</p></li>
</ol>


<p>So, I need to check ~/tmp/kurup/packages/lars-blogger/www/blog.tcl, look for conflict markers and resolve any conflicts. Do this for every file marked 'C' in your listing.</p>

<ol>
<li><p>Commit my work.</p>

<p> vinod:~/tmp$ cd kurup
 vinod:~/tmp/kurup$ cvs commit \</p>

<pre><code>  -m "merged with openacs-4-6-3-20030719, conflicts resolved" 
</code></pre></li>
<li><p>Blow away that tmp checkout</p>

<p> vinod:~/tmp/kurup$ cd
 vinod:~$ rm -r tmp</p></li>
<li><p>Update my local checkout</p>

<p> vinod:~$ cd web/kurup
 vinod:~/web/kurup$ cvs update</p></li>
<li><p>Restart my server.</p>

<p>vinod:~$ svc -t /service/master</p></li>
<li><p>Once the server is back up, I visit <code>http://kurup.org/acs-admin/apm</code> with my broswer and click on 'Install Packages'. I look for any packages that are listed as 'Upgrade'. Click on these packages and follow the instructions to perform any needed upgrades. This is always a touchy process because if the upgrade script errors out, your server may be left in an in-between state. Hope and pray liberally.</p></li>
<li><p>Repeat as needed, maybe monthly, or whenever there's a new feature/bugfix available that you need.</p></li>
</ol>

]]></content>
  </entry>
  
</feed>
