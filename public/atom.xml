<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Vinod Kurup]]></title>
  <link href="https://www.kurup.org/atom.xml" rel="self"/>
  <link href="https://www.kurup.org/"/>
  <updated>2018-12-20T20:41:32-05:00</updated>
  <id>https://www.kurup.org/</id>
  <author>
    <name><![CDATA[Vinod Kurup]]></name>
    <email><![CDATA[vinod@kurup.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Triangle Race Series]]></title>
    <link href="https://www.kurup.org/blog/2018/12/20/triangle-race-series"/>
    <updated>2018-12-20T20:27:53-05:00</updated>
    <id>https://www.kurup.org/blog/2018/12/20/triangle-race-series</id>
    <content type="html"><![CDATA[<p>When we made our 2018 goals last year, Kavi, Anika and I all had some running-related goals. I don&#8217;t
remember offhand exactly what each of our goals were, but I think we all wanted to run more races,
because well, races are fun! I somehow stumbled on the <a href="http://www.precisionrace.com/triangle-race-series2/">Triangle Race
Series</a>. It&#8217;s a series of a couple dozen races
throughout the year around the Triangle, so we signed up for a few. They keep standings based on
participation and placement. You get 5 points for running a race, and more if you place in your
age/gender division. We ran about 4 or 5 of the races. I hadn&#8217;t really thought about the series at
all recently since I injured my right Achilles in July and haven&#8217;t run at all since then. Getting
old really is a bummer. Anyways, I checked the website today and they have posted the <a href="http://www.precisionrace.com/s/Series_Rank_Report_Race25_Cash_v9_2Races-xzxt.pdf">final 2018
results</a>. I got
6th place in my &#8220;not-quite-old-fogey&#8221; division! Not bad, huh? Yeah, I know&#8230; it&#8217;s mostly a
participation award, but still, I&#8217;m proud. But wait! That&#8217;s not even the best part. I&#8217;m even more
proud of Kavi and Anika. They are both in the 0-19 age group, so get to compete against teenagers.
Kavi got 3rd place in the male 0-19 division, and Anika got 1st place in the female 0-19 division!</p>

<p><img src="https://www.kurup.org/images/oak-city-mile-2018.jpg" title="Oak City Mile 2018" ></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[My Nest Journey]]></title>
    <link href="https://www.kurup.org/blog/2018/12/02/nest-journey"/>
    <updated>2018-12-02T23:33:53-05:00</updated>
    <id>https://www.kurup.org/blog/2018/12/02/nest-journey</id>
    <content type="html"><![CDATA[<p>I got 2 <a href="https://amzn.to/2zE10T1">Nest E thermostats</a> because Duke Energy was having a sale around
Black Friday. I didn&#8217;t have any strong motivation to have a Nest. The idea of a smart home is cool,
but most &#8216;smart&#8217; things nowadays have ended up being more work than benefit. Anyway, for $75 each, I
thought it was worth a try. We have 2 thermostats so I decided to install the upstairs thermostat
first. The process started off smooth and easy. I like that they provide a back plate, which I
didn&#8217;t even notice until my trusty assistant, Kavi, pointed it out. My existing Honeywell thermostat
is rectangular and if I just put the small circular Nest in its place, there would be a big chunk of
unpainted real estate on the wall. Having the back plate prevented this from being a &#8216;replace
thermostat, and learn how to patch and paint the wall&#8217; project. The online <a href="https://nest.com/support/article/How-to-tell-if-your-heating-and-cooling-system-will-work-with-the-Nest-Thermostat#works/?mode=guide">Nest compatibility
checker</a>
and the paper instruction manual (which includes stickers to label the existing wires) are also nice
touches. That all gave me the (misguided?) confidence that even I could do this. A study confidence
which lasted until I flipped the circuit breaker back on and &#8230;. nothing happened. According to the
manual, the Nest was supposed to turn on, say Hi, and then walk me through the set up process. But
it remained dead as a doorknob. I pulled it off the wall and plugged it in via USB (a nice
troubleshooting feauture). It turned on and then when I placed it back on the wall, it complained
that it was not getting enough power from the R wire. The error code was E195. When I looked at the
&#8216;Technical Info&#8217;, it reported that the R wire was only providing 2-3 volts, while it needed 24. I
chatted up Nest support, which took about 30 minutes to connect on a Friday night. The
representative was responsive and useful. They eventually recommended trying to disconnect the C
(common) wire. For a reason I still can&#8217;t explain, this brought the voltage on the R wire from 2-3
volts up to 35 volts, and my Nest was working.</p>

<p>Having tasted the sweet nectar of success, I then tried to swap my second Nest in for my downstairs
thermostat. I made a huge mistake here. It had been easy to identify the circuit breaker for my
upstairs furnance because it was labelled, &#8220;Up Furnace&#8221;. But there was nothing labelling the
downstairs furnace. I switched off the circuit breaker that I thought was responsible for the
downstairs HVAC, but in hindsight, I think I got the wrong one (and since it was warm out and the
heater wasn&#8217;t running, I didn&#8217;t notice because nothing was running in the first place). Anyway, I
walked through the rest of the instructions and again got to the point where the Nest was supposed
to power on, but it didn&#8217;t. So I powered it on via USB and placed it back on the wall.
Unfortunately, this time I was getting only 0.01 volts from the R line. Still, I was hoping that the
&#8216;disconnect the C wire&#8217; trick would work again. Unfortunately, disconnecting the C wire did nothing.
I walked through things with Customer Service chat. Again, they were helpful (rather than just
spouting cookbook-type basic info), but in the end, they didn&#8217;t have a recommendation that would fix
things. They suggested that I get a voltmeter and test the voltage output at the various wires. I do
not have a voltmeter and felt that I was getting in over my head, so instead I put in some calls to
HVAC service companies, but since it was the weekend and this wasn&#8217;t urgent, I was resigned to
having no heat over the weekend. I watched a few Youtube videos of HVAC repairs, some of which were
quite entertaining. Eventually, I tried to reconnect my old Honeywell thermostat and was surprised
and intrigued when this ALSO failed. It made me think that I messed something up somehow. The only
thing I could think of was that since I hit the wrong circuit breaker, there was live current in the
wires. While moving them from the Honeywell to the Nest, perhaps I touched 2 wires together causing
the system to short circuit. I don&#8217;t remember noticing a spark or anything, but that was my best
guess. I eventually watched enough videos to give myself confidence that I could open up the HVAC
and find the electrical panel. I did that successfully (after turning off the CORRECT circuit
breaker, and also pulling out the pull out switch next to the furnace). After cleaning out a ton of
cobwebs, I found the LED light on the electrical panel was off (even after connecting the circuits
temporarily). I searched the panel and found a 3-amp E fuse (like the kind I&#8217;ve seen in automobile
fuseboxes). I pulled it out and sure enough, it was blown. It looked like the &#8216;bad fuse&#8217; in this
<a href="https://www.yourmechanic.com/article/how-to-check-fuses-by-rocco-lovetere">photo</a>. Off to Home
Depot, I purchased 2 replacements for 3 dollars, and then replaced the busted fuse with the new one.
I flipped the circuit breaker and put the pull-in switch back in. The first encouraging sign was
that the red LED light on the electrical panel turned on. I went inside and, joy of joys, the Nest
was booting up and showed 35V via the R wire. So, I guess the bottom line is that I need to be more
careful when I&#8217;m at the circuit breaker box.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Composting]]></title>
    <link href="https://www.kurup.org/blog/2018/09/23/composting"/>
    <updated>2018-09-23T20:50:53-04:00</updated>
    <id>https://www.kurup.org/blog/2018/09/23/composting</id>
    <content type="html"><![CDATA[<p>Guess what, we&#8217;re composting now! I told you was <a href="https://www.kurup.org/blog/2018/09/22/starting-a-garden">going to be a
gardener</a>, so now you know I&#8217;m serious. For oh so many years,
every Friday, we&#8217;d haul the garbage and recycling out and I&#8217;d think to myself, &#8220;Wow, we&#8217;d have like no
garbage at all if we were composting.&#8221; It&#8217;s only taken a few years of thinking that, week in and
week out, to get me to try. Actually, that&#8217;s not even true. It was still way down on my future to-do
list until I got a cheap copy of <a href="https://amzn.to/2xyqbWb">&#8220;The Complete Idiot&#8217;s Guide to
Composting&#8221;</a>. Thank you, <a href="https://www.bookbub.com/welcome">BookBub</a>! (As if
I needed any other incentive to buy and read more books). But honestly, the book was excellent in
that it made me think that yes, even I could compost. So shortly after finishing it, I headed down
to the Orange County Solid Waste Center and purchased an <a href="https://www.earthmachine.com/contact.php">Earth Machine compost
bin</a> for fifty bucks, and made the kids set it up near the
screen porch. We&#8217;ve been throwing all our copious kitchen scraps for the past 2 weeks. So far, all
that has happened is that a bunch of fruit flies think we&#8217;re awesome neighbors and seem to have
moved in for the long haul. But I&#8217;m hoping that some composting starts happening soon. It&#8217;s supposed
to be easy as pie, but I&#8217;m secretly worried that I&#8217;m missing something, oh, like maybe skills or
talent. But our garbage bin sure is lighter!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Starting a garden]]></title>
    <link href="https://www.kurup.org/blog/2018/09/22/starting-a-garden"/>
    <updated>2018-09-22T20:50:53-04:00</updated>
    <id>https://www.kurup.org/blog/2018/09/22/starting-a-garden</id>
    <content type="html"><![CDATA[<p>I&#8217;m going to be a gardener. Yup, just decided. Well, re-decided, I guess, since we already have a
garden. It&#8217;s a strip of dirt on the side of our house and we&#8217;ve been trying to grow vegetables the
past couple years. But it has some problems. It&#8217;s way out of the way, so it&#8217;s a pain to check on it
(since I&#8217;m lazy). The ground just underneath the topsoil is hard clay. It&#8217;s shaded most of the day
either by our house, or by the beautiful forest surrounding our house. And I haven&#8217;t figured out a
way to keep the deer from eating the few vegetables that we are able to grow in there. And even
despite all those problems we&#8217;ve been able to grow some zucchini, okra, tomatoes and basil, which
has been super exciting, and makes us want more! Here&#8217;s a photo of the harvest that greeted us when
we returned from a week-long trip to visit my parents in Dallas this summer:</p>

<p><img src="https://www.kurup.org/images/august-harvest.jpg" title="August Harvest" ></p>

<p>But, in general, things end up getting eaten by the deer or overrun by weeds, so we&#8217;re trying a new
approach now, based on the book, <a href="https://amzn.to/2NzBVSg">Square Foot Gardening</a>. Kavi and Anika
helped me build this raised bed, which is itself a huge accomplishment given how not-handy I am.</p>

<p><img src="https://www.kurup.org/images/our-little-garden.jpg" title="Our Little Garden" ></p>

<p>This was my first time using a drill since shop class in high school! We&#8217;re going to try using a
<a href="http://vomitingchicken.com/deer-fencing-cheap-and-easy-and-effective/">fishing line fence</a> to keep
the deer away. I&#8217;m not very optimistic about that, but fingers-crossed! We can also see the garden
from our living room, so maybe I can just shoo them away any time they saunter by. The garden is
looking quite pathetic because we bought some seedlings from the Carrboro Farmer&#8217;s Market but then
all our garden plans got sidetracked by Hurricane Florence (which fortunately treated us very
kindly, all things considered). So, the seedlings wilted away in our screen porch before we finally
got a chance to plant them this week. We&#8217;re hoping there&#8217;s still some life left in them. Anyway, our
expectations are low, especially given how late in the summer we&#8217;re starting, but it would be nice
to get one head of lettuce or something to grow. I&#8217;ll be sure to let you know!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[History of Indian Civilization]]></title>
    <link href="https://www.kurup.org/blog/2018/05/31/indian-civilization"/>
    <updated>2018-05-31T20:00:00-04:00</updated>
    <id>https://www.kurup.org/blog/2018/05/31/indian-civilization</id>
    <content type="html"><![CDATA[<p>I briefly mentioned finding the 2012 UCLA lecture series,
&#8221;<a href="https://www.youtube.com/watch?v=93JMjX1XECo&amp;list=PLy3KRgc0HE8B4neta_B8LPM0G9UWy-Cqe">History of Indian Civilization</a>&#8221;,
a <a href="https://www.kurup.org/blog/2018/05/29/renaissance-man">couple days ago</a>. I&#8217;m about halfway through
and have found it thorougly illuminating. I learned a lot about India growing
up, but never in a formal way, so it&#8217;s nice to have someone as skilled as Vinay
Lal connect all the loose threads into a coherent history. One of the things
that surprises me is that aside from the fact that classes are being streamed
over the internet, there is nothing different than the lectures I skipped (I
mean religiously attended!) about 20 years ago. It&#8217;s a large auditorium of
students watching a very charismatic, knowledgeable speaker pacing at the front
of the class, occasionally making mostly-legible markings on a chalkboard. Not
that there&#8217;s anything wrong with that. I learned a lot back in college and I&#8217;m
enjoying these lectures immensely. It just seems strange that so little has
changed in the university clasroom (at least this one from 2012) when so much
has changed in the world at large.</p>

<p>Actually, I find it reassuring that little has changed, at least in some
classes. There was a time when the ability to download the audio of any
university class was absolutely new. For me, that was around 2002 or so. I
listened to CS61A (UC Berkley&#8217;s intro to CS course) and a few other similar
courses back then. The limitations of internet bandwidth and storage made
anything more than audio difficult back then. But now with those barriers
crushed, I was afraid that everything would be &#8220;multimedia&#8221;, and not amenable to
listening while I commute to work. So, it&#8217;s reassuring to find that audio-only
dissemination of knowledge is still a thing.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Autovacuum not running]]></title>
    <link href="https://www.kurup.org/blog/2018/05/30/autovacuum-fail"/>
    <updated>2018-05-30T21:26:00-04:00</updated>
    <id>https://www.kurup.org/blog/2018/05/30/autovacuum-fail</id>
    <content type="html"><![CDATA[<p>OK, this is a debug session in progress, so don&#8217;t expect a nice solution at the end. We&#8217;re working
on a project that does analysis of some public voter registration data. The DB is hosted on Amazon
RDS and I&#8217;ve been perplexed by how poorly queries are performing there, despite the tables only have
about 10 million rows. Simple queries are taking many minutes, which is orders of magnitude slower
than my laptop.</p>

<p><a href="http://mlavin.org/">Mark</a> suggested running &#8216;VACUUM ANALYZE&#8217;, which I didn&#8217;t think would help
because my understanding was that the autovacuum process in PostgreSQL would be taking care of that
on a regular basis. These queries had been slow for days with no recent inserts or updates, so
certainly autovacuum should have caught up to them by now. But, I tried it anyway and lo and behold:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="n">db</span><span class="o">=&gt;</span> <span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">from</span> <span class="n">voter_ncvoter</span><span class="p">;</span>
</span><span class='line'>  <span class="k">count</span>
</span><span class='line'><span class="c1">----------</span>
</span><span class='line'> <span class="mi">12336571</span>
</span><span class='line'><span class="p">(</span><span class="mi">1</span> <span class="k">row</span><span class="p">)</span>
</span><span class='line'><span class="n">Time</span><span class="p">:</span> <span class="mi">315777</span><span class="p">.</span><span class="mi">051</span> <span class="n">ms</span>
</span><span class='line'><span class="n">db</span><span class="o">=&gt;</span> <span class="k">vacuum</span> <span class="k">analyze</span><span class="p">;</span>
</span><span class='line'><span class="k">VACUUM</span>
</span><span class='line'><span class="n">Time</span><span class="p">:</span> <span class="mi">11377035</span><span class="p">.</span><span class="mi">096</span> <span class="n">ms</span>
</span><span class='line'><span class="n">db</span><span class="o">=&gt;</span> <span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">from</span> <span class="n">voter_ncvoter</span><span class="p">;</span>
</span><span class='line'>  <span class="k">count</span>
</span><span class='line'><span class="c1">----------</span>
</span><span class='line'> <span class="mi">12336571</span>
</span><span class='line'><span class="p">(</span><span class="mi">1</span> <span class="k">row</span><span class="p">)</span>
</span><span class='line'><span class="n">Time</span><span class="p">:</span> <span class="mi">4300</span><span class="p">.</span><span class="mi">107</span> <span class="n">ms</span>
</span></code></pre></td></tr></table></div></figure>


<p>Woah, that worked! Sure, it took 3+ hours to run ANALYZE, but wow. So, why isn&#8217;t autovacuum
automatically doing this for us. (I mean it has the phrase &#8216;auto&#8217; in its name!!!)</p>

<p>I&#8217;ve found this great article on <a href="https://blog.2ndquadrant.com/autovacuum-tuning-basics/">autovacuum
basics</a> which led me to do this query:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="n">db</span><span class="o">=&gt;</span> <span class="k">select</span> <span class="n">relname</span><span class="p">,</span> <span class="n">n_live_tup</span><span class="p">,</span> <span class="n">last_autoanalyze</span> <span class="k">from</span> <span class="n">pg_stat_all_tables</span> <span class="k">where</span> <span class="n">relname</span> <span class="k">like</span> <span class="s1">&#39;voter_%&#39;</span><span class="p">;</span>
</span><span class='line'>       <span class="n">relname</span>       <span class="o">|</span> <span class="n">n_live_tup</span> <span class="o">|</span>       <span class="n">last_autoanalyze</span>
</span><span class='line'><span class="c1">---------------------+------------+------------+-------------------------------</span>
</span><span class='line'> <span class="n">voter_changetracker</span> <span class="o">|</span>  <span class="mi">306689271</span> <span class="o">|</span> <span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">05</span> <span class="mi">04</span><span class="p">:</span><span class="mi">59</span><span class="p">:</span><span class="mi">08</span><span class="p">.</span><span class="mi">503876</span><span class="o">+</span><span class="mi">00</span>
</span><span class='line'> <span class="n">voter_filetracker</span>   <span class="o">|</span>         <span class="mi">41</span> <span class="o">|</span> <span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">13</span> <span class="mi">02</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">47</span><span class="p">.</span><span class="mi">802633</span><span class="o">+</span><span class="mi">00</span>
</span><span class='line'> <span class="n">voter_ncvhis</span>        <span class="o">|</span>          <span class="mi">0</span> <span class="o">|</span>
</span><span class='line'> <span class="n">voter_ncvoter</span>       <span class="o">|</span>   <span class="mi">12336616</span> <span class="o">|</span> <span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">06</span> <span class="mi">13</span><span class="p">:</span><span class="mi">20</span><span class="p">:</span><span class="mi">30</span><span class="p">.</span><span class="mi">073426</span><span class="o">+</span><span class="mi">00</span>
</span><span class='line'> <span class="n">voter_badlinerange</span>  <span class="o">|</span>        <span class="mi">404</span> <span class="o">|</span> <span class="mi">2018</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">10</span> <span class="mi">05</span><span class="p">:</span><span class="mi">44</span><span class="p">:</span><span class="mi">39</span><span class="p">.</span><span class="mi">949193</span><span class="o">+</span><span class="mi">00</span>
</span><span class='line'><span class="p">(</span><span class="mi">5</span> <span class="k">rows</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>So those 2 large tables haven&#8217;t been ANALYZEd in weeks, despite the fact that we import a 10 million
row CSV once every week. This is the end of my debugging road, for now. Hopefully, I&#8217;ll figure out
what&#8217;s going on.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Renaissance Man]]></title>
    <link href="https://www.kurup.org/blog/2018/05/29/renaissance-man"/>
    <updated>2018-05-29T21:05:00-04:00</updated>
    <id>https://www.kurup.org/blog/2018/05/29/renaissance-man</id>
    <content type="html"><![CDATA[<p>I love this
<a href="https://austinkleon.com/2018/05/29/wearing-many-hats/">post by Austin Kleon</a>.
As someone who has found very few things that I don&#8217;t find intriguing in some
way, it is nice to know that there are others like me and that maybe there&#8217;s
nothing wrong with that. I love being a doctor and I love being a programmer,
and I love honing both of those crafts.</p>

<p>He also links to a
<a href="https://www.nytimes.com/2012/01/22/education/edlife/renaissance-man.html">2012 New York Times article about a UCLA sophomore</a>
who spends 1 hour each day learning something new, mainly by taking online
courses from other universities or watching how-to videos on YouTube. We live in
a golden age, don&#8217;t we? I mean, sure, people will look back at our period of
history and cringe quite a bit, but the idea that I can search just about any
term, and find information about it on Wikipedia, and probably find a course on
it by an actual college professor&#8230;. it&#8217;s just mind boggling. I&#8217;m lucky as it
is, but I often think about if I was a kid growing up in this era. I&#8217;d be
overwhelmed, sure, but I would totally be taking online courses left and right.</p>

<p>Actually, even if I weren&#8217;t a kid. I just googled the subject of that NYT
article and found his twitter account. His
<a href="https://twitter.com/_TheDancingFox_/status/686341754262429696">most recent post</a>
is from 2016 but links to a YouTube series from UCLA on the history of India. I
am TOTALLY watching that.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Using dynamic queries in a CBV]]></title>
    <link href="https://www.kurup.org/blog/2014/07/28/cbv-dynamic"/>
    <updated>2014-07-28T22:08:00-04:00</updated>
    <id>https://www.kurup.org/blog/2014/07/28/cbv-dynamic</id>
    <content type="html"><![CDATA[<p>Let&#8217;s play &#8216;Spot the bug&#8217;. We&#8217;re building a simple system that shows photos. Each photo has a
<code>publish_date</code> and we should only show photos that have been published (i.e. their <code>publish_date</code> is
in the past).</p>

<figure class='code'><figcaption><span>models.py</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">PhotoManager</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Manager</span><span class="p">):</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">live</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">as_of</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">as_of</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
</span><span class='line'>            <span class="n">as_of</span> <span class="o">=</span> <span class="n">timezone</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
</span><span class='line'>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_query_set</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">publish_date__lte</span><span class="o">=</span><span class="n">as_of</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>And the view to show those photos:</p>

<figure class='code'><figcaption><span>views.py</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">ShowPhotosView</span><span class="p">(</span><span class="n">ListView</span><span class="p">):</span>
</span><span class='line'>    <span class="n">queryset</span> <span class="o">=</span> <span class="n">Hero</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">live</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>Can you spot the bug? I sure didn&#8217;t&#8230; until the client complained that newly published photos never
showed up on the site. Restarting the server fixed the problem temporarily. The newly published
photos would show up, but then any photos published after the server restart again failed to
display.</p>

<p>The problem is that the <code>ShowPhotosView</code> class is instantiated when the server starts.
<code>ShowPhotosView.queryset</code> gets set to the value returned by <code>Hero.objects.live()</code>. That, in turn, is a
<code>QuerySet</code>, but it&#8217;s a <code>QuerySet</code> with <code>as_of</code> set to <code>timezone.now()</code> <em>WHEN THE SERVER STARTS UP</em>. That
<code>as_of</code> value never gets updated, so newer photos never get captured in the query.</p>

<p>There&#8217;s probably multiple ways to fix this, but an easy one is:</p>

<figure class='code'><figcaption><span>views.py</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">ShowPhotosView</span><span class="p">(</span><span class="n">ListView</span><span class="p">):</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">get_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">Hero</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">live</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now, instead of the queryset being instantiated at server start-up, it&#8217;s instantiated only when
<code>ShowPhotosView.get_queryset()</code> is called, which is when a request is made.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Some Emacs Posts]]></title>
    <link href="https://www.kurup.org/blog/2014/07/23/some-emacs-posts"/>
    <updated>2014-07-23T21:38:00-04:00</updated>
    <id>https://www.kurup.org/blog/2014/07/23/some-emacs-posts</id>
    <content type="html"><![CDATA[<p>A few cool Emacs posts have flown across my radar, so I&#8217;m noting them here for that time in the
future when I have time to play with them.</p>

<ul>
<li><a href="http://endlessparentheses.com/manually-choose-a-fallback-font-for-unicode.html">Get unicode glyphs to show properly</a>. (╯°□°）╯︵ ┻━┻</li>
<li><a href="http://jr0cket.co.uk/2013/10/create-cool-slides--Org-mode-Revealjs.html/">Creating slides with org-mode and Reveal.js</a>.
Finally, a sane way to create a presentation :)</li>
<li><a href="https://github.com/syohex/emacs-anzu">Anzu</a>: Improves incremental search. Anzu shows the number
of matches found, and how many matches remain in the document.
<img src="https://github.com/syohex/emacs-anzu/raw/master/image/anzu.gif"></li>
<li><a href="http://from-the-cloud.com/en/emacs/2013/01/28_emacs-as-a-django-ide-with-python-djangoel.html">Emacs as a Django IDE</a>:
I tried this out briefly, but didn&#8217;t end up sticking with it. It seemed too heavyweight.
I&#8217;m probably just too used to my own workflow. I still think it&#8217;s an interesting idea and would
like to try it again sometime.</li>
<li><a href="http://emacsredux.com/blog/2014/07/22/travel-back-and-forward-in-git-history/">Travel back and forth in git history</a>:
I&#8217;m addicted to <a href="http://www.emacswiki.org/emacs/Magit">magit mode</a>, to the point that the
only git command I use manually nowadays is <code>git clone</code>. I do everything else in magit. Magit has
a <code>magit-blame-mode</code> which shows when each line in a file was changed and by whom.
<code>git-timemachine</code> seems to take that a step further by visiting each revision, one by
one. I can think of a few times where that would have been useful.</li>
<li><a href="https://github.com/omouse/emacs-sos">Search StackOverflow from inside Emacs</a>: Enough said.</li>
<li><a href="https://github.com/skeeto/elfeed">Emacs RSS client</a>: Still using NewsBlur, but totally miss
Google Reader. Maybe I need to try this one out.</li>
<li><a href="http://sachachua.com/blog/series/read-lisp-tweak-emacs/">Sacha Chua&#8217;s minicourse on Elisp</a>: Have
to read through this someday!</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Pygments on Arch Linux]]></title>
    <link href="https://www.kurup.org/blog/2014/07/22/pygments-py3"/>
    <updated>2014-07-22T21:16:00-04:00</updated>
    <id>https://www.kurup.org/blog/2014/07/22/pygments-py3</id>
    <content type="html"><![CDATA[<p>I wrote my first blog post in a little while (ok, ok&#8230; 18 months) yesterday and when I tried to
generate the post, it failed. Silently failed, which is the worst kind of failure. I&#8217;m still not
sure why it was silent, but I eventually was able to force it to show me an error message:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/home/vinod/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/pygments.rb-0.3.4/lib/pygments/popen.rb:354:in `rescue in get_header': Failed to get header. (MentosError)
</span><span class='line'>  from /home/vinod/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/pygments.rb-0.3.4/lib/pygments/popen.rb:335:in `get_header'
</span><span class='line'>  from /home/vinod/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/pygments.rb-0.3.4/lib/pygments/popen.rb:232:in `block in mentos'
</span><span class='line'>  from /home/vinod/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/timeout.rb:68:in `timeout'
</span><span class='line'>  from /home/vinod/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/pygments.rb-0.3.4/lib/pygments/popen.rb:206:in `mentos'
</span><span class='line'>  from /home/vinod/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/pygments.rb-0.3.4/lib/pygments/popen.rb:189:in `highlight'
</span><span class='line'>  from /home/vinod/dev/kurup.org/plugins/pygments_code.rb:24:in `pygments'
</span><span class='line'>  from /home/vinod/dev/kurup.org/plugins/pygments_code.rb:14:in `highlight'
</span><span class='line'>  from /home/vinod/dev/kurup.org/plugins/backtick_code_block.rb:37:in `block in render_code_block'
</span><span class='line'>  from /home/vinod/dev/kurup.org/plugins/backtick_code_block.rb:13:in `gsub'
</span><span class='line'>  from /home/vinod/dev/kurup.org/plugins/backtick_code_block.rb:13:in `render_code_block'
</span><span class='line'>  from /home/vinod/dev/kurup.org/plugins/octopress_filters.rb:12:in `pre_filter'
</span><span class='line'>  from /home/vinod/dev/kurup.org/plugins/octopress_filters.rb:28:in `pre_render'
</span><span class='line'>  from /home/vinod/dev/kurup.org/plugins/post_filters.rb:112:in `block in pre_render'
</span><span class='line'>  from /home/vinod/dev/kurup.org/plugins/post_filters.rb:111:in `each'
</span><span class='line'>  from /home/vinod/dev/kurup.org/plugins/post_filters.rb:111:in `pre_render'
</span><span class='line'>  from /home/vinod/dev/kurup.org/plugins/post_filters.rb:166:in `do_layout'
</span><span class='line'>  from /home/vinod/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/jekyll-0.12.0/lib/jekyll/post.rb:195:in `render'
</span><span class='line'>  from /home/vinod/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/jekyll-0.12.0/lib/jekyll/site.rb:200:in `block in render'
</span><span class='line'>  from /home/vinod/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/jekyll-0.12.0/lib/jekyll/site.rb:199:in `each'
</span><span class='line'>  from /home/vinod/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/jekyll-0.12.0/lib/jekyll/site.rb:199:in `render'
</span><span class='line'>  from /home/vinod/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/jekyll-0.12.0/lib/jekyll/site.rb:41:in `process'
</span><span class='line'>  from /home/vinod/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/jekyll-0.12.0/bin/jekyll:264:in `&lt;top (required)&gt;'
</span><span class='line'>  from /home/vinod/.rbenv/versions/1.9.3-p286/bin/jekyll:23:in `load'
</span><span class='line'>  from /home/vinod/.rbenv/versions/1.9.3-p286/bin/jekyll:23:in `&lt;main&gt;'</span></code></pre></td></tr></table></div></figure>


<p>Professor Google tells me that this happens when you try to
<a href="https://github.com/tmm1/pygments.rb/issues/45">run the pygments.rb library in a Python 3 environment</a>.
(pygments.rb is a Ruby wrapper around the Python Pygments library). The fix is to run the code in a
Python2 virtualenv. I guess the last time I updated my blog, Arch still had Python2 as the system
default. No, I don&#8217;t want to check how long ago that was.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ mkvirtualenv -p `which python2` my_blog
</span><span class='line'>(my_blog)$ bundle exec rake generate</span></code></pre></td></tr></table></div></figure>


<p>So now I&#8217;m running a Ruby command in a Ruby environment (rbenv) inside a Python 2 virtualenv. Maybe
it&#8217;s time to switch blog tools again&#8230;</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[How to create test models in Django]]></title>
    <link href="https://www.kurup.org/blog/2014/07/21/django-test-models"/>
    <updated>2014-07-21T20:44:00-04:00</updated>
    <id>https://www.kurup.org/blog/2014/07/21/django-test-models</id>
    <content type="html"><![CDATA[<p>It&#8217;s occasionally useful to be able to create a Django model class in your unit test suite. Let&#8217;s
say you&#8217;re building a library which creates an
<a href="https://docs.djangoproject.com/en/dev/topics/db/models/#abstract-base-classes">abstract model</a>
which your users will want to subclass. There&#8217;s no need for your library to subclass it, but your
library should still test that you can create a subclass and test out its features. If you create
that model in your <code>models.py</code> file, then Django will think that it is a real part of your library and
load it whenever you (or your users) call <code>syncdb</code>. That&#8217;s bad.</p>

<p>The <a href="https://code.djangoproject.com/ticket/7835#comment:24">solution</a> is to create it in a <code>tests.py</code>
file within your Django app. If it&#8217;s not in <code>models.py</code>, Django won&#8217;t load it during <code>syncdb</code>.</p>

<figure class='code'><figcaption><span>tests.py</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">django.test</span> <span class="kn">import</span> <span class="n">TestCase</span>
</span><span class='line'>
</span><span class='line'><span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">MyAbstractModel</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">MyTestModel</span><span class="p">(</span><span class="n">MyAbstractModel</span><span class="p">):</span>
</span><span class='line'>    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">AbstractTest</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">test_my_test_model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">MyTestModel</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>A problem with this solution is that I rarely use a single <code>tests.py</code> file. Instead we use multiple
test files collected in a tests package. If you try to create a model in <code>tests/test_foo.py</code>, then
this approach fails because Django tries to create the model in an application named <code>tests</code>, but
there is no such app in INSTALLED_APPS. The solution is to set <code>app_label</code> to the name of your app
in an inner Meta class.</p>

<figure class='code'><figcaption><span>tests/test_foo.py</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">django.test</span> <span class="kn">import</span> <span class="n">TestCase</span>
</span><span class='line'>
</span><span class='line'><span class="kn">from</span> <span class="nn">..models</span> <span class="kn">import</span> <span class="n">MyAbstractModel</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">MyTestModel</span><span class="p">(</span><span class="n">MyAbstractModel</span><span class="p">):</span>
</span><span class='line'>    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span><span class='line'>        <span class="n">app_label</span> <span class="o">=</span> <span class="s">&#39;myappname&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">AbstractTest</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">test_my_test_model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">MyTestModel</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Oh, and I almost forgot&#8230; if you use <a href="http://south.readthedocs.org/en/latest/index.html">South</a>,
this might not work, unless you set <code>SOUTH_TESTS_MIGRATE</code> to <code>False</code> in your settings file.</p>

<p>Comments and corrections welcome!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Peanut Allergy, a personal clinical review]]></title>
    <link href="https://www.kurup.org/blog/2013/01/21/peanut-allergy-a-personal-clinical-review"/>
    <updated>2013-01-21T07:49:22-05:00</updated>
    <id>https://www.kurup.org/blog/2013/01/21/peanut-allergy-a-personal-clinical-review</id>
    <content type="html"><![CDATA[<h2>A Vignette</h2>

<p>A 22-month-old previously healthy girl was brought to the emergency
room in respiratory distress. She had been well until the day of
presentation. Shortly after disembarking from an airline flight, she
developed cough with one episode of emesis. En route to the emergency
room, her breathing became labored and she developed hives. She was
diagnosed as having an allergic reaction and treated aggressively with
IV methylprednisolone, IV diphenhydramine, inhaled albuterol, and
oxygen. Mechanical ventilation was not required and her symptoms
improved rapidly. She was monitored in the emergency room for an
extended period and discharged in stable condition with a prescription
for diphenhydramine and methylprednisolone solutions. No specific
allergen was identified. She was seen by a pediatric allergist where
she was found to have a 6 mm response to peanut on skin prick testing,
and a peanut-specific IgE level of 52 kU/L. She was diagnosed as
having severe peanut allergy and avoidance was strongly recommended.</p>

<h2>Discussion</h2>

<p>Peanut allergy affects between 0.4 and 2.0% of children. Prevalence
has been increasing in recent years, but the reason for this increase
is not well understood. If reactions are identified immediately,
treatment is usually effective. Despite this, about 200 people die
each year from peanut reactions. Biphasic reactions, in which the
initial reaction subsides, but then recurs within a few hours, are
common. The second portion of a biphasic reaction is often less
treatable. Because of this risk, patients should be monitored for at
least 4 hours after a reaction. Patients who successfully treat their
own reactions with subcutaneous epinephrine should still seek medical
attention, again to monitor for biphasic reactions.</p>

<p>The gold standard for diagnosis is a double blind placebo controlled
food challenge (DBPCFC), but this is rarely done. A diagnosis can
usually be reliably made with clinical history, skin prick testing and
a peanut-specific IgE blood test (psIgE). A skin prick test involves
pricking the skin with a needle that is exposed to peanut extract and
measuring the allergic rash that develops. The psIgE blood test
measures the amount of antibody against peanut proteins. The higher it
is, the more allergic the patient is. A positive skin test or psIgE is
not sufficient for the diagnosis. Some type of reaction to peanuts is
required (either spontaneous, or via monitored food challenge).</p>

<p>Peanut allergy was previously felt to be permanent, but recent
evidence documents that 20% of children outgrow their allergy. More
than 60% of patients with an psIgE level of less than 5 passed a food
challenge. IgE levels correlate inversely with likelihood of
resolution, but this correlation is by no means perfect. Some patients
with undetectable psIgE levels will fail a challenge, while some
patients with very high psIgE levels will pass. One expert recommends
waiting until the age of 4 to consider a challenge, and to use a
cutoff psIgE level of less than 5 kU/L in most patients. Recurrence
of peanut allergy after resolution is rare, but is associated with the
lack of regular peanut intake after resolution of the allergy.</p>

<p>Controversy exists regarding risk factors for developing peanut
allergy. The AAP initially recommended that peanut not be introduced
early in a child&#8217;s life, but rescinded that advice given the lack of
evidence behind it. This leaves a void for parents as there is no
recommendation to withold or introduce peanuts to toddlers. It is also
not clear if maternal peanut intake during pregnancy or breast feeding
increases the risk of developing peanut allergy in children. Studies
have been conflicting, so more definitive studies are underway. No
evidence-based advice can be given one way or the other to pregnant or
breastfeeding women, but at the minimum, there is no good evidence to
support avoiding peanuts.</p>

<p>The mainstay of treatment is education. Parents should be taught not
only how to identify peanuts in foods, but to identify situations
which are high-risk for exposure to peanuts. Avoidance of buffets,
ice-cream parlors, and bakeries is recommended because the risk of
cross-contamination in those setting is high. Religious reading of
food labels is important. Patients who are allergic to peanuts are
often also allergic to tree nuts, despite the dissimilarity in those
food types. Highly refined peanut oil is usually <em>NOT</em> a risk, but
cold-pressed peanut oil is not safe.</p>

<p>Most importantly, an epi-pen should be carried at all times and extra
doses should be left at daycare facilities and schools. All caregivers
should be comfortable giving an epi-pen injection and this should be
provided at the first sign of a systemic allergic reaction. Waiting to
give diphenhydramine or other therapies a &#8220;chance to work&#8221; can be
dangerous. Follow a <a href="http://www.foodallergy.org/files/media/food-allergy-action-plan/FAAP.pdf">Food Allergy Action
Plan</a>
Over 80% of people who died from allergic reactions were not given
appropriate instructions on how to prevent future reactions. Most
mortality occurs because of late treatment. If you take one thing away
from this long post, keep an epi-pen handy and use it liberally.</p>

<p>Trials are underway investigating various oral-based immunotherapies,
but none are strongly recommended at this point. Injection
immunotherapy has not been found to be useful.</p>

<h2>Personal Comment</h2>

<p>So, the 22 month old above is Anika and she gave us the scare of our
life a couple years ago. The scary part now is that we never saw her
actually eat a peanut, so we&#8217;re especially vigilant now. Fortunately,
Anika seems to understand the importance of avoiding peanuts. When she
was diagnosed, I did some research but never documented my notes. She
recently had another allergist appointment, so I reviewed those notes
and any new data. I figured I should write up my notes so I wouldn&#8217;t
have to review this again from scratch every year. I didn&#8217;t intend it
to come out so &#8216;medical-speaky&#8217;, but there it is. Anika and Kavi are
sitting next to me as I write this and they want to give some
information to you, too.</p>

<p>Kavi says:</p>

<blockquote><p>&#8220;Always ask at the restaurant if things have peanuts and make foods
at home that do not have peanuts. Always check if there are peanuts in
every food you eat.&#8221;</p></blockquote>

<p>Anika says:</p>

<blockquote><p>&#8220;We might have to go to the doctor if we eat peanuts. If I eat
peanuts by accident, my teacher will give me a Happy-Pen (epi-pen).&#8221;</p></blockquote>

<h2>References</h2>

<ol>
<li>Sampson HA. Peanut Allergy. N Engl J Med, 2002;346;1294-8.
http://www.nejm.org/doi/full/10.1056/NEJMcp012667</li>
<li>Fleischer DM, et. al. The natural progression of peanut allergy:
Resolution and the possibility of recurrence. J Allergy Clin
Immunol, 2003;112;183-9.
http://www.jacionline.org/article/S0091-6749(03)01251-X/abstract</li>
<li>O&#8217;B Hourihane J. Peanut Allergy. Pediatr Clin N Am, 2011;58;445-57.
http://www.pediatric.theclinics.com/article/S0031-3955(11)00006-X/abstract</li>
<li>Rinaldi M, et. al. Peanut allergy diagnoses among children
residing in Olmstead County, Minnesota. J Allergy Clin Immunol, 2012:130:945-50.</li>
<li>Burks AW. Early peanut consumption: postpone or promote? J Allergy
Clin Immunol. 2009:123:417-423.
http://www.jacionline.org/article/S0091-6749(08)02436-6/fulltext</li>
</ol>


<h2>RSS URL:</h2>

<p>Here&#8217;s a
<a href="http://eutils.ncbi.nlm.nih.gov/entrez/eutils/erss.cgi?rss_guid=1t7jLQ--MCbUSbgzXRNqEMLPWIMWlZiqoEMdLvUTNUIFZ-UsA4">medline feed URL</a>
that I monitor which should show new studies or reviews related to
this topic.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Priorities and GTD]]></title>
    <link href="https://www.kurup.org/blog/2013/01/17/priorities-and-gtd"/>
    <updated>2013-01-17T13:38:07-05:00</updated>
    <id>https://www.kurup.org/blog/2013/01/17/priorities-and-gtd</id>
    <content type="html"><![CDATA[<p>Pre-GTD task management systems recommended that you assign a priority
to each task. When looking at a list of tasks, you then choose the
ones with the highest priority. David Allen (author of GTD) includes
&#8216;priority&#8217; as one of the things that you should consider when you are
deciding what to do, but only after you have considered context, time
available, and energy available. Which makes sense. As Merlin Mann
says, it doesn&#8217;t matter if mowing your lawn is your highest priority
when you&#8217;re sitting in an airplane. Only if you&#8217;re in the right
context with the right amount of time and the right amount of energy,
should you consider which of the remaining available tasks is highest
priority.</p>

<p>The risk, though, is that there are so many little &#8216;easy&#8217; tasks that I
could do instead of important, &#8216;hard&#8217; tasks. I&#8217;m also really good at
convincing myself that I don&#8217;t have the energy available to do harder
tasks when I really should. So when I get back into GTD, I process all
the things hiding in the back of my brain which leads to the creation
of lots of simple tasks. Google this, buy that, throw away the other
thing. But the two things that I really want to be doing more are
writing and programming. Both of those take blocks of uninterrupted
time and effort, so I end up subconsciously shying away from them. I
actually feel better about it, too, because now I have all these other
tasks that I can do instead. So, I feel productive, even when ignoring
the more important things that I should be doing. I&#8217;m moving more
efficiently, but in the wrong direction.</p>

<p>I&#8217;ve avoided that a little bit this time by doing a little bit of
prioritization each night before I go to bed. I look through my todo
list and pick about 3-5 things that I want to get done the next day. I
tag those with the &#8216;today&#8217; tag and then the next morning I look at
that list and start working on those things before doing anything
else. I&#8217;ve heard this
<a href="http://gettingresults.com/wiki/The_Rule_of_3">trick</a> from a lot of
people before, so I don&#8217;t remember who I heard it from first.</p>

<p>So far it&#8217;s been effective for me. The problem always starts again
though when I go back on service, because then I can only really focus
on one thing and that is getting my work done at the hospital. We&#8217;ll
see if I can somehow figure out a way to get at least one non-work
thing done on each of those days.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[GTD again?]]></title>
    <link href="https://www.kurup.org/blog/2013/01/16/gtd-again"/>
    <updated>2013-01-16T09:27:03-05:00</updated>
    <id>https://www.kurup.org/blog/2013/01/16/gtd-again</id>
    <content type="html"><![CDATA[<p>Thanks to
<a href="http://5by5.tv/b2w/95">Merlin Mann&#8217;s recent series of podcasts on GTD</a>,
I&#8217;m getting back on the GTD wagon (for about the 100th time). I read
<a href="http://www.davidco.com/">Getting Things Done</a> in 2002 and have been
trying to implement it ever since. I&#8217;ve had periods where I followed
it religiously for a month at a time, but it&#8217;s never completely stuck.
From what I hear, this is normal and I accept it now. This won&#8217;t be
the last time that I restart GTD. Even when I&#8217;m not actively using
GTD, I think in GTD terms, thinking about next actions and projects
and ruthlessly placing projects on the backburner. I just have trouble
sticking with the entire GTD workflow, especially the ubiquitous
capture (I trust my brain too much) and the weekly reviews (they just
seem too painful). I&#8217;ve used every online and offline tool in the
book, too. Despite not doing so great with GTD, I&#8217;d say my life is an
overwhelming success.</p>

<p>So why try again? Each time I have gotten back on the bandwagon, I&#8217;ve
had a surge in productivity. I wrote more. I made some clear decisions
on issues that I had been procrastinating on. I wouldn&#8217;t be surprised
if each of my major life improvements over the past 10 years was
associated with a time where I got back on the GTD wagon. I can&#8217;t
prove that, because I don&#8217;t keep enough details, but I always feel
better and think clearer when I&#8217;m on GTD.</p>

<p>But, I&#8217;ve failed so many times&#8230; what kind of hubris makes me think
I&#8217;ll get it this time?
<a href="http://www.quotationspage.com/quote/36285.html">&#8220;Fall down seven times, get up eight.&#8221;</a>
Parenthood has taught this to me. Of course we don&#8217;t expect our kids
to learn each skill the first time they try. We expect that walking
and reading and writing and bike-riding will take time, multiple
efforts, and multiple failures. But eventually they will get it. Yet,
with each failure, kids get upset (to varying degrees). The answer at
that point is not to tell them to give up. Yet, that&#8217;s what I do to
myself. So, I&#8217;m going to treat myself like a kid and let myself fail,
understanding that each failure will get me closer to that one time
where I will succeed.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Writing paralysis]]></title>
    <link href="https://www.kurup.org/blog/2013/01/15/writing-paralysis"/>
    <updated>2013-01-15T14:45:09-05:00</updated>
    <id>https://www.kurup.org/blog/2013/01/15/writing-paralysis</id>
    <content type="html"><![CDATA[<p>I think twitter and facebook stunt my writing. The more that I read
tweets, the more self-conscious I get when I write. Not that my
writing is all that original, but I still feel that it is something
that comes from me. I worry so much about presenting ideas of others
as my own without even remembering that I had seen the ideas before.
In the old days, the things that I read were long form. Books,
articles, maybe blog posts. They each left an impression on me, maybe
good, maybe bad, but I had a sense where they were coming from. When I
wrote I could reliably say where the inspiration for my idea had come
from. Now with twitter, I see all these ideas and thoughts, some of
which are interesting, but few of which leave a lasting impression on
me. So now I have this fear that the things that I am considering my
own ideas are actually the ideas of others, improperly attributed. Of
course, that&#8217;s silly. No idea is original, but it&#8217;s just serious
enough to stifle my writing. Because, as a writer, I am the
scaredy-cat of all scaredy-cats and any criticism of my writing bites
deep to the heart. I also know that this is something that I just need
to get over. You cannot express ideas without inviting criticism.
I also don&#8217;t just want to let criticism fall off me. I want to learn
from critics. But saying all that doesn&#8217;t necessarily make it any
easier. Even writing this post, I feel like a fraud. I&#8217;ve said that
I&#8217;m a writer a couple times up there, but what evidence do I have to
support that claim? Most of my blog posts are so simple or technical
or repetitive. Nothing that would strike me as an &#8216;original idea&#8217;.
This whole post makes it seem like I am more important or better than
I really am.</p>

<p>What is my point with all this? I want to be able to write. I know
that there are people out there who could benefit from things in my
brain (maybe not a lot). I know that there are people out there who
can help me (in ways that I can&#8217;t even expect). So, I want to write
and I want it to be freely flowing and I don&#8217;t want to force myself to
feel that what I am writing is useful or authoritative or perfect. I
apologize to you, Vinod, my biggest critic. I know that you are
cringing inside because you&#8217;re thinking that anyone who reads this
will think that you are so full of yourself for even considering
yourself a writer. But, this is my first step in letting my guard down
to get this blog flowing. Because I do believe that writing is healthy
and will make me a better person.</p>

<p>In addition to committing to blogging more frequently, I&#8217;m also going
to try a twitter hiatus for a week and see what happens.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Steal My Web App Idea]]></title>
    <link href="https://www.kurup.org/blog/2013/01/09/steal-my-web-app-idea"/>
    <updated>2013-01-09T22:00:01-05:00</updated>
    <id>https://www.kurup.org/blog/2013/01/09/steal-my-web-app-idea</id>
    <content type="html"><![CDATA[<p>Now that we have 3 kids, I&#8217;m always internally comparing one to the
other. Sure that&#8217;s not healthy and will probably breed resentment in
them during their teenage years, but what&#8217;s a bad parent to do?</p>

<p>I need an app that takes 2 kids&#8217; birthdays and then shows me what day
it was when the older kid was the age that the younger kid is now.
Wow, that&#8217;s a confusing sentence. In simpler terms, if I have a
3-year-old and a 1-year-old, then the app would show me the day that
the 3-year-old was 1.</p>

<p>Then, I want the app to take that date and go through all of my
personal files (photos, notes, twitter stream, facebook stream, etc.)
and show me what was happening in our life around that day.</p>

<p>In short, it would show a snapshot of what our life was like when the
older kid was the age that the younger kid is now. I&#8217;d call it
WhenIWasYourAge or something catchy like that.</p>

<p>Seems simple enough to build, but I don&#8217;t see myself getting to it
anytime soon. Smart people say to set your ideas free and if they love
you they&#8217;ll come back. (Wait, I think I&#8217;m mixing metaphors here).</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[How to change the rear tire on a 12 inch bicycle]]></title>
    <link href="https://www.kurup.org/blog/2012/12/30/how-to-change-the-rear-tire-on-a-12-inch-bicycle"/>
    <updated>2012-12-30T15:00:40-05:00</updated>
    <id>https://www.kurup.org/blog/2012/12/30/how-to-change-the-rear-tire-on-a-12-inch-bicycle</id>
    <content type="html"><![CDATA[<p>I&#8217;m not the handiest guy in the world, so I&#8217;m pretty proud that I was
able to fix a flat tire on Kavi&#8217;s 12&#8221; bicycle.</p>

<p>DISCLAIMER: I have almost no idea what I&#8217;m doing. Follow my
instructions at your peril.</p>

<p>I&#8217;ve fixed flats before, but it&#8217;s been a long time. Fixing it on such
a tiny bike was a lot harder than I thought. The manual makes it seem
so simple. &#8220;Remove the wheel, take the tube out, patch the tube and
then replace the tube and tire.&#8221; Right&#8230; I got stuck at step 1.
Removing the wheel isn&#8217;t straightforward. Most of the videos available
online focus on adult-sized bikes which have quick-release tires. You
pull a release lever back and then pull the tire off. Kids bikes have
bolts instead of quick-release levers. You have to loosen the bolts,
but you don&#8217;t have to take the bolts completely off. You also have to
take off the plastic chain guard that prevents kids from rubbing their
legs against the chain. Finally, there&#8217;s this little metal piece that
attaches the wheel to the frame. I think it&#8217;s there for the
pedal-brake to work. In any case, you have to take that off. Once the
wheel is loosened, you have to unhook the wheel from the chain. This
is also easier in big bikes which have multiple gears, making it
possible to place the chain in a position to easily get it off the
wheel. In a kid&#8217;s bike, it&#8217;s harder. Once I loosened the bolts on both
sides of the wheel, I pushed the wheel a little forward, which
loosened the chain and made it easy to release from the chain.</p>

<p>The next difficulty was getting the tube out of the tire. All the
videos make this seem so easy. Place a tire lever in the tire to pull
it over the rim. Put another tire lever in and slide it around the rim
to get the rest of the tire out. Kavi&#8217;s tires are so tight that this
was impossible. I could get the first tire lever in, but when I put
the second tire lever in, it was completely immovable. There was no
way that I was going to be able to slide it anywhere. I finally found
a website where they recommended using a third tire lever. Put the
first two in a few inches apart. Then put the third one in another
inch away from the second one. Finally remove the middle one and move
it an inch past the third one. In this way, I was able to get the tire
off eventually.</p>

<p>I then got the tube out and found the leak. I placed a patch on it,
but when I reinflated the tire, the leaking air just pushed it&#8217;s way
through the patch. I tried roughing up the area with the roughing
tool, but that didn&#8217;t help. Finally, I resorted to the layman&#8217;s
favorite tool: duct tape. I placed the patch, then wrapped it with
duct tape. It&#8217;s held together for a few months now.</p>

<p>Hopefully Kavi will graduate to the next size bike before my handiwork
breaks down. On another note, Kavi was easily able to pick up the
basics of riding a bike by following the
<a href="http://www.rei.com/learn/expert-advice/teach-child-to-ride-a-bike.html">REI guide</a>.
I took off the training wheels and the pedals, which allowed him to
get the feeling of balancing the bike without having to keep his feet
on the pedals. Once he got that part, it was relatively easy for him
to balance with the pedals on. He also proved to be a much tougher kid
than I was. Everytime he fell, he got right back on.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[NSBrief gets the best guests]]></title>
    <link href="https://www.kurup.org/blog/2012/11/05/nsbrief-gets-the-best-guests"/>
    <updated>2012-11-05T10:38:09-05:00</updated>
    <id>https://www.kurup.org/blog/2012/11/05/nsbrief-gets-the-best-guests</id>
    <content type="html"><![CDATA[<p>I&#8217;m not an OS X programmer, but I&#8217;ve really enjoyed 2 recent episodes
of the <a href="http://nsbrief.com/">NSBrief</a> podcast. First was <a href="http://nsbrief.com/59-mark-dalrymple">Mark
Dalrymple&#8217;s interview</a>. Here was
my 140 character description:</p>

<blockquote class="twitter-tweet"><p>So much geeky fun in @<a href="https://twitter.com/borkware">borkware</a>&#8217;s interview. AOLserver, dtrace, OpenDoc, MPW, need I go on? <a href="http://t.co/JWPPvfaa" title="http://nsbrief.com/59-mark-dalrymple">nsbrief.com/59-mark-dalrym…</a></p>&mdash; Vinod Kurup (@vkurup) <a href="https://twitter.com/vkurup/status/235907385997262848" data-datetime="2012-08-16T01:14:38+00:00">August 16, 2012</a></blockquote>


<script src="https://www.kurup.org//platform.twitter.com/widgets.js" charset="utf-8"></script>


<p>Today, I listened to
<a href="http://nsbrief.com/62-mark-aufflick">Mark Aufflick&#8217;s interview</a> where
he talks eloquently about starting your own business. I love the
perspective he had on his first business and how shutting it down gave
him the necessary (though painful) experience to make his current
business work. He also talked about the importance of computing
history especially given the availability of interesting subjects. He
ended with great advice on the importance of professionalism.
Paraphrased: &#8220;Make sure your team is the most professional side of any
relationship.&#8221;</p>

<p>I know <a href="http://borkware.com">Mark</a> and
<a href="http://mark.aufflick.com/">Mark</a> from the
<a href="http://openacs.org">OpenACS</a> glory days and it&#8217;s great to hear how
well they&#8217;re doing. Computing history was a prominent part of both
talks. I think this is important. Old ideas are always new again. Some
of the ideas that these pioneers had were only limited by the
horsepower we had to work with at the time. Now thanks to Moore&#8217;s law,
those limitations are gone, so we should re-investigate those ideas.
Or maybe we&#8217;re all just getting old and like to talk about the
good-old-days. :-) It&#8217;s nice to see that they both mentioned the
OpenACS period of their programming lives as important. It certainly
was for me. It was also great to hear Mark Aufflick&#8217;s voice for the
first time, even though I feel like he&#8217;s been a friend for many years.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Emacs for Python Programming]]></title>
    <link href="https://www.kurup.org/blog/2012/10/24/emacs-for-python-programming"/>
    <updated>2012-10-24T16:45:49-04:00</updated>
    <id>https://www.kurup.org/blog/2012/10/24/emacs-for-python-programming</id>
    <content type="html"><![CDATA[<p>(Note: See the bottom of this post for updates)</p>

<p>I was honored to to give my
<a href="https://speakerdeck.com/vkurup/emacs-for-python-programming">&#8220;Emacs for Python Programming&#8221;</a>
talk at the inaugural <a href="http://pycarolinas.org">PyCarolinas</a>
conference. The conference was a huge success in every way, thanks to
the efforts of <a href="http://www.ironfroggy.com/">Calvin Spealman</a>, et. al.
I promised that I would post my Emacs setup, so here it is.</p>

<h2>Step 0: Prerequisites</h2>

<p>This may work with other setups, but here&#8217;s what I tested:</p>

<ul>
<li>Linux</li>
<li>Emacs version 24</li>
<li>python 2.7 or 3.3</li>
<li><a href="http://pypi.python.org/pypi/pip">pip</a></li>
<li><a href="http://www.virtualenv.org/">virtualenv</a></li>
<li><a href="http://virtualenvwrapper.readthedocs.org/">virtualenvwrapper</a></li>
<li>git</li>
</ul>


<h2>Step 1: Clear out any previous customization</h2>

<p>As evidenced by the numerous blog posts documenting how to set this
up, it&#8217;s not straightforward. I recommend starting from scratch to
make sure everything is set up properly. Once you have it working,
then you can customize it. Make sure to start these commands in your
home directory.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>vinod:~<span class="nv">$ </span>mkdir old-emacs
</span><span class='line'>vinod:~<span class="nv">$ </span>mv .emacs .emacs.d old-emacs/
</span></code></pre></td></tr></table></div></figure>


<h2>Step 2: Set up initial Emacs configuration</h2>

<p>Create an empty <code>.emacs.d</code> directory and a subdirectory named with your
username. My username is <code>vinod</code>, so we&#8217;ll create a directory
structure called <code>.emacs.d/vinod/</code>. The emacs-starter-kit tells emacs
to automatically load any elisp files from that special directory, so
you&#8217;ll always have a place to drop custom elisp files.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>vinod:~<span class="nv">$ </span>mkdir -p ~/.emacs.d/<span class="nv">$USER</span>
</span></code></pre></td></tr></table></div></figure>


<p>Create a file named <code>.emacs.d/init.el</code> with the following contents:</p>

<figure class='code'><figcaption><span>my-init.el</span><a href='https://gist.github.com/3948955'>link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
</pre></td><td class='code'><pre><code class='scm'><span class='line'><span class="p">(</span><span class="nf">require</span> <span class="ss">&#39;package</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">&#39;package-archives</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;marmalade&quot;</span> <span class="o">.</span> <span class="s">&quot;http://marmalade-repo.org/packages/&quot;</span><span class="p">))</span>
</span><span class='line'><span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">&#39;package-archives</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;melpa&quot;</span> <span class="o">.</span> <span class="s">&quot;http://melpa.milkbox.net/packages/&quot;</span><span class="p">))</span>
</span><span class='line'><span class="p">(</span><span class="nf">package-initialize</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="nf">when</span> <span class="p">(</span><span class="nb">not </span><span class="nv">package-archive-contents</span><span class="p">)</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">package-refresh-contents</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="nf">defvar</span> <span class="nv">my-packages</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">starter-kit</span>
</span><span class='line'>                      <span class="nv">starter-kit-bindings</span>
</span><span class='line'>                      <span class="nv">starter-kit-js</span>
</span><span class='line'>                      <span class="nv">autopair</span>
</span><span class='line'>                      <span class="nv">yasnippet</span>
</span><span class='line'>                      <span class="nv">auto-complete</span>
</span><span class='line'>                      <span class="nv">fuzzy</span><span class="p">)</span>
</span><span class='line'>  <span class="s">&quot;A list of packages to ensure are installed at launch.&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="nf">dolist</span> <span class="p">(</span><span class="nf">p</span> <span class="nv">my-packages</span><span class="p">)</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">when</span> <span class="p">(</span><span class="nb">not </span><span class="p">(</span><span class="nf">package-installed-p</span> <span class="nv">p</span><span class="p">))</span>
</span><span class='line'>    <span class="p">(</span><span class="nf">package-install</span> <span class="nv">p</span><span class="p">)))</span>
</span><span class='line'>
</span><span class='line'><span class="c1">;; autopair and yas in all modes</span>
</span><span class='line'><span class="p">(</span><span class="nf">autopair-global-mode</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="nf">yas-global-mode</span> <span class="mi">1</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1">;; autocomplete</span>
</span><span class='line'><span class="p">(</span><span class="nf">require</span> <span class="ss">&#39;auto-complete-config</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="nf">setq</span> <span class="nv">ac-dictionary-files</span> <span class="p">(</span><span class="nb">list </span><span class="p">(</span><span class="nf">concat</span> <span class="nv">user-emacs-directory</span> <span class="s">&quot;.dict&quot;</span><span class="p">)))</span>
</span><span class='line'><span class="p">(</span><span class="nf">ac-config-default</span><span class="p">)</span>
</span><span class='line'><span class="c1">;; hack to fix ac-sources after pycomplete.el breaks it</span>
</span><span class='line'><span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;python-mode-hook</span>
</span><span class='line'>          <span class="o">&#39;</span><span class="p">(</span><span class="k">lambda </span><span class="p">()</span>
</span><span class='line'>             <span class="p">(</span><span class="nf">setq</span> <span class="nv">ac-sources</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">ac-source-pycomplete</span>
</span><span class='line'>                                <span class="nv">ac-source-abbrev</span>
</span><span class='line'>                                <span class="nv">ac-source-dictionary</span>
</span><span class='line'>                                <span class="nv">ac-source-words-in-same-mode-buffers</span><span class="p">))))</span>
</span><span class='line'>
</span><span class='line'><span class="c1">;; Set up python-mode</span>
</span><span class='line'><span class="p">(</span><span class="nf">setq</span> <span class="nv">py-install-directory</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">esk-user-dir</span> <span class="s">&quot;/python-mode.el-6.0.12/&quot;</span><span class="p">))</span>
</span><span class='line'><span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">&#39;load-path</span> <span class="nv">py-install-directory</span><span class="p">)</span>
</span><span class='line'><span class="c1">;; this will show method signatures while typing</span>
</span><span class='line'><span class="p">(</span><span class="nf">setq</span> <span class="nv">py-set-complete-keymap-p</span> <span class="nv">t</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="nf">require</span> <span class="ss">&#39;python-mode</span><span class="p">)</span>
</span><span class='line'><span class="c1">;; activate the virtualenv where Pymacs is located</span>
</span><span class='line'><span class="p">(</span><span class="nf">virtualenv-workon</span> <span class="s">&quot;default/&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="nf">defun</span> <span class="nv">load-pycomplete</span> <span class="p">()</span>
</span><span class='line'>  <span class="s">&quot;Load and initialize pycomplete.&quot;</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">interactive</span><span class="p">)</span>
</span><span class='line'>  <span class="p">(</span><span class="k">let* </span><span class="p">((</span><span class="nf">pyshell</span> <span class="p">(</span><span class="nf">py-choose-shell</span><span class="p">))</span>
</span><span class='line'>         <span class="p">(</span><span class="nf">path</span> <span class="p">(</span><span class="nf">getenv</span> <span class="s">&quot;PYTHONPATH&quot;</span><span class="p">)))</span>
</span><span class='line'>    <span class="p">(</span><span class="nf">setenv</span> <span class="s">&quot;PYTHONPATH&quot;</span> <span class="p">(</span><span class="nf">concat</span>
</span><span class='line'>                          <span class="p">(</span><span class="nf">expand-file-name</span> <span class="nv">py-install-directory</span><span class="p">)</span> <span class="s">&quot;completion&quot;</span>
</span><span class='line'>                          <span class="p">(</span><span class="k">if </span><span class="nv">path</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">path-separator</span> <span class="nv">path</span><span class="p">))))</span>
</span><span class='line'>    <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nf">py-install-directory-check</span><span class="p">)</span>
</span><span class='line'>        <span class="p">(</span><span class="nf">progn</span>
</span><span class='line'>          <span class="p">(</span><span class="nf">setenv</span> <span class="s">&quot;PYMACS_PYTHON&quot;</span> <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nf">string-match</span> <span class="s">&quot;IP&quot;</span> <span class="nv">pyshell</span><span class="p">)</span>
</span><span class='line'>                                      <span class="s">&quot;python&quot;</span>
</span><span class='line'>                                    <span class="nv">pyshell</span><span class="p">))</span>
</span><span class='line'>          <span class="p">(</span><span class="nf">autoload</span> <span class="ss">&#39;pymacs-apply</span> <span class="s">&quot;pymacs&quot;</span><span class="p">)</span>
</span><span class='line'>          <span class="p">(</span><span class="nf">autoload</span> <span class="ss">&#39;pymacs-call</span> <span class="s">&quot;pymacs&quot;</span><span class="p">)</span>
</span><span class='line'>          <span class="p">(</span><span class="nf">autoload</span> <span class="ss">&#39;pymacs-eval</span> <span class="s">&quot;pymacs&quot;</span><span class="p">)</span>
</span><span class='line'>          <span class="p">(</span><span class="nf">autoload</span> <span class="ss">&#39;pymacs-exec</span> <span class="s">&quot;pymacs&quot;</span><span class="p">)</span>
</span><span class='line'>          <span class="p">(</span><span class="nf">autoload</span> <span class="ss">&#39;pymacs-load</span> <span class="s">&quot;pymacs&quot;</span><span class="p">)</span>
</span><span class='line'>          <span class="p">(</span><span class="nb">load </span><span class="p">(</span><span class="nf">concat</span> <span class="nv">py-install-directory</span> <span class="s">&quot;completion/pycomplete.el&quot;</span><span class="p">)</span> <span class="nv">nil</span> <span class="nv">t</span><span class="p">)</span>
</span><span class='line'>          <span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;python-mode-hook</span> <span class="ss">&#39;py-complete-initialize</span><span class="p">))</span>
</span><span class='line'>      <span class="p">(</span><span class="nf">error</span> <span class="s">&quot;`py-install-directory&#39; not set, see INSTALL&quot;</span><span class="p">))))</span>
</span><span class='line'><span class="p">(</span><span class="nf">eval-after-load</span> <span class="ss">&#39;pymacs</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">load-pycomplete</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="c1">;; pyflakes flymake integration</span>
</span><span class='line'><span class="c1">;; http://stackoverflow.com/a/1257306/347942</span>
</span><span class='line'><span class="p">(</span><span class="nf">when</span> <span class="p">(</span><span class="nb">load </span><span class="s">&quot;flymake&quot;</span> <span class="nv">t</span><span class="p">)</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">defun</span> <span class="nv">flymake-pyflakes-init</span> <span class="p">()</span>
</span><span class='line'>    <span class="p">(</span><span class="k">let* </span><span class="p">((</span><span class="nf">temp-file</span> <span class="p">(</span><span class="nf">flymake-init-create-temp-buffer-copy</span>
</span><span class='line'>                       <span class="ss">&#39;flymake-create-temp-inplace</span><span class="p">))</span>
</span><span class='line'>           <span class="p">(</span><span class="nf">local-file</span> <span class="p">(</span><span class="nf">file-relative-name</span>
</span><span class='line'>                        <span class="nv">temp-file</span>
</span><span class='line'>                        <span class="p">(</span><span class="nf">file-name-directory</span> <span class="nv">buffer-file-name</span><span class="p">))))</span>
</span><span class='line'>      <span class="p">(</span><span class="nb">list </span><span class="s">&quot;pycheckers&quot;</span> <span class="p">(</span><span class="nb">list </span><span class="nv">local-file</span><span class="p">))))</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">&#39;flymake-allowed-file-name-masks</span>
</span><span class='line'>               <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;\\.py\\&#39;&quot;</span> <span class="nv">flymake-pyflakes-init</span><span class="p">)))</span>
</span><span class='line'><span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;python-mode-hook</span> <span class="ss">&#39;flymake-mode</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1">;; menu bar is useful when getting started</span>
</span><span class='line'><span class="p">(</span><span class="nf">menu-bar-mode</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="nf">setq-default</span> <span class="nv">default-tab-width</span> <span class="mi">4</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Step 3: Create a python virtualenv</h2>

<p>We&#8217;ll keep all the python-side customization in a virtualenv named
<code>default</code>. It&#8217;s important that the name you choose is the same as the
name in the <code>(virtualenv-workon)</code> command in line 45 of Step 2.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>vinod:~<span class="nv">$ </span>mkvirtualenv -p python2 default
</span></code></pre></td></tr></table></div></figure>


<p>After it does its thing, your shell prompt should change, indicating
that your new virtualenv is activated</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">(</span>default<span class="o">)</span>vinod:~<span class="err">$</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Step 4: Install Pymacs</h2>

<p><a href="http://pymacs.progiciels-bpi.ca/index.html">Pymacs</a> is a really cool
piece of software that sets up a 2 way communication between Emacs and
Python, allowing you to control Emacs with python commands rather than
elisp commands. It requires a python piece (<code>Pymacs.py</code>) and an Emacs
piece (<code>pymacs.el</code>). Unfortunately, they&#8217;re not installable via <code>pip</code>
or <code>package.el</code>, but installation is easy enough.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">(</span>default<span class="o">)</span>vinod:~<span class="nv">$ </span>mkdir src
</span><span class='line'><span class="o">(</span>default<span class="o">)</span>vinod:~/src<span class="nv">$ </span><span class="nb">cd </span>src
</span><span class='line'><span class="o">(</span>default<span class="o">)</span>vinod:~/src<span class="nv">$ </span>git clone git://github.com/pinard/Pymacs.git
</span><span class='line'><span class="o">(</span>default<span class="o">)</span>vinod:~/src<span class="nv">$ </span><span class="nb">cd </span>Pymacs
</span><span class='line'>
</span><span class='line'><span class="c"># check to make sure tests pass</span>
</span><span class='line'><span class="o">(</span>default<span class="o">)</span>vinod:~/src/Pymacs<span class="nv">$ </span>make check
</span><span class='line'>
</span><span class='line'><span class="c"># install it (Be sure you&#39;re inside your virtualenv!)</span>
</span><span class='line'><span class="o">(</span>default<span class="o">)</span>vinod:~/src/Pymacs<span class="nv">$ </span>make install
</span><span class='line'>
</span><span class='line'><span class="c"># install the emacs extension</span>
</span><span class='line'><span class="o">(</span>default<span class="o">)</span>vinod:~/src/Pymacs<span class="nv">$ </span>cp pymacs.el ~/.emacs.d/<span class="nv">$USER</span>/
</span></code></pre></td></tr></table></div></figure>


<h2>Step 5: Install other python packages</h2>

<p>These helper packages are easier to install:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">(</span>default<span class="o">)</span>vinod:~<span class="nv">$ </span>pip install pyflakes pep8
</span></code></pre></td></tr></table></div></figure>


<p>The pyflakes and pep8 packages check your code as you type using
Emacs&#8217; flymake mode. Now, deactivate your virtualenv.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">(</span>default<span class="o">)</span>vinod:~<span class="nv">$ </span>deactivate
</span><span class='line'>vinod:~<span class="err">$</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Step 6: Install pycheckers</h2>

<p>Flymake is the part of Emacs that checks your code for errors on the
fly. It calls a shell script called <code>pycheckers</code>, so you need to have
a script by that name in your shell&#8217;s <code>PATH</code>. Here&#8217;s mine
(<code>~/bin/pycheckers</code>):</p>

<figure class='code'><figcaption><span>pycheckers.sh</span><a href='https://gist.github.com/3948973'>link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'>
</span><span class='line'>pyflakes <span class="s2">&quot;$1&quot;</span>
</span><span class='line'>pep8 --repeat <span class="s2">&quot;$1&quot;</span>
</span><span class='line'><span class="nb">true</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Step 7: Install python-mode.el</h2>

<p>As I mentioned in my talk, there are multiple Python modes available,
but I recommend using the one named python-mode.el, which is developed
at
<a href="http://launchpad.net/python-mode">http://launchpad.net/python-mode</a>.
It does periodically get uploaded to
<a href="http://marmalade-repo.org/packages/python-mode">Marmalade</a>, but the
auto-completion using pycomplete doesn&#8217;t work well on the version that
is there now (6.0.10), so I recommend that you manually download and
install the latest stable version (6.0.12). I&#8217;ll update this post once
a stable working version gets uploaded to
<a href="http://marmalade-repo.org/">Marmalade</a> or
<a href="http://melpa.milkbox.net/">Melpa</a>.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>vinod:~<span class="nv">$ </span><span class="nb">cd</span> ~/.emacs.d/<span class="nv">$USER</span>
</span><span class='line'>vinod:~/.emacs.d/vinod<span class="nv">$ </span>curl -L https://launchpad.net/python-mode/trunk/6.0.12/+download/python-mode.el-6.0.12.tar.gz | tar xz
</span></code></pre></td></tr></table></div></figure>


<h2>Step 8: Test it all out</h2>

<p>Launch emacs and open a python file named <code>test.py</code>. Type the following:</p>

<pre><code>import os
os.path.jo
</code></pre>

<p>Wait at this point. You should see auto-completion of <code>os.path.join</code>
followed shortly by a yellow popup showing documentation of that method.
Hitting return should accept the completion. Then type <code>(</code> and you
should see the method signature in the minibuffer.</p>

<p>Move the cursor over any letter in <code>join</code>. Hit &#8216;F1&#8217;. A window should
popup with the docstring for <code>os.path.join</code>. Hit &#8216;F2&#8217;. A new window
should be opened with the code for <code>os.path.join</code>. Hit &#8216;F3&#8217;. You&#8217;ll be
prompted to enter the name of any python command, and Emacs will show
you the docstring.</p>

<p>Type the string &#8216;blah&#8217; and hit return. The string should be
highlighted in pink and if you mouseover it, the minibuffer will say
<code>undefined name 'blah'</code>. That&#8217;s flymake working for you.</p>

<p>Hit <code>C-c C-c</code> and the buffer should be sent to a Python interpreter and
you&#8217;ll be dropped in the REPL after the code has been loaded. Any
errors in the code will be reported.</p>

<p>If all of this works, then CONGRATULATIONS!!! If not, let me know and
I&#8217;ll see if I can help debug.</p>

<h2>Step 9: Customize</h2>

<p>All of this is customizable in hundreds of ways. Try <code>M-x
customize-group RET python-mode RET</code> to see how.</p>

<h2>Step 10: How to create a new python project</h2>

<p>Whenever you want to create a new Python project, you have do the
following:</p>

<h3>Create a new virtualenv</h3>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>vinod:~<span class="nv">$ </span>mkvirtualenv newproject
</span></code></pre></td></tr></table></div></figure>


<h3>Install pymacs into that virtualenv</h3>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">(</span>newproject<span class="o">)</span>vinod:~<span class="nv">$ </span><span class="nb">cd</span> ~/src/Pymacs
</span><span class='line'><span class="o">(</span>newproject<span class="o">)</span>vinod:~/src/Pymacs<span class="nv">$ </span>make install
</span></code></pre></td></tr></table></div></figure>


<h3>Install the other pip modules</h3>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">(</span>newproject<span class="o">)</span>vinod:~/src/Pymacs<span class="nv">$ </span>pip install pyflakes pep8
</span></code></pre></td></tr></table></div></figure>


<h3>Switch to that virtualenv in emacs</h3>

<pre><code>M-x virtualenv-workon RET newproject/ RET
</code></pre>

<h2>Issues</h2>

<h3>Changing virtualenvs doesn&#8217;t restart Pymacs</h3>

<p>For the most part, this won&#8217;t affect much, but if you move from a
Python2 project to a Python3 project, you may have problems. The
workaround is to call <code>M-x pymacs-terminate-services</code>, then <code>M-x
virtualenv-workon</code> to change your virtualenv, and then finally
<code>M-x load-pycomplete</code> to restart pymacs and pycomplete.</p>

<h3>Latest stable version of python-mode.el isn&#8217;t on Melpa</h3>

<p>I&#8217;d much prefer to just load python-mode using the built-in Emacs
package manager.</p>

<h3>Pymacs installation is harder than it needs to be</h3>

<p>I wish Pymacs could be installed by a 2 step process</p>

<ol>
<li>pip install Pymacs</li>
<li>M-x package-install RET pymacs RET</li>
</ol>


<h3>Which pycheckers to use?</h3>

<p>My script uses pep8 and pyflakes. There are a lot of other options out
there and I do not know which is best. See
<a href="http://stackoverflow.com/questions/1428872/pylint-pychecker-or-pyflakes">this post</a>
for more details.</p>

<h3>Not using ropemacs any more</h3>

<p>In my talk, I used ropemacs. In this setup, I have decided against it.
I was mostly using it for code-completion and documentation lookup,
but I like pycomplete.el better for those purposes. It&#8217;s included in
python-mode and it shows method signatures as you type. Ropemacs does
have other features such as project management (easily jumping to
files in the same project), and refactoring (changing variable names
throughout project). I haven&#8217;t used those, so I decided not to install
ropemacs.</p>

<h3>Project management not included</h3>

<p>I haven&#8217;t yet decided which package to use for this. I&#8217;ll probably try
projectile, but there are many other options, some lightweight
(ropemacs, eproject, pony-mode) and some heavyweight (ecb, CEDET).</p>

<h2>References</h2>

<p>I gleaned knowledge from all of the following, in no particular order.</p>

<ul>
<li><a href="http://slacy.com/blog/2011/03/pymacs-ropemacs-and-virtualenv-all-at-the-same-time/">Using Pymacs and virtualenv together (slacy.com)</a></li>
<li><a href="http://www.yilmazhuseyin.com/blog/dev/emacs-setup-python-development/">Using Ropemacs for autocompletion (yilmazhuseyin.com)</a></li>
<li><a href="http://stackoverflow.com/questions/2855378/ropemacs-usage-tutorial/2858148#2858148">How to use Rope to automatically change virtualenv for you</a></li>
<li><a href="http://almostobsolete.net/rope-and-virtualenv.html">Ropemacs and virtualenv (almostobsolete.net)</a></li>
<li><a href="http://www.rwdev.eu/articles/emacspyeng">The post that turned me on to pycomplete.el (rwdev.eu)</a></li>
<li><a href="http://hide1713.wordpress.com/2009/01/30/setup-perfect-python-environment-in-emacs/">Perfect Python Environment (2009)</a></li>
<li><a href="http://www.masteringemacs.org/articles/2010/10/04/beginners-guide-to-emacs/">Lot&#8217;s of great &#8216;advanced-beginner&#8217; emacs tips</a></li>
<li><a href="http://blog.cou929.nu/setting-up-python-environment-on-emacs">Using python.el rather than python-mode.el</a></li>
<li><a href="http://pedrokroger.net/2010/07/configuring-emacs-as-a-python-ide-2/">Using IPython, pylookup and more (pedrokroger.net)</a> - I need to look into this post some more.</li>
<li><a href="http://emacswiki.org/emacs/PythonProgrammingInEmacs">EmacsWiki Python Page</a></li>
<li><a href="http://www.saltycrane.com/blog/2010/05/my-emacs-python-environment/">Python.el, ropemacs, and a little django tip at the end</a></li>
<li><a href="https://github.com/aculich/virtualenv.el">Virtualenv.el (something similar is included in python-mode.el</a></li>
<li><a href="https://github.com/pdee/pdee">Python Development Environment</a> -
Looks promising, just wish there was some documentation on how to
use it.</li>
<li><a href="http://borkware.com/rants/emacs-dev/">Emacs for Cocoa Development</a> - OK, not at all related to python, but some great insight from an Emacs (and all-around) wizard. Don&#8217;t miss the ranting at the end of the page.</li>
<li><a href="http://jesselegg.com/archives/2010/02/25/emacs-python-programmers-part-1/">Python.el basics</a></li>
<li><a href="http://sunnyeves.blogspot.com/2011/04/debugging-python-on-emacs-ide.html">Using PDB in Emacs</a></li>
<li><a href="https://github.com/EnigmaCurry/emacs">Ryan McGuire&#8217;s .emacs.d</a></li>
<li><a href="http://www.enigmacurry.com/2009/01/21/autocompleteel-python-code-completion-in-emacs/">AutoComplete for Python (enigmacurry.com)</a></li>
<li><a href="http://www.enigmacurry.com/2008/05/09/emacs-as-a-powerful-python-ide/">The original Python IDE post (enigmacurry.com)</a></li>
</ul>


<h2>Updates</h2>

<h4>2012-10-27</h4>

<p>Thanks to <a href="https://twitter.com/danpoirier">@danpoirier</a> and
<a href="http://twitter.com/gregnewman">@gregnewman</a> for testing. I initially
recommended using the master branch of python-mode.el, but now I
recommend using the latest stable release (as of now) which is version
6.0.12 to avoid problems loading Pymacs. There&#8217;s a bug on 6.0.12 with
<code>virtualenv-workon</code> that requires you to put a trailing slash after
the name of your virtualenv, so I&#8217;ve updated the <code>init.el</code> file above
to account for those changes.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Emacs Autocomplete stumbles on yasnippet]]></title>
    <link href="https://www.kurup.org/blog/2012/10/15/emacs-autocomplete-stumbles-on-yasnippet"/>
    <updated>2012-10-15T13:02:18-04:00</updated>
    <id>https://www.kurup.org/blog/2012/10/15/emacs-autocomplete-stumbles-on-yasnippet</id>
    <content type="html"><![CDATA[<p><a href="http://cx4a.org/software/auto-complete/">Autocomplete Mode</a> is an
Emacs mode that tries to guess what word you&#8217;re typing and provide
auto-completion. Recently, it started failing in simple scenarios.</p>

<p>It can use various &#8216;sources&#8217; to try to figure out what you&#8217;re about to
type. The simplest source is <code>ac-source-dictionary</code> which is a simple
list of words. If you start typing any of those words, it will try to
autocomplete them for you. Normally, you&#8217;d put those words in a file,
with each word on a separate line, but for testing purposes, you can
also add them manually using an elisp function. Here&#8217;s the test that
failed for me:</p>

<pre><code>(add-to-list 'ac-user-dictionary "foobar@example.com")
</code></pre>

<p>That adds the email address to the dictionary. Then, typing &#8216;foo&#8217; in
any buffer, should offer to autocomplete the entire email address.
Unfortunately, it wasn&#8217;t working.</p>

<p>To debug, I typed &#8216;foo&#8217; and then did <code>M-x auto-complete</code>, which forces
auto-complete to look for a completion. This resulted in an error in
the Minibuffer:</p>

<pre><code>ac-yasnippet-candidates: Symbol's function definition is void: yas/current-snippet-table
</code></pre>

<p>This led me to check which &#8216;sources&#8217; autocomplete was trying to use:
<code>C-h v ac-sources</code></p>

<pre><code>(ac-source-features ac-source-functions ac-source-yasnippet
 ac-source-variables ac-source-symbols ac-source-abbrev
 ac-source-dictionary ac-source-words-in-same-mode-buffers)
</code></pre>

<p>So, autocomplete is looking through each one of those sources, trying
to find possible words I might be typing. The third one is called
<code>ac-source-yasnippet</code>, which seems to be where my error is coming
from.</p>

<p>So, I looked into the yasnippet source code and found that, indeed,
there was no function named <code>yas/current-snippet-table</code>. That function
has been renamed to <code>yas--get-snippets-table</code> in version 0.8.0, but
autocomplete is still relying on the old function name. (RANT: Don&#8217;t
rename functions that others might be using without providing some
kind of alias, at least temporarily) I looked at the code for
<a href="https://github.com/auto-complete/auto-complete">autosnippet on github</a>
and noted that the latest version has been fixed to use the new code,
but it hasn&#8217;t yet been released on MELPA. Until it is, the quick
solution is to remove <code>ac-source-yasnippet</code> from <code>ac-sources</code>.</p>

<pre><code>(delq 'ac-source-yasnippet ac-sources)
</code></pre>

<p>Then typing &#8216;foo&#8217; autocompletes to &#8216;foobar@example.com&#8217;.</p>

<p>It seems that autocomplete should be more forgiving of errors in any
specific &#8216;source&#8217;, passing it up to use other sources. Alternatively,
it should fail loudly when there&#8217;s an error, so that I can know to fix
or remove the offending &#8216;source&#8217;.</p>
]]></content>
  </entry>
  
</feed>
