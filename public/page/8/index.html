<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    
    <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">

    
    
    
    <link href="//fonts.googleapis.com/css?family=Quattrocento:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Quattrocento+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
    
    

    
    <title>Vinod Kurup</title>

    
    
    <link rel="stylesheet" href="/css/hugo-octopress.css">

    
    

    
    <link rel="stylesheet" href="/css/fork-awesome.min.css">
    

    
    <link href="https://kurup.org/favicon.ico" rel="icon">

    
    <link href="/index.xml" rel="alternate" type="application/rss+xml" title="Vinod Kurup" />

    <meta name="description" content="Inside Vinod Kurup&#39;s brain" />
    <meta name="keywords" content="">
    <meta name="author" content="Vinod Kurup">

    
    <meta name="generator" content="Hugo 0.59.1" />

    
    

    
    
  </head>
  <body>

    
    <header role="banner">
<hgroup>
  
  <h1><a href="https://kurup.org/">Vinod Kurup</a></h1>
    <h2>Hospitalist/programmer in search of the meaning of life</h2>
</hgroup></header>

    
    <nav role="navigation">
<fieldset class="mobile-nav">
  
  <select onchange="location = this.value;">
    <option value="">Navigate…</option>
    
    <option value="https://kurup.org/">» Blog</option>
    
    <option value="https://kurup.org/about">» About Me</option>
    
    <option value="https://kurup.org/post">» Archives</option>
    
    <option value="https://kurup.org/categories">» Categories</option>
    
    <option value="https://kurup.org/medicine">» Medicine</option>
    
    <option value="https://kurup.org/running">» Running</option>
    
  </select>
</fieldset>


<ul class="main-navigation">
  
  
  
  <li><a href="https://kurup.org/" title="Blog">Blog</a></li>
  
  
  
  <li><a href="https://kurup.org/about" title="About Me" >About Me</a></li>
  
  
  
  <li><a href="https://kurup.org/post" title="Archives" >Archives</a></li>
  
  
  
  <li><a href="https://kurup.org/categories" title="Categories" >Categories</a></li>
  
  
  
  <li><a href="https://kurup.org/medicine" title="Medicine" >Medicine</a></li>
  
  
  
  <li><a href="https://kurup.org/running" title="Running" >Running</a></li>
  
  
</ul>

<ul class="subscription">
  
  
  <a href="https://kurup.org/index.xml" target="_blank" type="application/rss+xml" title="RSS"><i class="fa fa-rss fa-lg"></i></a>
  
  
</ul>


<form action="https://www.google.com/search" method="get" target="_blank">
  <fieldset role="search">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
    <input type="hidden" name="q" value="site:https://kurup.org/" />
  </fieldset>
</form>

</nav>




  

<div id="main">
  <div id="content">
    <div class="blog-index">
      
      
      <article>
        
        

<header>
  <p class="meta">Aug 6, 2010
     - 1 minute read 
     - <a href="https://kurup.org/blog/2010/08/06/primary-care-doctors/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="https://kurup.org/categories/medicine/">medicine </a><a class="label" href="https://kurup.org/categories/hospitalist/">hospitalist </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://kurup.org/blog/2010/08/06/primary-care-doctors/">Primary Care Doctors</a>
  </h1>
</header>

        
          <p>I used to be a primary care physician, but switched to being a hospitalist
in 2007. I loved parts about being a PCP, namely the relationship that I
developed with the patient over many years. I miss that. I think PCPs offer
huge value in providing low cost, quality care, especially if they can stay
engaged throughout the hospitalization process. Atul Gawande recently wrote
<a href="http://www.newyorker.com/reporting/2010/08/02/100802fa_fact_gawande?currentPage=all">a powerful article on the Hospice system</a>. It&rsquo;s
worth reading to being to understand the complex issues involved in
end-of-life care, not to mention for the emotional storytelling that is his
strength. But, to me, the unsung hero in that story was Chuck Morris, the
primary care physician, who came in at the proper moment and provided
perspective to the patient that he knew so well, allowing them to make the
sane, yet horribly difficult decision to pursue a palliative path. Reading
that made me miss primary care medicine a little. I perform much more
actual &ldquo;medical&rdquo; work as a hospitalist than I ever did as a PCP. But, when
I think of the concept of a <em>doctor</em>, in my head, I&rsquo;m thinking of a primary
care doc.</p>

        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Aug 5, 2010
     - 2 minute read 
     - <a href="https://kurup.org/blog/2010/08/05/maps-are-functions-too/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="https://kurup.org/categories/programming/">programming </a><a class="label" href="https://kurup.org/categories/clojure/">clojure </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://kurup.org/blog/2010/08/05/maps-are-functions-too/">Maps are functions, too</a>
  </h1>
</header>

        
          <p>Braindump time. Here&rsquo;s what I&rsquo;ve read about clojure in the past few days. I don&rsquo;t understand what this means yet, but maybe someday I will:</p>

<blockquote>
<p>Clojure provides easy access to the Java frameworks, with optional type hints and type inference, to ensure
that calls to Java can avoid reflection.</p>
</blockquote>

<p>There are multiple languages that target the JVM (besides Java, of
course). It seems that there are 2 classes of languages. Ported languages
such as JRuby and Jython aim to be identical to their base languages
(Ruby &amp; Python). Native languages such as Clojure and Groovy are meant to
target the JVM natively without satisfying any desire to be identical to
another language. Native languages have the advantage that they only have 1
set of libraries to use, so you don&rsquo;t get stuck between two languages.</p>

<p>I installed clojure 1.0 from the ubuntu repositories, but promptly
uninstalled it once I found
<a href="http://github.com/technomancy/leiningen">leiningen</a>. Leiningen is a build
tool for clojure. You can easily create a new project and specify its
dependencies and leiningen will download those dependencies, including a
full version of clojure for each project. You can have 1 project using
leiningen 1.0 and another using version 1.2 sitting right next to it. That
seems smart!</p>

<p>I installed <a href="http://www.assembla.com/wiki/show/clojure/Getting_Started_with_Emacs">clojure-mode on emacs</a>.</p>

<p>Right now, I&rsquo;m working my way through the
<a href="http://github.com/relevance/labrepl">labrepl</a> project. It&rsquo;s an interactive
tutorial and REPL (read-eval-print-loop) where you can run the examples in
the tutotial.</p>

<p>It&rsquo;s always important to know how to find help:</p>

<ul>
<li><code>(doc blah)</code> gives documentation about blah.</li>
<li><code>(find-doc &quot;blah&quot;)</code> searches for documentation.</li>
<li><code>(javadoc blah)</code> opens Java docs in your browser</li>
<li><code>(show java.util.Date)</code> shows method signatures</li>
</ul>

<p>Here&rsquo;s something cool: Maps are associative arrays. Here&rsquo;s a simple one:</p>

<pre><code>(def me {:first-name &quot;Vinod&quot;, :last-name &quot;Kurup&quot;})
</code></pre>

<p>To get the data, you use the <code>get</code> function, like you would in other languages:</p>

<pre><code>(get me :first-name) -&gt; &quot;Vinod&quot;
</code></pre>

<p>But, maps and keywords are functions as well, so you can do:</p>

<pre><code>(me :first-name) -&gt; &quot;Vinod&quot;
(:last-name me) -&gt; &quot;Kurup&quot;
</code></pre>

        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Aug 2, 2010
     - 2 minute read 
     - <a href="https://kurup.org/blog/2010/08/02/ubuntu-bluetooth-workaround/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="https://kurup.org/categories/linux/">linux </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://kurup.org/blog/2010/08/02/ubuntu-bluetooth-workaround/">Ubuntu Bluetooth Workaround</a>
  </h1>
</header>

        
          

<p>I use bluetooth to transfer podcasts from my laptop to my Palm Centro. A
Palm Centro is like an iPhone or a Droid, except less <strong>smart</strong>-like and
more <strong>phone</strong>-like. This worked beautifully but broke when I upgraded to
<a href="http://www.ubuntu.com/desktop/get-ubuntu/download">Ubuntu</a> 10.04 (Lucid
Lynx). There are 2 bugs involved. First, the bluetooth daemon
(<code>/usr/sbin/bluetoothd</code>) never gets started. Second, there&rsquo;s no easy way to
start the file transfer daemon automatically (<code>/usr/bin/dund</code>). This used
to work automatically, but now it doesn&rsquo;t. I&rsquo;ve tried to fiddle with <code>udev</code>
rules, but have been unsuccessful. I&rsquo;ve reported the 2 bugs, but haven&rsquo;t
had any response
yet. <a href="https://bugs.launchpad.net/ubuntu/+source/bluez/+bug/589464">(bluetoothd bug)</a>
<a href="https://bugs.launchpad.net/ubuntu/+source/bluez/+bug/559538">(dund bug)</a></p>

<p>My workaround is a shell script which starts those those daemons if they
are not running:</p>

<h4 id="vk-bluetooth-start-sh">vk-bluetooth-start.sh</h4>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#719e07">#!/bin/bash
</span><span style="color:#719e07"></span>    
<span style="color:#268bd2">BLUETOOTH</span><span style="color:#719e07">=</span><span style="color:#2aa198">&#39;bluetoothd&#39;</span>
<span style="color:#268bd2">DUN</span><span style="color:#719e07">=</span><span style="color:#2aa198">&#39;dund&#39;</span>
    
<span style="color:#586e75"># first start bluetoothd</span>
<span style="color:#719e07">if</span> ps ax | grep -v grep | grep <span style="color:#268bd2">$BLUETOOTH</span> &gt; /dev/null
<span style="color:#719e07">then</span>
    <span style="color:#b58900">echo</span> <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$BLUETOOTH</span><span style="color:#2aa198"> is running.&#34;</span>
<span style="color:#719e07">else</span>
    <span style="color:#b58900">echo</span> -n <span style="color:#2aa198">&#34;Starting </span><span style="color:#268bd2">$BLUETOOTH</span><span style="color:#2aa198">...&#34;</span>
    /usr/bin/sudo /usr/sbin/bluetoothd -u &amp;&gt; /dev/null
    <span style="color:#b58900">echo</span> <span style="color:#2aa198">&#34;done.&#34;</span>
<span style="color:#719e07">fi</span>
    
<span style="color:#586e75"># then start dund</span>
<span style="color:#719e07">if</span> ps ax | grep -v grep | grep <span style="color:#268bd2">$DUN</span> &gt; /dev/null
<span style="color:#719e07">then</span>
    <span style="color:#b58900">echo</span> <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$DUN</span><span style="color:#2aa198"> is running.&#34;</span>
<span style="color:#719e07">else</span>
    <span style="color:#b58900">echo</span> -n <span style="color:#2aa198">&#34;Starting </span><span style="color:#268bd2">$DUN</span><span style="color:#2aa198">...&#34;</span>
    /usr/bin/sudo /usr/bin/dund --listen --persist --msdun call centro
    <span style="color:#b58900">echo</span> <span style="color:#2aa198">&#34;done.&#34;</span>
<span style="color:#719e07">fi</span></code></pre></div>
<p>And here&rsquo;s my script which transfers the files to my phone. It uses
<a href="http://packages.ubuntu.com/lucid/pilot-link">pilot-link</a>, which I had to
compile from source due to a
<a href="https://bugs.launchpad.net/ubuntu/+source/pilot-link/+bug/592916">bug in the way that the Ubuntu version addresses large SD cards</a>. This
should be fixed in the next version of Ubuntu.</p>

<h4 id="vk-transfer-podcasts-sh">vk-transfer-podcasts.sh</h4>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#719e07">#!/bin/bash
</span><span style="color:#719e07"></span>    
<span style="color:#268bd2">output</span><span style="color:#719e07">=</span><span style="color:#719e07">$(</span>pilot-xfer -p net:any -D /Kingston/AUDIO -i *.mp3 <span style="color:#2aa198">2</span>&gt;&amp;<span style="color:#2aa198">1</span><span style="color:#719e07">)</span>
<span style="color:#268bd2">errors</span><span style="color:#719e07">=</span><span style="color:#719e07">$(</span><span style="color:#b58900">echo</span> <span style="color:#268bd2">$output</span> | grep -c <span style="color:#2aa198">&#34;ERROR:&#34;</span><span style="color:#719e07">)</span>
    
<span style="color:#719e07">if</span> <span style="color:#719e07">[</span> <span style="color:#268bd2">$errors</span> -gt <span style="color:#2aa198">0</span> <span style="color:#719e07">]</span> ; <span style="color:#719e07">then</span>
    <span style="color:#b58900">echo</span> <span style="color:#2aa198">&#34;failure (count: </span><span style="color:#268bd2">$errors</span><span style="color:#2aa198">)&#34;</span>
    <span style="color:#b58900">echo</span> <span style="color:#268bd2">$output</span>
<span style="color:#719e07">else</span>
    <span style="color:#b58900">echo</span> -n <span style="color:#2aa198">&#34;success, removing files from laptop...&#34;</span>
    /bin/rm -I <span style="color:#268bd2">$HOME</span>/*.mp3
    <span style="color:#b58900">echo</span> <span style="color:#2aa198">&#34;done.&#34;</span>
<span style="color:#719e07">fi</span></code></pre></div>
<p>If you&rsquo;re wondering why I use a slow protocol like bluetooth to transfer
large files to an SD card, rather than just ejecting the SD card and
inserting it into the laptop, well&hellip; you haven&rsquo;t tried to access the SD
card on a Palm Centro. #paininthe&amp;^@!</p>

        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Jul 29, 2010
     - 2 minute read 
     - <a href="https://kurup.org/blog/2010/07/29/hospitalist-notes-1/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="https://kurup.org/categories/medicine/">medicine </a><a class="label" href="https://kurup.org/categories/hospitalist/">hospitalist </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://kurup.org/blog/2010/07/29/hospitalist-notes-1/">Hospitalist Notes 1</a>
  </h1>
</header>

        
          

<p>My last night shift was a little less busy than most, so I forced myself to pick something about each patient I admitted and look it up. I tend to do this anyway, but I never keep notes or write about it. Here&rsquo;s what I wrote about that night:</p>

<h3 id="does-buspar-buspirone-need-to-be-tapered">Does Buspar (buspirone) need to be tapered?</h3>

<p>Answer: No. The full report on Micromedex was a little conflicting, because it stated that there may be some withdrawal symptoms from Buspar, but this quote in the same profile suggests otherwise:</p>

<blockquote>
<p>Data suggest that buspirone does not cause physical dependence and as such, no withdrawal effects have been noted (Rickels et al, 1988a; Tyrer et al, 1985; Cole et al, 1982).</p>
</blockquote>

<h3 id="staging-copd">Staging COPD</h3>

<p>I always forget the cutoffs for the stages of COPD. There are 2 different guidleines - GOLD and ATS/ARS, but fortunately they are almost identical:</p>

<p>Patients need to have an FEV1/FVC ratio &lt; 0.70. Staging is then based on the FEV1.</p>

<ul>
<li>Stage I (Mild): FEV1 &gt; 80% predicted</li>
<li>Stage II (Moderate): FEV1 50-80% predicted</li>
<li>Stage III (Severe): FEV1 30-50% predicted</li>
<li>Stage IV: (Very Severe): FEV1 &lt; 30% predicted, or &lt; 50% with signs of chronic respiratory failure</li>
</ul>

<p>Reference: <a href="http://www.annals.org/content/147/9/633/T2.expansion.html">Annals</a></p>

<h3 id="how-to-determine-calorie-level-of-ada-diet">How to determine calorie level of ADA diet?</h3>

<p>We always put diabetic patients on an ADA diet and I choose the calorie level by gestalt. I figured there must be some formula to calculate the calorie level based on the patient&rsquo;s weight. Looking it up, I found a different answer altogether. The ADA no longer recommends an ADA diet in the hospital. Instead, they recommend a consistent-carbohydrate diet. In long-term care facilities (i.e. nursing homes), they go a step further and recommend a &lsquo;Regular&rsquo; diet with consistency in the amount and timing of carbohydrate. They specifically state that there is no evidence to support the classic &lsquo;No concentrated sweets&rsquo; diet. These guidelines are from 2007, but they obviously have not been widely disseminated yet.</p>

<blockquote>
<p>It is recommended that the term “ADA diet” no longer be used, since the ADA no longer endorses a single nutrition prescription or percentages of macronutrients.</p>
</blockquote>

<p>Reference: <a href="http://care.diabetesjournals.org/content/30/suppl_1/S48.full">Diabetes Care</a></p>

        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Jul 27, 2010
     - 2 minute read 
     - <a href="https://kurup.org/blog/2010/07/27/my-anti-writing-cycle/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="https://kurup.org/categories/writing/">writing </a><a class="label" href="https://kurup.org/categories/clojure/">clojure </a><a class="label" href="https://kurup.org/categories/blog/">blog </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://kurup.org/blog/2010/07/27/my-anti-writing-cycle/">My Anti-Writing Cycle</a>
  </h1>
</header>

        
          <p>I blogged daily for a 6 day stretch a couple weeks ago, which is the
longest continuous stretch I&rsquo;ve ever done. It was stimulating and stressful
at the same time. I haven&rsquo;t heard from the Pulitzer committee about any of
the posts yet, but it&rsquo;s not the quality that matters. Writing is more about
the process than the product, and I know from experience that writing helps
me think. And while most of the posts were written for my own benefit, I
really enjoyed the response that I got from family and friends about
<a href="/blog/2010/07/15/playdoh">Playdoh</a>. I think I&rsquo;ve read that post 100 times
and I still laugh out loud at the end of it. That&rsquo;s the post that started
the stretch off. As soon as I had put Kavi to bed, I knew that I wanted to
share that story. I wrote it down quickly, so I wouldn&rsquo;t forget it. That
writing process stimulated me to want to write more, so I made it an
internal goal to write a post daily.</p>

<p>Then I had two night shifts and the streak was broken. I&rsquo;ve had a few days
off, but I still haven&rsquo;t written anything. I&rsquo;m still learning clojure, but
I fear writing about something that I know nothing about. Even though I&rsquo;ve
heard others say that this is the best time to write about a topic. I&rsquo;ve
also constructed a vicious cycle in my head. I want to learn clojure. I
want to write about what I learn. I start doing so, but then I skip a day
or so. Now, when I have free time, I think about learning clojure, but then
I also think about the fact that I should write about it. And since I&rsquo;m
already behind, I don&rsquo;t want to get further behind, so maybe I shouldn&rsquo;t
read that interesting tutorial until I&rsquo;ve caught up on writing about what
I&rsquo;ve learned. Next thing I know, I&rsquo;m monitoring Twitter streams
second-by-second for <a href="http://imgur.com">imgur</a> links.</p>

<p>I&rsquo;m hoping that writing about my mental blocks will help me overcome
them. I plan to write more frequently, mostly for my own benefit, but I&rsquo;m
not going to let it get in the way of learning cool, interesting stuff. If
my writing is disjointed, so be it. I can fill in the gaps later if anyone
cares.</p>

        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Jul 20, 2010
     - 3 minute read 
     - <a href="https://kurup.org/blog/2010/07/20/my-video-editing-process/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="https://kurup.org/categories/kino/">kino </a><a class="label" href="https://kurup.org/categories/linux/">linux </a><a class="label" href="https://kurup.org/categories/video/">video </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://kurup.org/blog/2010/07/20/my-video-editing-process/">My video editing process</a>
  </h1>
</header>

        
          <p>I use <a href="http://www.kinodv.org/">kino</a> to edit the
<a href="http://youtube.com/vkurup1">videos that we take of the kids</a>. I haven&rsquo;t
found a Linux program which was as nice as iMovie was on the Mac, but kino
is pretty good. It&rsquo;s easy to splice and reconnect video clips together. It
has nice special effects, though my needs are pretty simple. It&rsquo;s able to
export in plenty of formats, possibly too many, for my simple mind. But,
I&rsquo;ve figured it out and have a stable process for getting video from camera
to youtube.</p>

<p>I have 3 camcorders - a <a href="http://www.theflip.com/">Flip</a>, my Canon digital
camera, and a Panasonic DVD camcorder. I can just copy the AVI files
directly off the Flip and the Canon&rsquo;s SD card. The Panasonic records all of
the video clips into a single file with a .VRO extension. I found a great
utility called <a href="http://www.pixelbeat.org/programs/dvd-vr/">dvd-vr</a>, which
reads that file and splits it into individual AVI files. Once I have a
directory full of AVI files from the various camcorders, I use
<a href="http://www.gnu.org/software/emacs/">emacs</a> to rename them consistently. I
open up 2 buffers: an editable dired buffer (<code>wdired-change-to-wdired-mode</code>)
of the movies directory, and a shell buffer in that same directory. I run a
macro which takes the first file in the directory, plays it via an mplayer
command in the shell buffer and then renames the file using the
date/timestamp of the file. The macro leaves the cursor in a spot where I
can enter a brief description of the video and then run the macro again to
do the next video. It works pretty well. I then batch convert them to DV
format, which is what Kino accepts. Finally, I launch Kino and edit the
files, add titles, export them to AVI again, and then upload them to
youtube.</p>

<p>I did this today and ran into a problem with kino. The video played at
breakneck speed and there was no audio. Google helped me figure out that
this was a problem between PulseAudio and kino. Kino is no longer actively
developed. The lead developer considers it stable and finished and he&rsquo;s
moved on to other endeavors, which is perfectly understandable. He&rsquo;s
however, taken the time to describe
<a href="http://www.kinodv.org/article/view/173/1/13/">a workaround</a>. He recommends
running <code>padsp kino</code> which routes all audio requests from kino to
pulseaudio. This worked, but the audio had a lot of feedback. I found an
even better
<a href="http://ubuntuforums.org/showpost.php?p=8367831&amp;postcount=7">workaround on the ubuntu forums</a>. Use
<code>pasuspender kino</code>, which suspends all PulseAudio activity, gives kino
direct access to audio devices, and then resumes PulseAudio once kino has
quit. This worked with perfect audio quality, though of course, audio from
any other program gets muted completely.</p>

<p>I am still on the lookout for a better video editing solution on
Linux. Eventually, I&rsquo;d like to make DVDs of the hundreds of little clips
that I have. They don&rsquo;t need to be fancy, but I would like to have some
basic menus and they need to work on standard DVD players. I&rsquo;ve started
doing a little research on this, so will post once I&rsquo;ve tried some things
out.</p>

        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Jul 19, 2010
     - 4 minute read 
     - <a href="https://kurup.org/blog/2010/07/19/stock-market-timing/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="https://kurup.org/categories/investing/">investing </a><a class="label" href="https://kurup.org/categories/programming/">programming </a><a class="label" href="https://kurup.org/categories/python/">python </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://kurup.org/blog/2010/07/19/stock-market-timing/">Stock Market Timing</a>
  </h1>
</header>

        
          <p>If you asked me a few years ago, I would have said you absolutely can&rsquo;t
time the stock market. The 2008 crash hurt enough to make me review my
convictions a little. I still believe that accurate market timing is
somewhere between difficult and impossible. Trying to analyze stock charts
to figure out what will happen in the short term is mostly a crap
shoot. The way to win in the stock market is to buy value stocks,
especially when everyone else is selling.</p>

<p>I do, however, now believe that there is a place for market timing in
deciding when to be in the stock market, in the first place. I think there
are some trends that have repeatedly predicted poor stock
performance. There are some super smart people that have analyzed these
trends over at the <a href="http://boards.fool.com">Motley Fool message boards</a>. They&rsquo;ve come up with many indicators that
supposedly tell you when to get in and out of the stock market, but my
favorite is the <a href="http://boards.fool.com/Message.asp?mid=27442724">99 day rule</a> <sup class="footnote-ref" id="fnref:1"><a href="#fn:1">1</a></sup>.</p>

<p>The basic premise of the 99 day rule is that when the
<a href="http://finance.yahoo.com/q?s=^GSPC">S&amp;P 500 Index</a> stops making new highs,
investors get pessimistic and stocks fall. When it starts making new highs
again, optimism takes over and bull markets start. The 99 day rule has 2
parts and coincidentally uses 99 days as the cut-off for both parts. It
looks at whether a new high has been made recently. It defines &ldquo;high&rdquo; as a
99-day high. It defines &ldquo;recently&rdquo; as 99 days. So, it looks for a new
99-day high within the last 99 days. The number is arbitrary. Hop over the
the
<a href="http://boards.fool.com/mechanical-investing-100093.aspx">Motley Fool boards</a>
to see how the dates have been tuned and pick different ones, if you like.</p>

<p>I like this rule, because it&rsquo;s simple, easy to calculate and doesn&rsquo;t have
many &ldquo;signals&rdquo;, so you&rsquo;re not constantly buying and selling. Of course,
it&rsquo;s not perfect, but it would have gotten you out of most of the major
bear markets.</p>

<p>Here is how the rule has done over time:</p>

<pre><code>Period        S&amp;P 500   Switching   Improvement 
---------     -------   ---------   -----------
1930-1935     -12.2%       4.3%       16.4% 
1935-1940      10.3%      16.2%        6.0% 
1940-1945       7.4%       5.6%       -1.8% 
1945-1950      10.2%       7.4%       -2.8% 
1950-1955      23.6%      22.5%       -1.1% 
1955-1960      15.2%      13.8%       -1.4% 
1960-1965      10.7%      11.7%        1.0% 
1965-1970       5.0%       7.1%        2.2% 
1970-1975      -2.4%       6.8%        9.2% 
1975-1980      14.8%      12.0%       -2.8% 
1980-1985      14.8%      20.1%        5.2% 
1985-1990      20.4%      18.8%       -1.7% 
1990-1995       8.7%       6.7%       -2.0% 
1995-2000      28.6%      27.9%       -0.7% 
2000-2005      -2.3%       4.3%        6.6% 
2005-early2008  2.0%       4.5%        2.5%
</code></pre>

<p>You may have gotten to this point and are now wondering why it&rsquo;s worth
following this rule. In at least 3 of the past 5 periods, this signal would
have lost money versus staying in the market. That is true. The key is to
understand that there is no free lunch. Any rule that tries to get you out
of major bear markets will be imperfect and will often leave you with less
money than if you had chosen to act on a different date (or not act at
all). The overall goal is not to increase your returns, but to decrease
your risk without sacrificing your returns. This signal does that. Overall,
it does actually increase your returns by about 2% annually since 1930.</p>

<p>The other nice feature is that it doesn&rsquo;t have a &ldquo;slam-dunk&rdquo; feel to it. My
experience is that things that work in the stock market have to have a
little of a &ldquo;gut wrenching&rdquo; feel to them. If it sounds too good to be true,
it is. This rule feels correct, improves returns over the long run, is
backtested well, but does so at the risk of some lower performing
years. That feels a little gut-wrenching to me.</p>

<p>Here is the author&rsquo;s (<a href="http://www.stonewellfunds.com/">mungofitch</a>) description:</p>

<blockquote>
<p>By using the rule that I described above, you would have had
a total return of 11.80%, with a total risk of 6.71%. So, you
would have had 2.3% per year higher returns on average,
while experiencing only about 56.9% of the risk.
Higher returns, lower risk. That sounds good, right?</p>

<p>But, is this one of those iffy timing systems that really only works
because it managed to avoid the crash of 1987 of something?
No, actually it has you in the market in the 1987 crash: it&rsquo;s
not perfect. But does it really add value on average through the years?
Not always, but pretty darned well. Sometimes you do a little worse,
but never a lot worse. And when you do better, you do a LOT better.
So, overall, it&rsquo;s worth it.</p>
</blockquote>

<p>In order to keep track of the signal, I wrote a <a href="http://github.com/vkurup/ninety-nine">little python program</a> to calculate whether we are
in buy mode or sell mode. It uses the excellent <a href="http://www.goldb.org/ystockquote.html">ystockquote module</a> written by Corey Goldberg.</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:1">A much more <a href="http://boards.fool.com/Message.asp?mid=27035352">detailed description of the rule and its background</a>.
 <a class="footnote-return" href="#fnref:1"><sup>[return]</sup></a></li>
</ol>
</div>

        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Jul 18, 2010
     - 2 minute read 
     - <a href="https://kurup.org/blog/2010/07/18/first-steps-with-clojure/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="https://kurup.org/categories/programming/">programming </a><a class="label" href="https://kurup.org/categories/clojure/">clojure </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://kurup.org/blog/2010/07/18/first-steps-with-clojure/">First Steps with Clojure</a>
  </h1>
</header>

        
          <p>As mentioned yesterday, I&rsquo;m teaching myself clojure. I started by trying to
install it.</p>

<pre><code>vinod@ike$ aptitude install clojure
</code></pre>

<p>Ubuntu has packaged version 1.0.0 of clojure. I always default to the
OS-installed version of programs, just for ease of maintenance. The current
stable version of clojure is 1.1 and it appears that 1.2 is in beta. I have
no idea what has been changed in 1.1 or 1.2, but I&rsquo;m going to try to get
along using 1.0.0 and update only if I need to for a specific reason.</p>

<p>I then read through the
<a href="http://www.moxleystratton.com/article/clojure/for-non-lisp-programmers">tutorial for non-lisp programmers</a>,
which succinctly describes the basics of the language.<sup class="footnote-ref" id="fnref:1"><a href="#fn:1">1</a></sup> Everything in
lisp is either an atom or a list. Atoms include numbers, booleans, strings,
symbols, keywords and the nil value. Lists (delimited by parentheses <code>()</code>)
are the basic data structure, but include representations such as vectors
(delimited by square brackets <code>[]</code>) and maps (delimited by curly brackets
<code>{}</code>). Clojure programs are themselves simply lists, which leads to the
power of lisp-like languages because code and data are interchangeable.</p>

<p>You use <code>def</code> to create variables and <code>defn</code> to create functions. The
language includes loops and conditional statements, just like any other
useful language. Only <code>false</code> and <code>nil</code> are <em>false</em> in clojure; zero (0),
and the empty string (&ldquo;&rdquo;) are <em>true</em>, unlike a lot of languages.</p>

<p>The interesting part is the integration with Java. To instantiate a java
object, simply call <code>new</code>:</p>

<pre><code>user=&gt; (new java.util.Date)
#&lt;Date Sun Jul 18 16:20:54 EDT 2010&gt;
</code></pre>

<p>To call object methods or get instance/class variables, use the dot &ldquo;.&rdquo;
method.</p>

<pre><code>user=&gt; (. (new java.util.Date) (toString))
&quot;Sun Jul 18 16:24:09 EDT 2010&quot;

user=&gt; (. Integer MAX_VALUE)
2147483647
</code></pre>

<p>The article contains this interesting quote:</p>

<blockquote>
<p>Sequences are in a sense, the core of idiomatic Clojure
programming. Understand sequences and the forms that work with them, and
you will have cleared one of the biggest hurdles in writing significant
Clojure programs.</p>
</blockquote>

<p>So, add that to my to-do list. Where to go next? A
<a href="http://stackoverflow.com/questions/599519/which-tutorial-on-clojure-is-best">StackOverflow thread</a>
has pointed to me to a few options. I&rsquo;ll probably read one of these next:</p>

<ul>
<li><a href="http://en.wikibooks.org/wiki/Learning_Clojure">http://en.wikibooks.org/wiki/Learning_Clojure</a></li>
<li><a href="http://github.com/relevance/labrepl">http://github.com/relevance/labrepl</a></li>
<li><a href="http://java.ociweb.com/mark/clojure/article.html">http://java.ociweb.com/mark/clojure/article.html</a></li>
</ul>
<div class="footnotes">

<hr />

<ol>
<li id="fn:1">I later read that this tutorial is out of date, so I may have to &ldquo;unlearn&rdquo; things later. It still comes up as the first hit on <a href="http://www.google.com/search?q=clojure+tutorial">Google for &ldquo;clojure tutorial&rdquo;</a>
 <a class="footnote-return" href="#fnref:1"><sup>[return]</sup></a></li>
</ol>
</div>

        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Jul 17, 2010
     - 2 minute read 
     - <a href="https://kurup.org/blog/2010/07/17/getting-some-clojure/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="https://kurup.org/categories/programming/">programming </a><a class="label" href="https://kurup.org/categories/clojure/">clojure </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://kurup.org/blog/2010/07/17/getting-some-clojure/">Getting some clojure</a>
  </h1>
</header>

        
          <p>Steve Yegge is one of my favorite bloggers. I read <a href="http://sites.google.com/site/steveyegge2/you-should-write-blogs">&ldquo;You Should Write Blogs&rdquo;</a> a
long time ago and it is one of the main reasons that I still try to keep
this blog going at all. He recently took a blogging hiatus and in his
<a href="http://steve-yegge.blogspot.com/2010/07/blogger-finger.html">return post</a>,
he left a little hint that he was interested in a programming language
called <a href="http://clojure.org">clojure</a>.</p>

<p>My programming skills have been rusting away (Darn those patients, always
getting sick and stuff!), so I&rsquo;ve been looking for a little
inspiration. I&rsquo;m hoping that clojure is it. I&rsquo;ve always wanted to learn
lisp. I know a little elisp and scheme, but I&rsquo;ve never gotten comfortable
with them. Clojure compiles code that runs on a JVM (java virtual
machine). This gives you a lot of the &ldquo;power&rdquo; of java, namely the extensive
libraries and the widespread platforms on which it will run. But instead of
having to write java, you get to write in a dynamic, lisp-like language. At
least that&rsquo;s how I understand it.</p>

<p>Specifically, I hope that I&rsquo;ll eventually be able to create applications
that run on android phones, which is a java environment. Smartphones are
clearly going to be a huge part of the future, if not <strong>the way</strong> of the
future. I don&rsquo;t see myself ever buying an iPhone and Mala already has a
Droid Eris that I&rsquo;d be able to play with if I needed. (Didn&rsquo;t tell you
that, did I Mala?) So&hellip; Android it is.</p>

<p>Starting today, I&rsquo;m going to start reading about clojure and taking notes
(and maybe even posting them!). I&rsquo;ve never been very good about taking
notes, ever in my life. But, I clearly <a href="http://sachachua.com/blog/2010/03/how-to-brain-dump-what-you-know/">need to learn</a>.</p>

        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Jul 16, 2010
     - 3 minute read 
     - <a href="https://kurup.org/blog/2010/07/16/inotify/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="https://kurup.org/categories/linux/">linux </a><a class="label" href="https://kurup.org/categories/unix/">unix </a><a class="label" href="https://kurup.org/categories/sysadmin/">sysadmin </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://kurup.org/blog/2010/07/16/inotify/">inotify</a>
  </h1>
</header>

        
          <p><a href="http://inotify.aiken.cz/">incron</a> seems to be a pretty neat tool. It&rsquo;s
cron-for-file-activities. <a href="http://en.wikipedia.org/wiki/Cron">Cron</a> is a
common unix tool that allows you to run any command at a specified
time. It&rsquo;s immensely useful for running anything that you want to occur on
a regular basis: backups, daily reminder emails, downloading podcasts,
etc. If you&rsquo;ve used unix to any significant extent, you&rsquo;ve used cron.</p>

<p>incron takes that cron metaphor and applies it to file activity. You
specify which files you want to watch, and then you specify which activities
you are interested in. If incron notices any of those activities occurring
on your files, it launches the command that you specified. Activities could
include creating a new file, modifying a file, accessing a file, among
multiple other possibilities. incron takes advantage of the inotify system
built into recent linux kernels, which supposedly is more efficient than
previous ways of doing this same thing.</p>

<p>incron seemed to be just what I wanted. I wanted to watch a specific
directory and launch a tool to rebuild my website if any of those files
changed. The problem is that incron doesn&rsquo;t work recursively on
directories. You have to specify each directory, the activities on that
directory, and the command to launch. If you create new directories, you
have to tell incron about them specifically. This ruins the benefit of the
tool for me. It seems the developer has been planning to implement
recursive watching for the past 4 years ago, but hasn&rsquo;t done it yet. If it
hasn&rsquo;t happened in 4 years, it&rsquo;s probably not going to happen soon.</p>

<p>But, I found a perfectly usable way to get what I
want. <a href="http://wiki.github.com/rvoicilas/inotify-tools/">inotify-tools</a>
includes a program called <code>inotifywait</code>. It takes a file or directory name
and listens for specific activities that you are interested in. It
basically waits until it sees one of those activities and then returns
control back to you. So, you can something like (pseudocode):</p>

<pre><code>while (inotifywait /home/vinod/web/kurup.org):
    # triggered
    rebuild my server
</code></pre>

<p><code>inotifywait</code> waits for my activities. If it finds one, it returns TRUE and
my server gets rebuilt, and then the while loop restarts. Best of all,
<code>inotifywait</code> can work recursively on a directory. Which brings me to my
<code>watch-rebuild.sh</code> script which watches my web source files for changes,
and rebuilds the web generated files on demand. It also pops up a little
GNOME notification using <code>notify-send</code>:</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#719e07">#!/bin/bash
</span><span style="color:#719e07"></span>    
<span style="color:#268bd2">BLOGOFILE</span><span style="color:#719e07">=</span><span style="color:#2aa198">&#39;/usr/local/bin/blogofile&#39;</span>
<span style="color:#268bd2">BLOGDIR</span><span style="color:#719e07">=</span><span style="color:#2aa198">&#39;/home/vinod/web/kurup.org&#39;</span>
    
<span style="color:#586e75"># requires libnotify-bin for notify-osd notification</span>
<span style="color:#586e75"># requires inotify-tools</span>
<span style="color:#719e07">while</span> <span style="color:#268bd2">LINE</span><span style="color:#719e07">=</span><span style="color:#719e07">$(</span>inotifywait -rq --timefmt <span style="color:#2aa198">&#39;%F %R&#39;</span> --format <span style="color:#2aa198">&#39;%T %e %f&#39;</span> <span style="color:#cb4b16">\
</span><span style="color:#cb4b16"></span>      -e close_write -e move -e delete <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$BLOGDIR</span><span style="color:#2aa198">&#34;</span><span style="color:#719e07">)</span>;
<span style="color:#719e07">do</span>
        <span style="color:#b58900">echo</span> -n <span style="color:#2aa198">&#34;Rebuilding </span><span style="color:#268bd2">$LINE</span><span style="color:#2aa198"> ...&#34;</span>
        <span style="color:#268bd2">$BLOGOFILE</span> -s <span style="color:#268bd2">$BLOGDIR</span> build
        <span style="color:#b58900">echo</span> <span style="color:#2aa198">&#34;done&#34;</span>
        notify-send -u low <span style="color:#2aa198">&#34;Rebuild Done&#34;</span> <span style="color:#2aa198">&#34;Watching again&#34;</span>
<span style="color:#719e07">done</span></code></pre></div>
<p><code>-r</code> = recursive<br />
<code>-q</code> = be quiet<br />
<code>--timefmt</code> &amp; <code>--format</code> = what we want to display on the command line<br />
<code>-e</code> = each of the individual events that we are interested in</p>

        
      </article>
      
      
      






<div class="pagination">

  
  
  
  
  <a href="/" aria-label="First" class="label-pagination"><i class="fa fa-angle-double-left fa-lg"></i></a>
  

  
  
  <a href="/page/7/" aria-label="Previous" class="label-pagination"><i class="fa fa-angle-left fa-lg"></i></a>
  

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

  
  
  <a href="/page/9/" aria-label="Next" class="label-pagination"><i class="fa fa-angle-right fa-lg"></i></a>
  

  
  
  <a href="/page/30/" aria-label="Last"><i class="fa fa-angle-double-right fa-lg"></i></a>
  

</div>

  
    </div>
    

<aside class="sidebar thirds">
  <section class="first odd">

    

    <p>
      
    </p>
  </section>

  

  
  <ul class="sidebar-nav">
    <li class="sidebar-nav-item">
      <a target="_blank" href="https://github.com/vkurup/" title="https://github.com/vkurup/"><i class="fa fa-github fa-3x"></i></a>
      
      
      <a target="_blank" href="https://twitter.com/vkurup/" title="https://twitter.com/vkurup/"><i class="fa fa-twitter fa-3x"></i></a>
      
      <a target="_blank" href="https://keybase.io/vkurup/" title="https://keybase.io/vkurup/"><i class="fa fa-keybase fa-3x"></i></a> 
      
      
      <a target="_blank" href="https://stackoverflow.com/users/347942" title="https://stackoverflow.com/users/347942"><i class="fa fa-stack-overflow fa-3x"></i></a>
      
      
      
      
      

      
      
    </li>
  </ul>

  

  

  
  
  
  
  <section class="even">
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      
      
      
      <li class="post">
        <a href="/blog/2019/11/17/ports-and-networks/">Ports and networks</a>
      </li>
      
      
      
      
      
      <li class="post">
        <a href="/blog/2019/11/17/hugo/">Hugo</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2019/04/08/avik-730/">Avik 7:30</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2018/12/20/triangle-race-series/">Triangle Race Series</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2018/12/02/my-nest-journey/">My Nest Journey</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2018/09/23/composting/">Composting</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2018/09/22/starting-a-garden/">Starting a garden</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2018/05/31/history-of-indian-civilization/">History of Indian Civilization</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2018/05/30/autovacuum-not-running/">Autovacuum not running</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2018/05/29/renaissance-man/">Renaissance Man</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2014/07/28/using-dynamic-queries-in-a-cbv/">Using dynamic queries in a CBV</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2014/07/23/some-emacs-posts/">Some Emacs Posts</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2014/07/22/pygments-on-arch-linux/">Pygments on Arch Linux</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2014/07/21/how-to-create-test-models-in-django/">How to create test models in Django</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2013/01/21/peanut-allergy-a-personal-clinical-review/">Peanut Allergy, a personal clinical review</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2013/01/17/priorities-and-gtd/">Priorities and GTD</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2013/01/16/gtd-again/">GTD again?</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2013/01/15/writing-paralysis/">Writing paralysis</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2013/01/09/steal-my-web-app-idea/">Steal My Web App Idea</a>
      </li>
      
      
    </ul>
  </section>
  
  

  <section class="odd">
    <h1>My Pinboard</h1>
    <ul id="pinboard_linkroll">Fetching linkroll...</ul>
    <p><a href="http://pinboard.in/u:vkurup">My Pinboard Bookmarks &raquo;</a></p>
  </section>
  <script type="text/javascript">
  var linkroll = 'pinboard_linkroll'; 
  var pinboard_user = "vkurup"; 
  var pinboard_count = 10; 
  (function(){
    var pinboardInit = document.createElement('script');
    pinboardInit.type = 'text/javascript';
    pinboardInit.async = true;
    pinboardInit.src = '/js/pinboard.js';
    document.getElementsByTagName('head')[0].appendChild(pinboardInit);
  })();
  </script>

</aside>
    
  </div>
</div>
    <footer role="contentinfo">
      <p>Copyright &copy; 2019 Vinod Kurup - <a href="https://kurup.org/license/">License</a> -
        <span class="credit">Powered by <a target="_blank" href="https://gohugo.io">Hugo</a> and <a target="_blank" href="https://github.com/parsiya/hugo-octopress/">Hugo-Octopress</a> theme.
      </p>
    </footer>

    
    
    

    
      <script>
        var _gaq=[['_setAccount','UA-79447-1'],['_trackPageview']];
        (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
        g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
        s.parentNode.insertBefore(g,s)}(document,'script'));
      </script>
    
  </body>
</html>
   

