<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: mail | Vinod Kurup]]></title>
  <link href="https://www.kurup.org/blog/categories/mail/atom.xml" rel="self"/>
  <link href="https://www.kurup.org/"/>
  <updated>2018-12-02T21:53:49-05:00</updated>
  <id>https://www.kurup.org/</id>
  <author>
    <name><![CDATA[Vinod Kurup]]></name>
    <email><![CDATA[vinod@kurup.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[More Mail Woes]]></title>
    <link href="https://www.kurup.org/blog/2003/07/05/more-mail-woes"/>
    <updated>2003-07-05T00:00:00-04:00</updated>
    <id>https://www.kurup.org/blog/2003/07/05/more-mail-woes</id>
    <content type="html"><![CDATA[<p>I spent most of this afternoon struggling with a mail issue and I didn't find it documented well anywhere else, so I'm going to write about it here in the hopes that it might help someone else.</p>

<p><strong>What I was trying to do:</strong> Setup qmail + vpopmail + courier imap for imap and pop3d</p>

<p><strong>Problem I was having:</strong> For some users, checking POP3 mail would work for a while (about 5 minutes), but then would fail:</p>

<pre><code>      Jul  5 00:30:34 vkurup pop3d: LOGIN FAILED, ip=[::ffff:68.173.27.35]
      Jul  5 00:30:34 vkurup pop3d: Disconnected, ip=[::ffff:68.173.27.35]
</code></pre>

<p>The failure would only happen for users who had vpopmail accounts <strong>and</strong> shell accounts. Users who have only vpopmail accounts were fine.</p>

<p>Eventually, after much searching, I found this <a href="http://bluedot.net/mail/archive/read.php?f=2&amp;amp;i=10881&amp;amp;t=10880">message</a> which advised to configure courier-imap with <code>--without-authdaemon</code>. This solved my problem.</p>

<p>According to the author of courier-imap, <a href="http://sourceforge.net/mailarchive/forum.php?thread_id=2388144&amp;amp;forum_id=33081">this problem is solved in newer versions of vpopmail</a>, but he mentions version 5.3.38 and I could only find version 5.3.20, so I didn't try that fix.</p>

<div id="comment-box">
<h2>Comments from old site</h2>

<div class="one-comment">
<p><b>THANK YOU</b></p>
<p>
Thank you very much - it solved my problem !!!
</p>
<p>
pop3d was causing me serious grief, it just gave error message "pop3d: LOGIN FAILED". It's supposed to authenticate to MySQL - but according to MySQL's log, there's no query to the mail database.
</p>

<p>
Turned out I created a username in the mail database that's the same as a user in the system, as you said.
</p>

<p>
So I created another user - lo, pop3d now queries to MySQL !!
</p>

<p>
Funny thing is I've looked around the Internet for hours, and your blog is the only place that mention it.... unbelieveable.
</p>

<p>
Again, many thanks !!
</p>

<p>
cheers,
</p>

<p>
Harry
</p>
<address class="signature">
<span class="author">Harry Sufehmi</span>
<span class="date">2004-08-24 08:02:40</span>
</address>
</div>

</div>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[compiling vpopmail]]></title>
    <link href="https://www.kurup.org/blog/2003/06/28/compiling-vpopmail"/>
    <updated>2003-06-28T00:00:00-04:00</updated>
    <id>https://www.kurup.org/blog/2003/06/28/compiling-vpopmail</id>
    <content type="html"><![CDATA[<p>I'm setting up <a href="http://inter7.com/vpopmail.html">vpopmail</a> 5.2.1 - a POP3 email manager for qmail, but it won't compile out of the box.</p>

<pre><code>gcc -I. -Icdb -g -O2 -Wall -c vconvert.c 
In file included from vconvert.c:35: vmysql.h:53:22: missing terminating " character 
vmysql.h:60:35: missing terminating " character 
make[2]: *** [vconvert.o] Error 1 
make[2]: Leaving directory `/usr/local/src/vpopmail-5.2.1' 
make[1]: *** [all-recursive] Error 1 
make[1]: Leaving directory `/usr/local/src/vpopmail-5.2.1' 
make: *** [all-recursive-am] Error 2 
</code></pre>

<p>Whenever <code>make</code> gives you an error, look for the first error you can find. Any errors after that often fix themselves once you fix the first error.  The relevant code is here, (vmysql.h, starting at line 42):</p>

<pre><code>42: #ifdef CLEAR_PASS 
43: #define TABLE_LAYOUT "pw_name char(32) not null, \ 
44: pw_domain char(64) not NULL, \ 
45: pw_passwd char(40), \ 
46: pw_uid int, pw_gid int, \ 
47: pw_gecos char(48), \ 
48: pw_dir char(160), \ 
49: pw_shell char(20), \ 
50: pw_clear_passwd char(16), \ 
51: primary key (pw_name, pw_domain ) " 
52: #else 
53: #define TABLE_LAYOUT "pw_name char(32) not null, \ 
54: pw_domain char(64) not null, 
55: pw_passwd char(40), \ 
56: pw_uid int, pw_gid int, \ 
57: pw_gecos char(48), \ 
58: pw_dir char(160), 
59: pw_shell char(20), \ 
60: primary key (pw_name, pw_domain ) " 
61: #endif
</code></pre>

<p>Looking around line 53, I see that line 54 and line 58 are missing backslashes - adding 'em back in fixes the error. The interesting thing to me is that version 5.2.1 has been out for over a year and, according to <a href="http://www.mail-archive.com/vchkpw@inter7.com/msg12238.html">an email on the vpopmail list</a>, this error still persists in more recent versions. How come this bug hasn't bitten anyone else? I suppose it's because the install docs recommend setting CLEAR_PASS (see line 42), which would cause the compiler to miss the bug. Or maybe I'm just lucky</p>
]]></content>
  </entry>
  
</feed>
