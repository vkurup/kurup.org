
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Vinod Kurup</title>
  <meta name="author" content="Vinod Kurup">

  
  <meta name="description" content="I wonder how many of my blog posts are based on stories from This
American Life. Probably not
enough. Every time I start to listen to a show, I&#8217 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.kurup.org/blog/page/3/">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/vkurup" rel="alternate" title="Vinod Kurup" type="application/atom+xml">
  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='//fonts.googleapis.com/css?family=Quattrocento' rel='stylesheet' type='text/css'>
<link href='//fonts.googleapis.com/css?family=Quattrocento+Sans' rel='stylesheet' type='text/css'>
<link href='//fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>

<meta name="verify-v1" content="7VLvj7jbZMA24/73SZ9uUEq3SeBuiX3+aSIBRtgH4jQ=" />
<link rel="openid.server" href="http://www.myopenid.com/server" />
<link rel="openid.delegate" href="http://vkurup.myopenid.com/" />
<link rel="openid2.local_id" href="http://vkurup.myopenid.com/" />
<link rel="openid2.provider" href="http://www.myopenid.com/server" />
<meta http-equiv="X-XRDS-Location" content="http://www.myopenid.com/xrds?username=vkurup.myopenid.com" />

<link href="/favicon.ico" rel="shortcut icon" />

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-79447-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Vinod Kurup</a></h1>
  
    <h2>Hospitalist/programmer in search of the meaning of life</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/vkurup" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.kurup.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul role=main-navigation>
  <li><a href="/">Blog</a></li>
  <li><a href="/about.html">About Me</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/blog/categories">Categories</a></li>
  <li><a href="/medicine">Medicine</a></li>
  <li><a href="/running">Running</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/11/29/factoring-large-numbers">On Factoring Large Numbers</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-29T21:59:20-05:00" pubdate data-updated="true">Nov 29<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I wonder how many of my blog posts are based on stories from <a href="http://www.thisamericanlife.org">This
American Life</a>. Probably not
enough. Every time I start to listen to a show, I&#8217;m certain that I&#8217;m
not going to be interested and within a minute I&#8217;m trapped and can&#8217;t
stop listening. It&#8217;s that good. A <a href="http://www.thisamericanlife.org/radio-archives/episode/450/so-crazy-it-just-might-work">recent show was about people who
people who pursued crazy
ideas</a>.
The first story was about a mathematician named <a href="http://en.wikipedia.org/wiki/Frank_Nelson_Cole">Frank Nelson
Cole</a>. <a href="http://en.wikipedia.org/wiki/Mersenne_prime#History">Marin
Mersenne</a> had
claimed in the 17th century that 2<sup>67</sup>-1 was a prime
number. He was prominent enough that the claim was felt to be accepted
wisdom and there was certainly no way to test the claim in the days
before computers. That&#8217;s a big honking number:
147,573,952,589,676,412,927.</p>

<p>In 1903, Frank Nelson Cole walked into a meeting of mathematicians to
present his talk. The title was boring, something like &#8220;On the
factoring of large numbers&#8221;. Without speaking a word, he walked up to
the chalkboard and started to write a large number, followed by
another large number and then started to multiply them together. It
took a while, but by the time he started to get towards the solution,
the crowd of mathematicians understood that he was proving that he had
found two numbers whose product was the famous &#8220;prime&#8221; number
2<sup>67</sup>-1. As he came close to finishing, the anticipation
peaked and cheering began. He finished the calculation and sat down,
never speaking a word.</p>

<p>Stories like that give me the chills. Can you imagine how excited he
must have been when he found those 2 roots? I get that sensation every
once in a while when I make a programming breakthrough, solving a
problem which I had been banging my head on for a while. It&#8217;s nowhere as
profound as what he did, but I think I can understand the exhilaration
he must have felt.</p>

<p>I decided to see what those 2 roots are, using my new favorite
language, Clojure. I&#8217;m by no means an expert in anything, let alone
programming and especially functional programming, but here&#8217;s how I
went about it. The REPL is such a fun way to explore things like this:</p>

<ol>
<li><p>I need a range of numbers which I&#8217;ll then test one-by-one to see if
they divide into 2<sup>67</sup>-1 evenly.</p>

<pre><code> user=&gt; (def n 18)
 #'user/n
 user=&gt; (range 2 n)
 (2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17)
</code></pre></li>
<li><p>I need a way to take a square root.  (There&#8217;s no need to check
numbers higher than the square root of 2<sup>67</sup>-1)</p>

<pre><code> user=&gt; (Math/sqrt n)
 4.242640687119285
</code></pre></li>
<li><p>So the numbers I need to test are:</p>

<pre><code> user=&gt; (range 2 (inc (int (Math/sqrt n))))
 (2 3 4)
</code></pre></li>
<li><p>I need to find the remainder of a division (Of note, <code>mod</code> also does
the same thing, but <code>rem</code> is a lot faster)</p>

<pre><code> user=&gt; (rem 9 2)
 1
</code></pre></li>
<li><p>Can I find all the lower roots of a number? The <code>#(...)</code> syntax is
syntactic sugar for an anonymous function. The <code>%</code> is a placeholder
for the value which is being iterated over. So the following
function takes each value in the list returned by <code>range</code> and
supplies it to <code>rem</code>. If that <code>rem</code> function is equal to
zero, then the <code>#(...)</code> anonymous function returns true and <code>filter</code>
keeps the value.</p>

<pre><code> user=&gt; (def n 100)
 #'user/n
 user=&gt; (filter #(= (rem n %) 0) (range 2 (inc (int (Math/sqrt n)))))
 (2 4 5 10)
</code></pre></li>
<li><p>Now let&#8217;s map over each of those values, finding the corresponding
higher root for each value. <code>vector</code> creates a vector (think list)
with the first value being the supplied value and the second value
being the other root <code>(/ n %)</code>:</p>

<pre><code> user=&gt; (map #(vector % (/ n %)) (filter #(= (rem n %) 0) (range 2 (inc (int (Math/sqrt n))))))
 ([2 50] [4 25] [5 20] [10 10])
</code></pre></li>
<li><p>Based on that experimentation, here&#8217;s my first stab at the
function:</p>

<pre><code> user=&gt; (defn roots [n]
          (let [lower-factors (range 2 (inc (int (Math/sqrt n))))
                is-factor? (fn [a] (= (rem n a) 0))]
            (map  #(vector % (/ n %)) (filter is-factor? lower-factors))))
 #'user/roots
 user=&gt; (roots 294)
 ([2 147] [3 98] [6 49] [7 42] [14 21])
</code></pre></li>
<li><p>Now let&#8217;s get our big number (2<sup>67</sup>-1)</p>

<pre><code> user=&gt; (dec (Math/pow 2 67))
 1.4757395258967641E20
</code></pre></li>
<li><p>Hmmm&#8230; that looks like it might not be a precise value. Oh well,
let&#8217;s try it:</p>

<pre><code> user=&gt; (roots (dec (Math/pow 2 67)))
 ([2 7.378697629483821E19] [3 4.9191317529892135E19] [4
 3.6893488147419103E19] [5 2.9514790517935284E19] [6
 2.4595658764946067E19] [7 2.108199322709663E19] [8
 1.8446744073709552E19] [9 1.6397105843297378E19] [10
 1.4757395258967642E19] [11 1.3415813871788765E19] [12
 1.2297829382473034E19] [13 1.1351842506898186E19] [14
 1.0540996613548315E19] [15 9.838263505978427E18] [16
 9.223372036854776E18] [17 8.6808207405692006E18] [18
 8.1985529216486892E18] [19 7.7670501362987581E18] [20
 7.3786976294838211E18.....
 C-c C-c (ABORT, ABORT!!!)
</code></pre></li>
<li><p>OK, that didn&#8217;t work. It clearly found way too many roots, because
2<sup>67</sup>-1 was an approximation. We have to use BigIntegers which have
appropriate precision even with large numbers.</p>

<pre><code> user=&gt; (def two67minus1 (dec (.pow (BigInteger. "2") 67)))
 #'user/two67minus1
 user=&gt; two67minus1
 147573952589676412927
</code></pre></li>
<li><p>Cool, that looks more precise than our previous value. To see the
difference, check their type.</p>

<pre><code> user=&gt; (type (dec (Math/pow 2 67)))
 java.lang.Double
 user=&gt; (type (dec (.pow (BigInteger. "2") 67)))
 java.math.BigInteger
</code></pre></li>
<li><p>OK, Time for the big test:</p>

<pre><code> user=&gt; (roots two67minus1)
 ([193707721 761838257287])
</code></pre></li>
<li><p>Cool!!! It works! Those are the roots of 2<sup>67</sup>-1. How long did that
take to compute? (We need <code>doall</code> to make the <code>time</code> command wait
for all of the values to be calculated, otherwise it will return
after the first value is calculated. This has something to do with
the laziness of clojure sequences)</p>

<pre><code> user=&gt; (time (doall (roots two67minus1)))
 "Elapsed time: 2.2697318183297E7 msecs"
 ([193707721 761838257287])
</code></pre></li>
</ol>


<p>6 hours 18 minutes. I&#8217;m sure there&#8217;s a quicker way to do this. I do a
lot of redundant testing. For example, once we know that 2 is not a
factor, we shouldn&#8217;t check any more even factors. I&#8217;d be interested in
any advice to make it run faster.</p>

<p>I can&#8217;t even fathom how you&#8217;d go about doing this without a
computer. Can you imagine how frustrating it must&#8217;ve been any time you
had a simple error? Just amazing&#8230;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/11/12/clojurescript-and-phonegap">ClojureScript and PhoneGap</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-12T21:39:34-05:00" pubdate data-updated="true">Nov 12<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://phonegap.com">Phonegap</a> is a tool that allows you to develop
apps in HTML5 + javascript and makes it easy to deploy them to
multiple mobile platforms, including Android and iOS.</p>

<p><a href="https://github.com/clojure/clojurescript">ClojureScript</a> is a dialect
of the awesome language, <a href="http://clojure.org">Clojure</a>, that compiles to
Javascript (after a pass through the <a href="http://code.google.com/closure/">Google
Closure</a> optimizer). Because Clojure,
ClojureScript and Google Closure can be confusing terms, I&#8217;ll use CLJS
instead of ClojureScript for the remainder of this post.</p>

<p>What I wanted to do: Write a simple CLJS app that runs on my Android
phone using these tools.</p>

<h3>Get HelloWorld working with PhoneGap</h3>

<p>Following <a href="http://phonegap.com/start#android">these instructions</a> will
get the Android SDK, Eclipse plugin and PhoneGap working. If you
already have the Android SDK, you&#8217;ll be able to skip most of it. I&#8217;m
most comfortable in Emacs, so I&#8217;ll be using that instead of
Eclipse. Here is the command-line command for creating your project
(the <code>-t</code> refers to your android target which you can find by doing
<code>android list avds</code>):</p>

<pre><code>$ android create project -n HelloPhoneGap -t 2 -p HelloPhoneGap -k com.phonegap.helloworld -a App
</code></pre>

<p>By the end of these instructions, you should have a copy of an app
called HelloPhoneGap on your phone which, when clicked, shows a
&#8216;Hello World&#8217; screen.</p>

<h3>Setup CLJS</h3>

<p>Follow the <a href="https://github.com/clojure/clojurescript/wiki/Quick-Start">simple
instructions</a>,
recreated here because they&#8217;re just so simple.</p>

<pre><code>$ git clone git://github.com/clojure/clojurescript.git
$ cd clojurescript
$ ./script/bootstrap
</code></pre>

<p>That&#8217;s it. The CLJS compiler and REPL are ready to work.</p>

<h3>Get HelloWorld working via HTML</h3>

<p>Follow the
<a href="https://github.com/clojure/clojurescript/wiki/Quick-Start">instructions</a>
under the heading <em>Using ClojureScript on a Web Page</em> to build a
Javascript file and associated HTML file for testing.</p>

<h3>Put CLJS and PhoneGap together</h3>

<p>OK, let&#8217;s make something a little interactive on the phone. I&#8217;m going
to build a BMI calculator that takes a person&#8217;s height and weight in
Imperial (i.e. American) units and calculates a Body Mass Index. BMI
is simply weight divided by the square of height, with units of
kg/m<super>2</super>.</p>

<p>Here&#8217;s the CLJS file:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">ns </span><span class="nv">bmi</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">height</span> <span class="p">[</span><span class="nv">feet</span> <span class="nv">inches</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="nb">-&gt; </span><span class="nv">feet</span> <span class="p">(</span><span class="nb">* </span><span class="mi">12</span><span class="p">)</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">inches</span><span class="p">)</span> <span class="p">(</span><span class="nb">* </span><span class="mf">2.54</span><span class="p">)</span> <span class="p">(</span><span class="nb">/ </span><span class="mi">100</span><span class="p">)))</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">weight</span> <span class="p">[</span><span class="nv">lbs</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="nb">/ </span><span class="nv">lbs</span> <span class="mf">2.2</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">bmi</span> <span class="p">[</span><span class="nv">h</span> <span class="nv">w</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">js/Math.round</span> <span class="p">(</span><span class="nb">/ </span><span class="nv">w</span> <span class="p">(</span><span class="nb">* </span><span class="nv">h</span> <span class="nv">h</span><span class="p">))))</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="o">^</span><span class="ss">:export</span> <span class="nv">alertDismissed</span> <span class="p">[]</span>
</span><span class='line'>  <span class="nv">nil</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="o">^</span><span class="ss">:export</span> <span class="nv">displaybmi</span> <span class="p">[</span><span class="nv">form</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">h</span> <span class="p">(</span><span class="nf">height</span> <span class="p">(</span><span class="nf">js/parseInt</span> <span class="nv">form.f.value</span><span class="p">)</span> <span class="p">(</span><span class="nf">js/parseInt</span> <span class="nv">form.i.value</span><span class="p">))</span>
</span><span class='line'>        <span class="nv">w</span> <span class="p">(</span><span class="nf">weight</span> <span class="p">(</span><span class="nf">js/parseInt</span> <span class="nv">form.l.value</span><span class="p">))]</span>
</span><span class='line'>    <span class="p">(</span><span class="nf">js/navigator.notification.alert</span> <span class="p">(</span><span class="nf">bmi</span> <span class="nv">h</span> <span class="nv">w</span><span class="p">)</span> <span class="nv">hello.alertDismissed</span><span class="p">)))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Basically, we create simple functions to convert Imperial heights and
weights to metric values, calculate a BMI and then use <code>displaybmi</code> to
parse form parameters, calculate the BMI and show that result in an
Android notification popup. <code>alertDismissed</code> is a callback that gets
called when the user dismisses the notification. (I&#8217;m just discarding
the information here). Those are the only 2 functions that are needed
by the HTML file, so those are the only 2 that need the <code>:export</code>
metadata tag. <code>navigator.notification.alert</code> is a PhoneGap API call
that does the actual notification.</p>

<p>The calls prefixed by <code>js/</code> are understood by the CLJS compiler to
refer to the global JavaScript namespace. If you didn&#8217;t include that
prefix, the compiler would assume you meant a call in the local
<code>bmi</code> namespace, which would obviously fail.</p>

<p>Here&#8217;s the HTML file (in <code>HelloPhoneGap/assets/www/</code>):</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="cp">&lt;!DOCTYPE HTML&gt;</span>
</span><span class='line'><span class="nt">&lt;html&gt;</span>
</span><span class='line'>  <span class="nt">&lt;head&gt;</span>
</span><span class='line'>    <span class="nt">&lt;title&gt;</span>BMI calculator<span class="nt">&lt;/title&gt;</span>
</span><span class='line'>    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span> <span class="na">src=</span><span class="s">&quot;phonegap-1.0.0.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'>    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span> <span class="na">src=</span><span class="s">&quot;bmi.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/head&gt;</span>
</span><span class='line'>  <span class="nt">&lt;body&gt;</span>
</span><span class='line'>    <span class="nt">&lt;h1&gt;</span>BMI calculator<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nt">&lt;form&gt;</span>
</span><span class='line'>      Height: <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">&quot;f&quot;</span> <span class="na">size=</span><span class="s">&quot;2&quot;</span><span class="nt">&gt;</span> ft. <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">&quot;i&quot;</span> <span class="na">size=</span><span class="s">&quot;2&quot;</span><span class="nt">&gt;</span> in. <span class="nt">&lt;br&gt;</span>
</span><span class='line'>      Weight: <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">&quot;l&quot;</span> <span class="na">size=</span><span class="s">&quot;2&quot;</span><span class="nt">&gt;</span> lbs.<span class="nt">&lt;br&gt;</span>
</span><span class='line'>      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">value=</span><span class="s">&quot;Calculate BMI&quot;</span> <span class="na">onclick=</span><span class="s">&quot;bmi.displaybmi(this.form)&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/form&gt;</span>
</span><span class='line'>   <span class="nt">&lt;/body&gt;</span>
</span><span class='line'><span class="nt">&lt;/html&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now compile the CLJS and move the compiled JS file to
<code>HelloPhoneGap/assets/www/</code></p>

<pre><code>$ ./bin/cljsc bmi.cljs '{:optimizations :simple :pretty-print true}' &gt; bmi.js
$ cp bmi.js ~/dev/HelloPhoneGap/assets/www/
</code></pre>

<p>The <code>:simple</code> value for optimizations and the <code>true</code> value for
pretty-print make it so that we can read the resulting JS file, but
can be changed to <code>:advanced</code> and <code>false</code> respectively when ready for
production.</p>

<p>Now, go back into the HelloPhoneGap Android project and compile it and
send it to the emulator (<code>C-c C-c i</code> in emacs). You should now have a
simple BMI calculator working on Android.</p>

<p><img src="/images/bmi.png" title="BMI Android Screenshot" ></p>

<h3>Next steps</h3>

<p>The promise of PhoneGap is that you could use similar HTML/Javascript
to create iOS versions as well, but I haven&#8217;t done that yet. There are
tons of API calls available on both platforms which are supposed to
give you the same access that native apps have. Using ClojureScript
means you get to use a modern functional language to create your app,
while getting access to the features that only JavaScript APIs
provide.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/09/08/fixing-wireless-on-eeepc">Fixing Wireless on eeePC</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-09-08T21:58:48-04:00" pubdate data-updated="true">Sep 8<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I have an ASUS eeePC 1000, running Ubuntu 10.10. Wireless worked
flawlessly at home, which is where I use it 99% of the time. On our
most recent trip, however, it wasn&#8217;t working. It couldn&#8217;t connect to a
WPA-secured network. Here are the relevant error messages:</p>

<pre><code>NetworkManager[770]: &lt;warn&gt; Activation (wlan0/wireless): association took too long.
NetworkManager[770]: &lt;warn&gt; (wlan0): link timed out.
NetworkManager[770]: &lt;warn&gt; Activation (wlan0) failed for access point (linksys)
NetworkManager[770]: &lt;warn&gt; Activation (wlan0) failed.
NetworkManager[770]: &lt;info&gt; (wlan0): deactivating device (reason: 0).
</code></pre>

<p>After a little googling on my phone, I found out that <a href="http://www.ctbarker.info/2010/05/ubuntu-1004-wireless-chipsets-and-wpa.html">others had this
problem with the rt2860sta wireless
driver</a>. Fortunately,
there is a solution, which involved downloading the source code for
the latest driver, modifying it a bit and rebuilding the driver. Here
are the instructions:</p>

<h3>Step 1: Download the driver</h3>

<p>Download the <a href="http://www.ralinktech.com/license_us.php?n=2&amp;p=0&amp;t=U0wyRnpjMlYwY3k4eU1ERXdMekEzTHpFMkwyUnZkMjVzYjJGa05qZ3hPRFUwTmpBd05DNWllakk5UFQweU1ERXdYekEzWHpFMlgxSlVNamcyTUY5TWFXNTFlRjlUVkVGZmRqSXVOQzR3TGpBdWRHRnlD">latest rt2860sta
driver</a>.</p>

<h3>Step 2: Rename and extract the downloaded file</h3>

<p>Mine was named <code>download.php</code>, but it&#8217;s really a tar file:</p>

<figure class='code'><figcaption><span>extract.sh </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>vinod@ike:~ <span class="nv">$ </span>mkdir <span class="nb">test</span>
</span><span class='line'>vinod@ike:~ <span class="nv">$ </span>mv download.php <span class="nb">test</span>/driver.tar
</span><span class='line'>vinod@ike:~ <span class="nv">$ </span><span class="nb">cd test</span>/
</span><span class='line'>vinod@ike:~/test <span class="nv">$ </span>tar xf driver.tar
</span><span class='line'>vinod@ike:~/test <span class="nv">$ </span>mv 2010_07_16_RT2860_Linux_STA_v2.4.0.0 driver
</span><span class='line'>vinod@ike:~/test <span class="nv">$ </span><span class="nb">cd </span>driver
</span></code></pre></td></tr></table></div></figure>


<h3>Step 3: Apply patch</h3>

<div><script src='https://gist.github.com/1205291.js?file=driver.patch'></script>
<noscript><pre><code>diff -urbB old/common/cmm_wpa.c new/common/cmm_wpa.c
--- old/common/cmm_wpa.c    2010-07-08 07:40:24.000000000 -0400
+++ new/common/cmm_wpa.c    2011-08-30 18:27:46.856572005 -0400
@@ -2420,7 +2420,7 @@
    UCHAR       PrimaryRsnie;           
    BOOLEAN     bMixCipher = FALSE; // indicate the pairwise and group cipher are different
    UCHAR       p_offset;       
-   WPA_MIX_PAIR_CIPHER     FlexibleCipher = MIX_CIPHER_NOTUSE; // it provide the more flexible cipher combination in WPA-WPA2 and TKIPAES mode
+   WPA_MIX_PAIR_CIPHER     FlexibleCipher = WPA_TKIPAES_WPA2_TKIPAES;
        
    rsnielen_cur_p = NULL;
    rsnielen_ex_cur_p = NULL;
diff -urbB old/os/linux/config.mk new/os/linux/config.mk
--- old/os/linux/config.mk  2010-07-09 04:58:09.000000000 -0400
+++ new/os/linux/config.mk  2011-08-30 18:23:52.120572001 -0400
@@ -8,10 +8,10 @@
 HAS_XLINK=n
 
 # Support Wpa_Supplicant
-HAS_WPA_SUPPLICANT=n
+HAS_WPA_SUPPLICANT=y
 
 # Support Native WpaSupplicant for Network Maganger
-HAS_NATIVE_WPA_SUPPLICANT_SUPPORT=n
+HAS_NATIVE_WPA_SUPPLICANT_SUPPORT=y
 
 #Support Net interface block while Tx-Sw queue full
 HAS_BLOCK_NET_IF=n
</code></pre></noscript></div>


<h3>Step 4: Backup old driver</h3>

<figure class='code'><figcaption><span>backup.sh </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>vinod@ike~/test/driver/ <span class="nv">$ </span>sudo ifconfig wlan0 down
</span><span class='line'>vinod@ike~/test/driver/ <span class="nv">$ </span>sudo rmmod rt2860sta
</span><span class='line'>vinod@ike~/test/driver/ <span class="nv">$ </span>mkdir backup
</span><span class='line'>vinod@ike~/test/driver/ <span class="nv">$ </span>sudo mv /etc/Wireless/RT2860STA backup/
</span><span class='line'>vinod@ike~/test/driver/ <span class="nv">$ </span>sudo mv /lib/modules/2.6.35-30-generic/kernel/drivers/staging/rt2860/rt2860sta.ko backup/
</span></code></pre></td></tr></table></div></figure>


<h3>Step 5: Install and activate new driver</h3>

<figure class='code'><figcaption><span>build.sh </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>vinod@ike:~/test/driver <span class="nv">$ </span>sudo make install
</span><span class='line'>vinod@ike:~/test/driver <span class="nv">$ </span>sudo depmod -a
</span><span class='line'>vinod@ike:~/test/driver <span class="nv">$ </span>sudo modprobe rt2860sta
</span></code></pre></td></tr></table></div></figure>


<h3>Step 6: Fix problems with hibernation</h3>

<p>A separate problem is that wireless has been flaky when the computer
wakes from hibernation, but <a href="http://www.twentyways.com/2010/11/19/fixing-wireless-issues-with-asus-eeepc-1000he-running-ubuntu-10-10/">it&#8217;s also
fixable</a>.</p>

<p>Add the following lines to <code>/etc/modprobe.d/blacklist.conf</code>:</p>

<pre><code>blacklist rt2800pci
blacklist rt2800lib
blacklist rt2x00usb
blacklist rt2x00pci
blacklist rt2x00lib
</code></pre>

<p>Create a new file called <code>/etc/pm/config.d/unload_wireless</code> with the following line:</p>

<pre><code>SUSPEND_MODULES="rt2860sta"
</code></pre>

<p>Reboot and you should have WPA-compatible, hibernatable wireless.</p>

<h3>References:</h3>

<ol>
<li><a href="http://www.ctbarker.info/2010/05/ubuntu-1004-wireless-chipsets-and-wpa.html">rt2860sta driver installation</a></li>
<li><a href="http://www.twentyways.com/2010/11/19/fixing-wireless-issues-with-asus-eeepc-1000he-running-ubuntu-10-10/">Proper hibernation</a></li>
<li><a href="http://ubuntuforums.org/showthread.php?t=1476007">Ubuntu Forums thread</a></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/09/06/surprise-im-40">Surprise, I&#8217;m 40!</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-09-06T14:01:22-04:00" pubdate data-updated="true">Sep 6<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="/images/vinod40-1.jpg" title="Vinod is surprised" ></p>

<p>Have you ever been in one of those dreams where everything seems
normal and then a flying car (or something equally crazy) comes out of
nowhere? I&#8217;m used to having experiences like that when I&#8217;m dreaming,
but it was quite surreal to have it during waking hours.</p>

<p>Mala and Kavi had gone ahead (surreptiously to plan a surprise party
for someone else!). We were to meet at the ferris wheel at the Navy
Pier. I found her and she took my hand. She started leading me through
the crowds of tourists. I could sense excitement in her demeanor, but
didn&#8217;t think anything of it. She led me towards a group of people and
I caught a glimpse of someone who looked like my Dad. That&#8217;s
weird&#8230; why would he be here? It&#8217;s at that point that neurons started
to malfunction and I began to feel like I was in a dream. Then I saw
Mala&#8217;s mom and got even more confused. Slowly the group of strangers
came into focus and revealed themselves as my friends and family from
around the country. It was, without a doubt, the best birthday present
that I have ever received, or expect to receive. Thanks to Mala for
months of planning, and for wanting to make me feel special even
though I feel this way every day when I wake up next to her. Thanks to
all my friends and family who could make it and to the ones who
couldn&#8217;t. If this is the culmination of 40 years on this earth, I
can&#8217;t wait for the next 40!</p>

<p><img src="/images/vinod40-2.jpg" title="Vinod is 40" ></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/08/17/hospitalist-heaven">Hospitalist Heaven</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-08-17T21:41:09-04:00" pubdate data-updated="true">Aug 17<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Whenever things get too busy in the hospital, morale drops. I
<a href="/blog/2011/08/06/when-i-get-too-busy">complained about that</a> a little
while ago. Now I have a little good news to report. Administration has
been planning to add another line to the schedule because of the
increased volume. They asked a few of the hospitalists (I wasn&#8217;t
involved) to come together to figure out the best way to use that
additional line. Instead of just adding another rounder or another
admitter, we&#8217;re going to have a flex-admitter. Yeah, they just made
that word up. The flex-admitter will be scheduled to work from 7AM to
4PM doing just admissions and holding the painful 9050 pager. (That&#8217;s
the pager that gets all the calls from the ER, consults, and outside
hospitals). At 3PM, the flex-admitter hands over the 9050 pager to the
evening admitter, and ties up loose ends in order to be able to get
out by 4 (as long as it&#8217;s not too busy). They then come in the next
day and start their rounding shifts, which means that they get to keep
taking care of the patients they just admitted. Yay for continuity!</p>

<p>The flex part comes in when it gets busy. Right now, when it gets
busy, we don&#8217;t have a lot of options. We try to find people to come in
on their off-days, or find moonlighters, but that is difficult and
expensive. Now, if the census rises above a certain number
(tentatively 15 patients per doc), then the flex-admitter will
automatically switch from an admitter to a rounder. They&#8217;ll still come
in at 7AM, but will be assigned 10 patients and will be responsible
for the 9050 pager until noon. After that, they can focus on rounding
on their patients with a goal of getting out by 7PM. This is similar
to how our Day 1 currently functions, so it&#8217;s doable. They&#8217;ve also
recommended changes in the way the 9050 pager is handed off, so the
overnight person holds the 9050 pager for a shorter period of
time. It&#8217;s key to make our night shifts more palatable so we can hold
on to our valuable nocturnist and hopefully hire a few more.</p>

<p>We&#8217;ll have to see how this works in practice, but I see this change as
improving continuity, making night shifts better, making the first day
shift better, and making our responsiveness to high census better, all
of which should help overall morale. I love that the decision-making
power for these changes was given to hospitalists in the trenches,
rather than made from above by administration.</p>

<p>We&#8217;re hiring hospitalists, nocturnists and PA&#8217;s, so if you&#8217;re
interested in working with super-intelligent docs (and me), in a
<a href="http://www.durhamregional.org">great community hospital</a> where you
can actually make changes in the way healthcare is delivered, while
having the backing of an academic giant (Duke) in the background,
contact me and I&#8217;ll put you in touch with the people in charge.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/08/16/malas-bolognese">Mala&#8217;s Bolognese</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-08-16T20:51:09-04:00" pubdate data-updated="true">Aug 16<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="/images/pasta.jpg" title="Mala's Bolognese" ></p>

<p>I have just had the most amazing Italian meal that I&#8217;ve had outside of
Roberto&#8217;s in the Bronx. Mala made fresh homemade Pappardelle and a
Bolognese sauce that she just learned at
<a href="http://www.revolutionrestaurant.com">Revolution&#8217;s</a> cooking class. The
thing is, she made this yesterday, and I just tried it today as
leftovers and it was still amazing. This sure is going to make going
lo-carb impossible.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/08/15/kids-and-computers">Kids and Computers</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-08-15T21:26:31-04:00" pubdate data-updated="true">Aug 15<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&#8217;m sure it&#8217;s probably too early to worry about this, but I often
wonder about the best way to introduce Kavi and Anika to
computers. &#8216;Introduce&#8217; isn&#8217;t the right word because even Anika has
more experience with computers than I did at that age. So far, though,
computers are something that Daddy and Mommy use to do work, not
things that are for them. We&#8217;ll show them a Sesame Street video on
YouTube or family pictures on Facebook, but they don&#8217;t spend any
significant amount of time on it. They&#8217;re easily entertained without
computers. I know that will change as they get older, but for now at
least, they prefer their toys and their imagination to TV or
computers. Even at their young age, that is rare.</p>

<p>The dilemma is that I <strong>do</strong> want them to learn about technology and learn
how to use it in their lives without being controlled by it. I don&#8217;t
see anything wrong with exposing them to things like computers, iPads,
YouTube, etc., as long as it is monitored. I just want it to be a
healthy portion of their leisure time, not all of it. So many
children&#8217;s entertainment options are spoon-fed propaganda. They are
meant to be passively enjoyed, and the child just sits and absorbs
it. The source of the content is often questionable. Advertisers for
big corporations or government trying to get their message to kids
either overtly or subtly.</p>

<p>I like my childhood experience. My first major exposure to computers
was an Apple IIe. There was nothing organized about it. I spent a
large majority of my time playing games, but those were just the
gateway drugs to get me to realize that there was much more power in
those machines. The entire experience was about tinkering. Trying
to figure out how it worked, how to make it work for me, how I could
make it do things. The most exciting days in my childhood were the
days that the inCider magazine arrived with pages of DOS code listings
in the back. Retyping those code listings, making alterations, trying
to figure out how things worked&#8230; that is much more healthy than just
watching a video over and over again. I, of course, was much older
than Kavi is now, so I&#8217;m not too worried. I just don&#8217;t want them to
get addicted to a certain concept of what technology is for, before
they have the skills to really take advantage of it.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/08/14/switching-to-octopress">Switching to Octopress</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-08-14T13:06:04-04:00" pubdate data-updated="true">Aug 14<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>You may have noticed that I&#8217;ve rearranged the furniture a little. It&#8217;s
been almost 2 years since I last redesigned my blog, so I&#8217;m way
overdue for a pointless redesign. I&#8217;m now using
<a href="http://octopress.org">Octopress</a> which basically takes
<a href="https://github.com/mojombo/jekyll">Jekyll</a> and adds nice HTML5
templates, cross-browser stylesheets, jekyll plugins, and a few build
scripts to automate common tasks.</p>

<p>Enjoy my new site and let me know if you find any issues. The <a href="https://github.com/vkurup/kurup.org">source
code for my site</a>, as always, is
at github. Please let me know if you have questions about it. I&#8217;m also
taking bets on how long this design lasts.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/08/13/our-weight-loss-regimen">Our Weight Loss Regimen</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-08-13T14:02:58-04:00" pubdate data-updated="true">Aug 13<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>After writing <a href="/blog/2011/08/13/our-weight-loss-regimen">yesterday&#8217;s
post</a> about how Mala and I
have been losing so much weight over the past 8 months, I thought I
should post a small sampling of the food that Mala has made for us in
that time. Yes, I am a lucky, lucky man.</p>

<table>

<tr>
  <th>
    Red Wine Pot Roast
  </th>
  <th>
    Brisket Sandwich
  </th>
</tr>
<tr>
  <td>
    <a href="https://picasaweb.google.com/lh/photo/f0Tk5CTmfX9MZsns-gllsg?feat=embedwebsite"><img src="https://lh4.googleusercontent.com/-o_jZTZ_e9ds/TTCNbPYTayI/AAAAAAAAQkk/QVBhXyW7-1I/s400/IMG_2988.JPG"
    height="300" width="400" /></a>
  </td>
  <td>
    <a
href="https://picasaweb.google.com/lh/photo/DOPhMehGwAjP7tZrmiYSWA?feat=embedwebsite"><img
src="https://lh6.googleusercontent.com/-fzWWQQqX_jo/TTCOOWw0NmI/AAAAAAAAQpI/QaCCvlFC_Go/s400/2011-01-11_17-11-18_138.jpg"
height="226" width="400" /></a>
  </td>
</tr>

<tr>
<th>
Salad
</th>
<th>
Steak
</th>
</tr>
<tr>
<td>
<a
href="https://picasaweb.google.com/lh/photo/ZOcO99mgL2jxTqByxUea4A?feat=embedwebsite"><img
src="https://lh5.googleusercontent.com/-e7R5JMOcESc/TXKSvzs_biI/AAAAAAAAQ5Q/Vvw022CAYOM/s400/IMG_3089.JPG"
height="300" width="400" /></a>
</td>

<td>
<a
href="https://picasaweb.google.com/lh/photo/Z4bn4cpziE0zLDLGPiHcnQ?feat=embedwebsite"><img
src="https://lh6.googleusercontent.com/-xT-55zS2PAk/TXKcvdGCelI/AAAAAAAAQ9Q/ph1gJXwtLzM/s400/2011-02-02-16-56-47-2011-02-02_16-56-46_827.jpg"
height="226" width="400" /></a>
</td>
</tr>

<tr>
<th>
Valentine&#8217;s Brownies
</th>
<th>
Beer Can Chicken
</th>
</tr>
<tr>
<td>
<a
href="https://picasaweb.google.com/lh/photo/P895F_R6vsp9kMbf6GCjuA?feat=embedwebsite"><img
src="https://lh3.googleusercontent.com/-FQJU8y-lylE/TXKdH1QJ72I/AAAAAAAAQ_s/iexIkHMm5pU/s400/IMG_3280.JPG"
height="300" width="400" /></a>
</td>

<td>
<a
href="https://picasaweb.google.com/lh/photo/ASBR8xRTKlkIa1i2vm8egg?feat=embedwebsite"><img
src="https://lh4.googleusercontent.com/-21xiWke_rsg/TXKdZoZbJgI/AAAAAAAARBM/o6rEi610Zvs/s400/2011-02-20-17-05-30-2011-02-20_17-05-29_959.jpg"
height="400" width="226" /></a>
</td>
</tr>

<tr>
<th>
Homemade Pizza
</th>
<th>
Homemade Pizza
</th>
</tr>
<tr>
<td>
<a
href="https://picasaweb.google.com/lh/photo/6MOtOzfdBZ5dMdT8LMTWUA?feat=embedwebsite"><img
src="https://lh5.googleusercontent.com/-1HhYLY-zMAE/TXKdpeAVHrI/AAAAAAAARCw/1JopU0jD2IQ/s400/image63-1.jpg"
height="300" width="400" /></a>
</td>

<td>
<a
href="https://picasaweb.google.com/lh/photo/EUmVY21fJYjCnwEFUffJzA?feat=embedwebsite"><img
src="https://lh5.googleusercontent.com/-Qu_bavtpL-4/TXKdq-bfviI/AAAAAAAARC4/GdlM_eVg1iI/s400/image64-1.jpg"
height="300" width="400" /></a>
</td>
</tr>

<tr>
<th>
Dulce de leche cupcakes
</th>
<th>
Flank Steak
</th>
</tr>
<tr>
<td>
<a
href="https://picasaweb.google.com/lh/photo/OftoMfK3l8DsH4TVsu08ow?feat=embedwebsite"><img
src="https://lh6.googleusercontent.com/-A8Kq2O_OhtU/TXy5GL41s6I/AAAAAAAARGg/K2sdgRHye2o/s400/IMG_3398.JPG"
height="300" width="400" /></a>
</td>

<td>
<a
href="https://picasaweb.google.com/lh/photo/0bopJrmj6Iwk4up4-4pNHQ?feat=embedwebsite"><img
src="https://lh6.googleusercontent.com/-xSKXAKGNUt4/Ta8WoVSVIqI/AAAAAAAAR2Q/W7ktHGMzQkU/s400/IMG_0613.JPG"
height="300" width="400" /></a>
</td>
</tr>

<tr>
<th>
Steak, aligot, broccoli and red wine
</th>
<th>
Homemade fried chicken
</th>
</tr>
<tr>
<td>
<a
href="https://picasaweb.google.com/lh/photo/NyWDCfbcXTPHVi0Jc1z9ww?feat=embedwebsite"><img
src="https://lh3.googleusercontent.com/-v3Eg7LbnTBc/Ta8Wp2BAo-I/AAAAAAAAR2Y/jJLBzVMgLoQ/s400/IMG_0621.JPG"
height="300" width="400" /></a>
</td>

<td>
<a
href="https://picasaweb.google.com/lh/photo/b8J9VEMBX25y30nY8lnRCw?feat=embedwebsite"><img
src="https://lh5.googleusercontent.com/-HoezOiFwd9E/Ta8ZQ7TyegI/AAAAAAAAR9Y/CpuGZgXZJSg/s400/IMG_0954.JPG"
height="300" width="400" /></a>
</td>
</tr>

<tr>
<th>
Beatty&#8217;s chocolate cake
</th>
<th>
Peanut butter pie
</th>
</tr>
<tr>
<td>
<a
href="https://picasaweb.google.com/lh/photo/qfscAROgVs3CL4tRvPbIQg?feat=embedwebsite"><img
src="https://lh4.googleusercontent.com/-L3AJMJ1A5Xg/TdGKB_5TgPI/AAAAAAAASJ0/H8bijfUf4E4/s400/IMG_0968.JPG"
height="300" width="400" /></a>
</td>

<td>
<a
href="https://picasaweb.google.com/lh/photo/fL47hH8qTb3icVus43V6Mg?feat=embedwebsite"><img
src="https://lh3.googleusercontent.com/-cW4sPLgNdQ4/TdGLBHUxGFI/AAAAAAAASNY/_IE3zjs4UOc/s400/2011-04-26_19-27-08_144.jpg"
height="400" width="226" /></a>
</td>
</tr>

<tr>
<th>
Aligot (mashed potatoes with cheese)
</th>
<th>
Fried chicken
</th>
</tr>
<tr>
<td>
<a
href="https://picasaweb.google.com/lh/photo/fzk6XKJAxRr489T7n6SPSg?feat=embedwebsite"><img
src="https://lh5.googleusercontent.com/-PoxXQxEJL2I/TdGLSyJ4mdI/AAAAAAAASO4/vP1v8W9PuNw/s400/IMG_1080.JPG"
height="300" width="400" /></a>
</td>

<td>
<a
href="https://picasaweb.google.com/lh/photo/Z-UXHAv4BuOrFkqKkrRMug?feat=embedwebsite"><img
src="https://lh3.googleusercontent.com/-VFzg97RB6Gs/TdGLVM_9HlI/AAAAAAAASPA/Y0_fZ4ECvfE/s400/IMG_1083.JPG"
height="300" width="400" /></a>
</td>
</tr>

<tr>
<th>
Triple Chocolate Mousse Cake
</th>
<th>
Triple Chocolate Mousse Cake
</th>
</tr>
<tr>
<td>
<a
href="https://picasaweb.google.com/lh/photo/Mx3hCLxt8ze29-o3jlWRHg?feat=embedwebsite"><img
src="https://lh5.googleusercontent.com/-VmnvcQT-hB8/TdGLYMHrrYI/AAAAAAAASPQ/-Tm_4pt-UN8/s400/IMG_1091.JPG"
height="300" width="400" /></a>
</td>

<td>
<a
href="https://picasaweb.google.com/lh/photo/VIrNReppurcArqjGqg2SXg?feat=embedwebsite"><img
src="https://lh6.googleusercontent.com/-NT4zQY4igM4/TdGLWjDyfCI/AAAAAAAASPI/ry-Z27S6uDY/s400/IMG_1090.JPG"
height="300" width="400" /></a>
</td>
</tr>

<tr>
<th>
Strawberry Shortcake
</th>
<th>
Curious George Cake
</th>
</tr>
<tr>
<td>
<a
href="https://picasaweb.google.com/lh/photo/YJvuLKSGyaUx9i_QpZEuUw?feat=embedwebsite"><img
src="https://lh4.googleusercontent.com/-CkNfrdcS5Eo/Tf-yUk_ueZI/AAAAAAAASjU/5ycEhied0NQ/s400/IMG_1368.JPG"
height="300" width="400" /></a>
</td>

<td>
<a
href="https://picasaweb.google.com/lh/photo/ue5D6Km4P7QbuzYCd3WuNQ?feat=embedwebsite"><img
src="https://lh4.googleusercontent.com/-UV5oorSbUZQ/Tf_C7xDJ4oI/AAAAAAAASv0/FCR2VRZDv3w/s400/IMG_1984.JPG"
height="300" width="400" /></a>
</td>
</tr>

<tr>
<th>
Elmo Cupcakes
</th>
<th>
French Silk Pie
</th>
</tr>
<tr>
<td>
<a
href="https://picasaweb.google.com/lh/photo/sYMeLtjxmEYSo6hZEp1jAg?feat=embedwebsite"><img
src="https://lh5.googleusercontent.com/-_S9WF6ZjMTU/Tf_C9JnpXdI/AAAAAAAASv8/UlECg0hmWkw/s400/IMG_1985.JPG"
height="301" width="400" /></a>
</td>

<td>
<a
href="https://picasaweb.google.com/lh/photo/kIQGHlCxnW8hiV__2b2wew?feat=embedwebsite"><img
src="https://lh6.googleusercontent.com/-Ih6FOChOQNo/TihfyMWVB8I/AAAAAAAAVG0/jQR36z6CjJo/s400/IMG_2133.JPG"
height="300" width="400" /></a>
</td>
</tr>

<tr>
<th>
French Silk Pie
</th>
<th>
Hot Dogs and Flank Steak (my only contribution to this page)
</th>
</tr>
<tr>
<td>
<a
href="https://picasaweb.google.com/lh/photo/M8bGPoXUhKGWsIo26uwObw?feat=embedwebsite"><img
src="https://lh6.googleusercontent.com/-xC9OhD2lng0/Tihf3ZuIxTI/AAAAAAAAVHY/5nD0dGxGAu0/s400/IMG_2154.JPG"
height="300" width="400" /></a>
</td>

<td>
<a
href="https://picasaweb.google.com/lh/photo/w_aacduQh05sStPFT8YcEg?feat=embedwebsite"><img
src="https://lh4.googleusercontent.com/-n2dy2ihhA7U/Tihf9KufFbI/AAAAAAAAVIE/UR7gLQNvA08/s400/IMG_2205.JPG"
height="300" width="400" /></a>
</td>
</tr>
</table>


<p>Hungry yet?</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/08/12/why-we-get-fat-review">Why We Get Fat Review</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-08-12T12:44:31-04:00" pubdate data-updated="true">Aug 12<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Dear patients,</p>

<p><img class="right" src="/images/whywegetfat.jpg" title="Why We Get Fat" >
I am sorry. I have been giving you bad dietary advice. In medical
school we learned that fat in your diet causes fat to accumulate in
your arteries, causing heart attacks and strokes, so I told you to eat
a low fat diet. Of course, looking back, we had no evidence to support
that conclusion, but it just seemed rather obvious. Obvious ideas are
often the most dangerous ideas of all. When you see a study that
<strong>might</strong> confirm your obvious idea, you give it extra weight. When
you see a study that <strong>might</strong> refute your obvious idea, you find
problems with the study. When the idea is less certain, then you tend
to give the empirical evidence more weight. This is what we&#8217;ve done
with the hypothesis that dietary fat causes heart disease.</p>

<p>I just finished Gary Taubes&#8217; &#8221;<a href="http://www.amazon.com/gp/product/0307272702/ref=as_li_ss_tl?ie=UTF8&amp;tag=vinodkurupshomep&amp;linkCode=as2&amp;camp=217145&amp;creative=399369&amp;creativeASIN=0307272702">Why We Get
Fat</a>. It&#8217;s
not a perfect book, but I do recommend it. He dispels myths about why
obesity occurs, explains what really causes it, and discusses why our
current medical and public health approaches to obesity are hurting
rather than helping. He starts out by dispelling the myth that obesity
is caused by an imbalance of &#8220;Calories In&#8221; versus &#8220;Calories Out&#8221;, and
more specifically, that obesity can be fixed by reversing that
imbalance. This is something I certainly believed. I&#8217;ve always told
patients to eat less and exercise more. <a href="/blog/2006/10/23/health-at-every-size/">It doesn&#8217;t
work.</a> Instead of calorie
imbalance causing obesity, he states that obesity (and growth in
general) <strong>causes</strong> a calorie imbalance. The increased amount of fat
cells require more energy for sustenance, and therefore our bodies
find a way to increase the amount of calories that we take in,
compared to what we expend. So, while it is true that taking in more
calories than you expend causes your weight to go up, it is not true
that you have much control over your calorie intake or
expenditure. That&#8217;s determined by hormones. This is the part that is
counter-intuitive. It would seem that I could control the amount of
calories that I eat or that I spend. You might have some control over
what foods you put in your mouth, buy you have no control over how the
calories are extracted or absorbed. You also have no control over the
lower level hormonal signals that make you hungry. Those signals have
evolved over millions of years to be very powerful because in
prehistoric periods, if they didn&#8217;t work, you died. It&#8217;s hard to
overcome that kind of evolutionary power with &#8220;willpower&#8221;. Even if you
are successful in decreasing the calories that you eat, your body will
naturally decrease the calories that you burn. The variables are
dependent on each other.</p>

<p><span class='pullquote-right' data-pullquote='The villain is carbs.'>
This leads to the next question: Why do we get obese? If it&#8217;s not a
simple matter of eating more calories than we expend, then why do we
get fat? The culprit is insulin. Insulin causes the cells of our body
to deposit fat. Insulin, in turn, is released whenever there is
glucose in our system, which is preferentially caused by carbohydrate
intake. The villain is carbs. Taubes goes into great detail about
the workings of the endocrine system, explaining why insulin is such a
powerful factor in causing fat deposition. It also explains the
phenomenon of why people who have plenty of fat still get so
ravenously hungry. Insulin prevents fat from being turned into energy
so muscle cells have to use carbohydrates, a much smaller pool of
energy. Once it runs out, intense hunger sets in and the eating cycle
starts again. Reading these chapters took me back to my med school
physiology courses. I learned all of this in med school, but we were
never taught to connect these well accepted facts with the things that
we were being taught in our dietary lectures.
</span></p>

<p>Eliminating carbs from our diet without restricting any other nutrient
will stop the fat deposition process, which in turn will decrease our
calorie requirements, which will cause us to lose weight. There is
quite a bit of genetic variation from person to person, so some
individuals will be able to tolerate more carbs than others, and not
everyone will be completely lean even without any carbs.</p>

<p>He spends a lot of time going over the history of dietary research
dating back centuries. The danger of carbs was well understood and
accepted in all scientific and nonscientific circles until the last 50
years or so, when there was a change that attributed obesity to
behavioral weakness. This was started by the acceptance of the calorie
imbalance hypothesis. Once people accepted the thinking that taking in
more calories than you expend causes obesity, it was a short step to
blaming obesity on the individual for not controlling their diet or
exercising more. The focus of scientific research was taken off of fat
deposition and on to behavioral changes.</p>

<p>I had been coming around to this conclusion slowly over the past few
years (and am embarrassed that it has taken me this long). I remember
reading about the Atkins Diet about 10 years ago and thinking how
reckless Dr. Atkins was being by suggesting something which was so
obviously wrong. My thinking started to change a few years back when I
saw Mala struggle to lose weight despite strictly following an 800
calorie diet. I didn&#8217;t think that kind of calorie restriction was
possible, but I watched with my own eyes as she did it and still
barely saw results. That opened my eyes, and over the past few years,
I&#8217;ve seen more and more results with low carb diets. Results which
include weight loss, better cholesterol profiles, and overall better
health. Interestingly, the diet recommendations that are provided in
the book are from <a href="http://www.dukehealth.org/physicians/eric_c_westman">Eric Westman,
MD</a>, a UW trained
physician who works just down the street from me.</p>

<p>Mala and I have been trying to get healthier over the past 8
months. My brother started a Biggest Loser competition amongst a bunch
of us, and Mala won the first season. We&#8217;ve been exercising with more
regularity and eating better. Together, we&#8217;ve lost over 80 lbs. To
complicate the points that I&#8217;ve been making in this post, we have
<strong>NOT</strong> been following a strict low carb diet, and we <strong>have</strong> been
counting calories. On the other hand, I&#8217;m certain we&#8217;re eating less
carbs than we did before. But Mala&#8217;s focus has been on making
delicious (gourmet!) fresh food using &#8220;real food&#8221; ingredients. She&#8217;s
tried to cut processed food completely out of our diet. I think that
makes a huge difference. We&#8217;re not meant to eat chemicals and we have
no idea what these chemicals are doing to us. Optimizing food for
specific criteria, whether that&#8217;s low-fat, low-carb, or whatever, is
bound to have unintended consequences. In that vein, I agree with
Michael Pollan&#8217;s recommendation to &#8220;Eat Real Food&#8221;.</p>

<p>At some point, I&#8217;d like to review all the science behind the
conclusions in Taubes&#8217; book, just so I can have a better understanding
for myself. I recommend that anyone treating patients (nurses,
doctors, nutritionists, trainers) or anyone trying to get healthier
read this book.</p>

<p>Some other much more entertaining and useful links:</p>

<ul>
<li><a href="http://www.latestinpaleo.com/">Latest in Paleo podcast</a></li>
<li><a href="http://www.westonaprice.org/">Weston A. Price Foundation</a></li>
<li><a href="http://hivelogic.com/articles/the-paleo-diet-a-link-primer/">Paleo Diet: Link Primer</a></li>
<li><a href="http://radio.theheart.org/bob-harrington-show/2010/12/10/31-atkins-diet-obesity-and-cardiovascular-disease-risk-with-dr-eric-westman">Great podcast episode by 2 Duke docs</a> - theheart.org</li>
</ul>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/4/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/2/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/07/28/cbv-dynamic">Using dynamic queries in a CBV</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/07/23/some-emacs-posts">Some Emacs Posts</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/07/22/pygments-py3">Pygments on Arch Linux</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/07/21/django-test-models">How to create test models in Django</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/21/peanut-allergy-a-personal-clinical-review">Peanut Allergy, a personal clinical review</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/17/priorities-and-gtd">Priorities and GTD</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/16/gtd-again">GTD again?</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/15/writing-paralysis">Writing paralysis</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/09/steal-my-web-app-idea">Steal My Web App Idea</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/12/30/how-to-change-the-rear-tire-on-a-12-inch-bicycle">How to change the rear tire on a 12 inch bicycle</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/11/05/nsbrief-gets-the-best-guests">NSBrief gets the best guests</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/10/24/emacs-for-python-programming">Emacs for Python Programming</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/10/15/emacs-autocomplete-stumbles-on-yasnippet">Emacs Autocomplete stumbles on yasnippet</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/10/14/ive-gone-to-the-dark-side">I&#8217;ve gone to the dark side</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/04/avik-arrives">Avik Arrives!</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/21/thoughts-on-free-will">Thoughts on Free Will</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/19/facebook-is-killing-blogging">Facebook is killing blogging</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/16/a-great-moment">A great moment</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/07/nasa-curiosity-lands">NASA Curiosity Lands</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/03/blogging-again">Blogging Again</a>
      </li>
    
  </ul>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("vkurup", 5, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/vkurup" class="twitter-follow-button" data-show-count="true">Follow @vkurup</a>
  
</section>


<section>
  <h1>My Pinboard</h1>
  <ul id="pinboard_linkroll">Fetching linkroll&#8230;</ul>
  <p><a href="http://pinboard.in/u:vkurup">My Pinboard Bookmarks &raquo;</a></p>
</section>
<script type="text/javascript">
  var linkroll = 'pinboard_linkroll'; //id target for pinboard list
  var pinboard_user = "vkurup"; //id target for pinboard list
  var pinboard_count = 10; //id target for pinboard list
  (function(){
    var pinboardInit = document.createElement('script');
    pinboardInit.type = 'text/javascript';
    pinboardInit.async = true;
    pinboardInit.src = '/javascripts/pinboard.js';
    document.getElementsByTagName('head')[0].appendChild(pinboardInit);
  })();
</script>




  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  <a rel="license"
  href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Some rights
  reserved</a> by <a rel="author" href="https://profiles.google.com/vvkurup/" title="View my Google Profile">Vinod Kurup</a> -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'vkurup';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
