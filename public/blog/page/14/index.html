
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Vinod Kurup</title>
  <meta name="author" content="Vinod Kurup">

  
  <meta name="description" content="And now I have a pretty tag cloud on the side of my blog (that I pretty much stole from del.icio.us)
">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="https://www.kurup.org/blog/page/14/">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/vkurup" rel="alternate" title="Vinod Kurup" type="application/atom+xml">
  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='//fonts.googleapis.com/css?family=Quattrocento' rel='stylesheet' type='text/css'>
<link href='//fonts.googleapis.com/css?family=Quattrocento+Sans' rel='stylesheet' type='text/css'>
<link href='//fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>

<meta name="verify-v1" content="7VLvj7jbZMA24/73SZ9uUEq3SeBuiX3+aSIBRtgH4jQ=" />
<link rel="openid.server" href="http://www.myopenid.com/server" />
<link rel="openid.delegate" href="http://vkurup.myopenid.com/" />
<link rel="openid2.local_id" href="http://vkurup.myopenid.com/" />
<link rel="openid2.provider" href="http://www.myopenid.com/server" />
<meta http-equiv="X-XRDS-Location" content="http://www.myopenid.com/xrds?username=vkurup.myopenid.com" />

<link href="/favicon.ico" rel="shortcut icon" />

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-79447-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Vinod Kurup</a></h1>
  
    <h2>Hospitalist/programmer in search of the meaning of life</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/vkurup" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.kurup.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul role=main-navigation>
  <li><a href="/">Blog</a></li>
  <li><a href="/about.html">About Me</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/blog/categories">Categories</a></li>
  <li><a href="/medicine">Medicine</a></li>
  <li><a href="/running">Running</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2006/03/01/tag-cloud">Tag Cloud</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-03-01T00:00:00-05:00" pubdate data-updated="true">Mar 1<span>st</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>And now I have a pretty tag cloud on the side of my blog (that I pretty much stole from <a href="http://del.icio.us">del.icio.us</a>)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2006/02/27/my-blog-is-tagged">My Blog Is Tagged</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-02-27T00:00:00-05:00" pubdate data-updated="true">Feb 27<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&#8217;m finally getting around to moving my blog into the Web 1.5 world. (2.0 minus javascript). I scrapped the categories system and created a super-simple tags package. So, now I can tag posts and <a href="http://technorati.com">technorati</a> can find them. OpenACS barely lights up on technorati. Compare <a href="http://technorati.com/tag/rails">RubyOnRails</a> (20 mentions per day) with <a href="http://technorati.com/tag/openacs">OpenACS</a> (1 mention in the past month!). I know Rails is popular, but is OpenACS completely dead? I don&#8217;t think so.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2006/02/25/gladwell-blogs">Gladwell Blogs</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-02-25T00:00:00-05:00" pubdate data-updated="true">Feb 25<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Sorry for two posts about Gladwell in one day, but I just found out that <a href="http://gladwell.typepad.com/">Gladwell has started a blog</a>. Looks like he started the day after his Columbia speech which is interesting because he put some blame on the internet for our society&#8217;s bias towards Picasso. Maybe he&#8217;s trying to test his theories :-)</p>

<p>Gladwell is one of most interesting writers I have read and is as adept a speaker as he is a writer. It&#8217;s funny though. If you were to grade his speaking based on some well accepted criteria, you&#8217;d say he was a poor speaker. He says &#8220;Ummm&#8221; and other interjections a lot. He goes off on tangents. There were times where he lost a word and he seemed stuck for a few seconds. He didn&#8217;t know the nitty gritty details of everything he talked about. At one point he was giving an example (during a tangent) and he couldn&#8217;t remember the name of the guy who Cheney shot, so he made up a name.</p>

<p>But he&#8217;s a great speaker because he tells stories very very well. He has a point that he wants passionately to get across. Finally, it&#8217;s obvious that he&#8217;s deeply thought about what he&#8217;s talking about. As a listener, you ignore the conventional shortcomings because you&#8217;re immersed in his story and you want to understand what he does. I thoroughly enjoyed his presentation and I&#8217;m subscribed to his blog.</p>

<div id="comment-box">
<h2>Comments from old site</h2>

<div class="one-comment">
<p><b>hi vinod</b></p>
<p>
I found your blog,
</p>
<p>
I have no idea how to navigate around but it is fun.  I will check
this guy out.  And I looked at a lot of your wedding pictures.  You
guys have a lot to choose from- a lot of good ones.
</p>
<p>
Go Eagles :)
</p>
<p>
-Nicole
</p>
<address class="signature">
<span class="author">Unregistered Visitor</span>
<span class="date">2006-03-31 15:51:44</span>
</address>
</div>

</div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2006/02/25/cobr-starts-paying-dividends">COBR Starts Paying Dividends</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-02-25T00:00:00-05:00" pubdate data-updated="true">Feb 25<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Cobra Electronics (<a href="http://finance.yahoo.com/q?s=COBR">COBR</a>) annouced quarterly results on Thursday. Revenue was up a little. Net income was up a lot, but mostly due to one time events. The market wasn&#8217;t impressed and the stock fell 8%. Day to day price changes don&#8217;t worry me, so that&#8217;s not what I&#8217;m writing about. <a href="http://kurup.org/blog/one-entry?entry_id=22593">I mentioned back in July that I was concerned about the cash hoard that Cobra was amassing</a>. Specifically I said:</p>

<blockquote><p>Cash is up. You&#8217;d think this would be a good thing, but whenever a company starts piling up cash, they start talking about &#8230; acquisitions. Management wants to take advantage of their current distribution channels with a new product. They don&#8217;t think there is much room for internal growth. Acquisitions are troublesome, because they&#8217;re difficult to do properly and because there&#8217;s so much management incentive to do them. In addition, it&#8217;s difficult for the outside investor to see how an acquisition is really doing. I&#8217;d rather see them doing a dividend or a buyback and focusing on internal growth.</p></blockquote>

<p>I&#8217;m happy to report that Cobra has not done any acquisitions and much to my surprise has actually instituted a dividend of 16 cents per share. Woo Hoo! Is someone on the Board reading my blog? This dividend will still leave them with a lot of cash, and they are still talking about searching for acquisitions, but the fact that they&#8217;ve sat on 6+ million in cash without doing anything yet tells me that they are being careful about finding the <strong>right</strong> acquisition.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2006/02/24/picasso-vs-cezanne">Picasso vs CÃ©zanne</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-02-24T00:00:00-05:00" pubdate data-updated="true">Feb 24<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>We saw <a href="http://www.cuarts.com/cu_arts_blog/2006/02/malcom_gladwell.html">Malcolm Gladwell talk at Columbia</a> on Tuesday. He&#8217;s the author of <a href="http://www.amazon.com/exec/obidos/ASIN/0316172324/vinodkurupshomep">Blink</a> and <a href="http://www.amazon.com/exec/obidos/ASIN/0316346624/vinodkurupshomep">The Tipping Point</a> and he&#8217;s a staff writer at the New Yorker. He spoke about different types of genius. I&#8217;ve tried to recreate his main points from memory, so I apologize in advance if I&#8217;ve remembered things incorrectly.</p>

<p>His talk was about the artists Picasso and CÃ©zanne. An economist named David Galenson did an analysis of the market value of paintings of these great artists and concluded that they represented two distinct types of genius. Picasso did his greatest work in his youth and then not much of worth after that, while CÃ©zanne did little or nothing in his youth and then produced amazing things in his fifties and sixties. He looked at other painters and they also seemed to fit into these two distinct groups - the young prodigy and old late-bloomer. Not only can they be differentiated by their ages, but also by their styles. The Picasso&#8217;s have a clear direct vision that they can explain to you before they start painting. They are conceptual. They know exactly what they want their art to convey and they can execute that vision. CÃ©zanne&#8217;s can&#8217;t tell you how they work or what they&#8217;re trying to convey. If you follow their work over time, you don&#8217;t see a clear thread, but rather a hodgepodge of experiments, one of which eventually works and propels them to fame. These quotes seem to delineate the difference.</p>

<blockquote><p>I seek in painting.
&#8211; <em>Paul CÃ©zanne</em></p>

<p>I don&#8217;t seek; I find.
&#8211; <em>Pablo Picasso</em></p></blockquote>

<p>Gladwell discussed Galenson&#8217;s research into this phenomenon and expands it into other creative areas, bringing out some other entertaining comparisons.</p>

<table> 
<tr><th>Picasso</th><th>CÃ©zanne</th></tr> 
<tr><td>The Eagles</td><td>Fleetwood Mac</td></tr> 
<tr><td>Apple</td><td>Dell</td></tr> 
<tr><td>GM/Ford</td><td>Toyota/Honda</td></tr> 
<tr><td>Orson Welles</td><td>Alfred Hitchcock</td></tr> 
<tr><td>(I can&#8217;t remember his example here)&nbsp;&nbsp;</td><td>Mark Twain</td></tr> 
</table>


<p></p>

<p>Some of the examples were a bit contrived and the idea that all genius fits into two categories is simplistic, but Gladwell went on to make some interesting observations. The CÃ©zanne examples blow away the myth that all genius happens in youth. That point alone satisfied me since it allows me to explain why I haven&#8217;t become famous yet. There is a separate type of creative process that seems to benefit from, or even require, long hard experimentation. Gladwell&#8217;s thesis is that our society is biased to favor the Picasso type genius and that the CÃ©zanne type will no longer be able to flourish. Both, he asserts, are valuable to society.</p>

<p>Take pharmaceutical development, he says. In the old days (or even in the present day), drug development was trial and error. You&#8217;d run a bunch of compounds against a disease and see what worked. Explaining why it worked is left as a postscript, sometimes never to be answered. He mentions that to this day we don&#8217;t truly understand why Tylenol works, yet it clearly has helped millions of people. In the future, and in some cases today, we&#8217;ll be able to identify specific genes which are responsible for a disease. Targeting those genes will treat the disease. If two entreprenuers ask you for money and one says he&#8217;s got a specific gene that he can target while the other says he&#8217;s got some smart scientists who are going to create a bunch of compounds and hope for the best, most people would be more willing to fund the first startup. But, if all of our society is aimed that way, then we&#8217;ll miss out on some important breakthroughs, that only a CÃ©zanne-type effort would find.</p>

<p>It&#8217;s a very interesting thesis, but I&#8217;d be concerned about solutions that purported to give support to pre-CÃ©zanne&#8217;s in the hope that a CÃ©zanne would develop. What if a major ingredient in the development of a CÃ©zanne is the struggle. The persistence despite failure. The ability to maintain passion over long periods of time. The ability to delay gratification, to be forced to experiment. What if we had made CÃ©zanne comfortably wealthy in his youth. Would he have continued on his path to greatness? Would his later work have been as remarkable?</p>

<p>Without question, there is a bias towards Picasso in our society. It&#8217;s basically a bias towards short term results. I&#8217;m just not sure its much different than it was historically, nor that providing support to find/grow CÃ©zanne&#8217;s would be beneficial. It might actually be harmful.</p>

<p>Here are some great links that I found along the way. Thanks to Gladwell for such a stimulating presentation (and to the Columbia Arts Initiative for presenting it free!)</p>

<ul>
<li><a href="http://www.eh.net/lists/archives/hes/may-2002/0044.php">A review of Galenson&#8217;s book</a>, <a href="http://www.amazon.com/exec/obidos/ASIN/0674006127/vinodkurupshomep">Painting Outside the Lines</a></li>
<li><a href="http://chronicle.uchicago.edu/020124/quantifyingart.shtml">A very concise description of Galenson&#8217;s finding</a></li>
<li><a href="http://www.pupress.princeton.edu/chapters/s8019.html">The first chapter of Galenson&#8217;s new book</a> <a href="http://www.amazon.com/exec/obidos/ASIN/0691121095/vinodkurupshomep">Old Masters and Young Geniuses</a></li>
<li><a href="http://www.nber.org/reporter/fall03/galenson.html">An original article by Galenson which summarizes his work</a>, with pretty graphs!</li>
</ul>


<div id="comment-box">
<h2>Comments from old site</h2>

<div class="one-comment">
<p><b>Me too</b></p>
<p>
Guess I am a Cezanne type too :) Thanks for the post, I think they are
both great artists.
</p>
<address class="signature">
<span class="author">Dave Bauer</span>
<span class="date">2006-02-25 11:31:13</span>
</address>
</div>

<div class="one-comment">
<p><b>time</b></p>
<p>
You&#8217;ll get there, buddy, in time.
</p>
<p>
Hey, I see you&#8217;re tagging.   Party on.
</p>
<address class="signature">
<span class="author">Dave T</span>
<span class="date">2006-03-12 23:03:18</span>
</address>
</div>

<div class="one-comment">
<p><b>Mark Twain&#8217;s Picasso</b></p>
<p>
I just heard Malcom give this same discussion to the Women President&#8217;s
Organization in Boston April 25, 2008.  The author he compared Mark
Twain to was Herman Melvil.
</p>
<p>
You did a good job of putting the main points of the talk together &#8211;
something I was looking for as I am now seeking to communicate the
message back to my company.
</p>
<p>
I find it reassuring that while the world focuses on the overnite
sensations, there is great value in those of us who bloom later.
</p>
<p>
Thanks for the links.
</p>
<address class="signature">
<span class="author">Unregistered Visitor</span>
<span class="date">2008-04-26 17:19:03</span>
</address>
</div>

</div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2006/02/17/pound-update-kills-my-website">Pound Update Kills My Website</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-02-17T00:00:00-05:00" pubdate data-updated="true">Feb 17<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>No one but me noticed, I&#8217;m sure, but my website was down for part of yesterday. Don&#8217;t worry, refunds to paying customers are on their way :-)</p>

<p>What happened? I was doing my regular debian <code>apt-get upgrade</code> and the reverse proxy that I use, <a href="http://www.apsis.ch/pound/">pound</a>, got updated. The upgrade was a pretty significant one. Pound 2.0 changed the way that it expects configuration files to be formatted. Unfortunately, the Debian update didn&#8217;t mention this, so the new version of pound tried to read my old config file, got confused and shut down. Without a reverse proxy, there&#8217;s no way to get to my site from the outside.</p>

<p>I thought it would be simple to rewrite the config file to match the new format, but it took longer than I expected. Most of the changes were easy. The new format requires string parameters to be enclosed in double-quotes. Some of the parameters which used to be global (like ExtendedHTTP and WebDAV) were renamed and moved into non-global sections. There were a few other minor changes which make the config file easier to understand.</p>

<p>Unfortunately, fixing all of that still didn&#8217;t get Pound working. There were still 2 problems. First was that the internal port number was being shown to the web browser. If you typed in &#8220;http://kurup.org&#8221;, the browser would show &#8220;http://kurup.org:8001/&#8221; in the Location bar. This only occured when the backend server returned 30x redirection status&#8217;s. Based on my config, Pound was supposed to be rewriting the Location header to avoid this problem. I found the solution to this one <a href="http://www.apsis.ch/pound/pound_list/archive/2006/2006-01/1136458627000#1136458627000">here</a>. Scroll down to Robert Segall&#8217;s (the author of Pound) second reply. He says:</p>

<blockquote><p>The conditions for changing the Location header are:
- Change30x is set (value 1) for the Service in question
- the response is one of 301, 302, 303 or 307
- a Host header was seen in the original request
- the Location header, after DNS resolution, points either to the same address as the one Pound is using to accept the request (aka the ListenHTTP/ListenHTTPS), or to the back-end that issued this response</p></blockquote>

<p>Everything was being fulfilled except the last one, specifically the &#8216;After DNS resolution&#8217; part. When I do a <code>nslookup kurup.org</code> on my server, it returns 66.98.222.124. The address I was using in the config file was 127.0.0.1 (localhost). Since these didn&#8217;t match, Pound was not rewriting the header. I changed my pound config to listen on 66.98.222.124 and that problem was fixed.</p>

<p>The final problem was that pound stopped redirecting requests to the other virtual servers on my machine. Whenever a request would come in, pound would crash with the following message in syslog:</p>

<pre><code>Feb 17 08:11:10 vkurup pound: MONITOR: worker exited on signal 11, restarting... 
</code></pre>

<p>The only difference between the config for kurup.org and the other virtual servers was that I had a SESSION parameter in kurup.org. I introduced a SESSION parameter into the other servers and <em>surprise</em>, they started working too. I finally found the reason <a href="http://www.apsis.ch/pound/pound_list/archive/2006/2006-02/1139101111000#1139101111000">here.</a> I assume that will be fixed in the next release.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2006/02/16/creating-a-blog-application-using-the-openacs-content-repository">Creating a Blog Application Using the OpenACS Content Repository</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-02-16T00:00:00-05:00" pubdate data-updated="true">Feb 16<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I created a very simple blog application using the OpenACS Content Repository (CR). When I say simple, I mean simple, probably to the point of being useless. I just wanted to try writing something as quickly as possible using the CR. Here&#8217;s a quick run-through of the code, in case it might help someone else understand how to use the CR. I&#8217;m not including much commentary; email me (or comment) if you&#8217;d like me to expound more.</p>

<h4>blog.info</h4>

<pre><code>&lt;?xml version="1.0"?&gt; 
&lt;!-- Generated by the OpenACS Package Manager --&gt;  
&lt;package key="blog" url="http://openacs.org/repository/apm/packages/blog" type="apm_application"&gt;   
  &lt;package-name&gt;Blog&lt;/package-name&gt;
  &lt;pretty-plural&gt;Blogs&lt;/pretty-plural&gt;
  &lt;initial-install-p&gt;f&lt;/initial-install-p&gt;
  &lt;singleton-p&gt;f&lt;/singleton-p&gt;
  &lt;version name="0.1d" url="http://openacs.org/repository/download/apm/blog-0.1d.apm"&gt;
    &lt;owner url="mailto:admin@localhost"&gt;Admin User&lt;/owner&gt;
    &lt;summary&gt;A blog application.&lt;/summary&gt;
    &lt;description format="text/html"&gt;A simple Blog application using the Content Repository.&lt;/description&gt;
    &lt;maturity&gt;0&lt;/maturity&gt;
    &lt;provides url="blog" version="0.1d"/&gt;
    &lt;requires url="acs-content-repository" version="5.2.2"/&gt;
    &lt;callbacks&gt;
      &lt;callback type="after-install"  proc="blog::apm::after_install"/&gt;
      &lt;callback type="after-instantiate"  proc="blog::apm::after_instantiate"/&gt;
      &lt;callback type="before-uninstantiate"  proc="blog::apm::before_uninstantiate"/&gt;
      &lt;callback type="before-uninstall"  proc="blog::apm::before_uninstall"/&gt;
    &lt;/callbacks&gt;
    &lt;parameters&gt;
      &lt;!-- No version parameters --&gt;
    &lt;/parameters&gt;
  &lt;/version&gt;
&lt;/package&gt;
</code></pre>

<h4>tcl/blog-apm-procs.tcl</h4>

<pre><code>namespace eval blog::apm {}

ad_proc -private blog::apm::after_install {} {
    Install the blog datamodel. 
} {     
    content::type::new -content_type blog_post \
        -pretty_name "Blog Post" \
        -pretty_plural "Blog Posts" \
        -table_name "cr_blog_posts" \
        -id_column "post_id" 
}  

ad_proc -private blog::apm::after_instantiate { -package_id } {
    Setup one instance of a blog. Creates a content folder and associate
    blog_posts with it. 
} {
    set folder_id [content::folder::new \
                       -name $package_id \
                       -label "Blog Folder $package_id" \
                       -package_id $package_id \
                       -context_id $package_id]

    content::folder::register_content_type \
        -folder_id $folder_id \
        -content_type "blog_post" \
        -include_subtypes "t" 
}  

ad_proc -private blog::apm::before_uninstantiate { -package_id } {
    Remove 1 instance of blog application. 
} {
    set folder_id [blog::folder_id $package_id]
    content::folder::delete -folder_id $folder_id -cascade_p t
    content::type::delete -content_type blog_post \
        -drop_children_p t \
        -drop_table_p t 
}  

ad_proc -private blog::apm::before_uninstall {} {
    Drop the application. 
} {
    content::type::delete -content_type blog_post \
        -drop_children_p t \
        -drop_table_p t 
} 
</code></pre>

<h4>tcl/blog-procs.tcl</h4>

<pre><code>namespace eval blog {}

ad_proc -public blog::folder_id {package_id} {
    Return the CR folder_id associated with this package_id
    @param package_id Current package_id 
} {
    return [db_string get_folder_id "select folder_id from cr_folders where package_id=:package_id"] 
}
</code></pre>

<h4>www/index.tcl</h4>

<pre><code>ad_page_contract {
    List posts
    @author Vinod Kurup [vinod@kurup.com]
    @creation-date Tue Feb 14 20:56:24 2006
    @cvs-id $Id:$ 
} { 
} {
    set package_id [ad_conn package_id]
    db_multirow posts posts "
    select i.item_id,
           r.title,
           r.content,
           to_char(o.creation_date,'YYYY-MM-DD HH24:MI:SS') as creation_date,
           o.creation_user
     from cr_blog_posts p, cr_items i, cr_revisions r, acs_objects o
    where i.item_id=o.object_id
      and p.post_id=r.revision_id
      and o.package_id=:package_id
       and i.live_revision=p.post_id
    order by creation_date desc"
} 
</code></pre>

<h4>www/index.adp</h4>

<pre><code>&lt;master&gt;
  &lt;p&gt;&lt;a href="post/ae"&gt;Add Post&lt;/a&gt;&lt;/p&gt;
  &lt;multiple name="posts"&gt;
    &lt;include src="../lib/one-post"
             item_id="@posts.item_id@"
             title="@posts.title@"
             content="@posts.content@"
             creation_user="@posts.creation_user@"
             creation_date="@posts.creation_date@"
             /&gt;
  &lt;/multiple&gt;
</code></pre>

<h4>www/post/ae.tcl</h4>

<pre><code>ad_page_contract {
      Add or edit a post
      @author Vinod Kurup [vinod@kurup.com]
      @creation-date Tue Feb 14 20:39:39 2006
      @cvs-id $Id:$ 
} {
    item_id:integer,optional 
} {
    set package_id [ad_conn package_id]
    set user_id [ad_conn user_id]
    set ip_addr [ad_conn peeraddr]
    permission::require_permission -object_id $package_id -privilege write
    set context [list "Add/Edit Post"]

    ad_form -name add_post -form {
        item_id:key(t_acs_object_id_seq)
        title:text(text)
        content:text(textarea) 
    } -select_query {
        select r.title, r.content
        from cr_items i, cr_revisions r
        where i.item_id=:item_id
        and i.live_revision=r.revision_id 
    } -edit_data {
        content::revision::new -item_id $item_id \
            -title $title \
            -content $content \
            -package_id $package_id \
            -is_live t

        ns_returnredirect .. 
    } -new_data {
        content::item::new -name "Post $item_id" \
            -item_id $item_id \
            -creation_user $user_id \
            -text $content \
            -package_id $package_id \
            -parent_id [blog::folder_id $package_id] \
            -creation_ip $ip_addr \
            -content_type "blog_post" \
            -title $title

        ns_returnredirect .. 
    }
</code></pre>

<h4>www/post/ae.adp</h4>

<pre><code>&lt;master&gt;
  &lt;property name="title"&gt;Add/Edit Post&lt;/property&gt;
  &lt;property name="context"&gt;@context;noquote@&lt;/property&gt;

  &lt;formtemplate id="add_post"&gt;&lt;/formtemplate&gt;
</code></pre>

<h4>www/post/del.tcl</h4>

<pre><code>ad_page_contract {
    Delete a post
    @author Vinod Kurup [vinod@kurup.com]
    @creation-date Tue Feb 14 22:49:11 2006
    @cvs-id $Id:$ 
} {
    item_id:integer 
} {
    permission::require_permission -object_id $item_id -privilege write
    content::item::delete -item_id $item_id
    ns_returnredirect .. 
}
</code></pre>

<h4>www/post/view.tcl</h4>

<pre><code>ad_page_contract {
    View one post
    @author Vinod Kurup [vinod@kurup.com]
    @creation-date Wed Feb 15 20:24:32 2006
    @cvs-id $Id:$ 
} {
    item_id:integer 
} {
    set package_id [ad_conn package_id] 
    set package_url [ad_conn package_url]
    db_0or1row post " select i.item_id,
        r.title,
        r.content,
        to_char(o.creation_date,'YYYY-MM-DD HH24:MI:SS') as creation_date,
        o.creation_user
   from cr_blog_posts p, cr_items i, cr_revisions r, acs_objects o
  where i.item_id=o.object_id
    and p.post_id=r.revision_id
    and o.package_id=:package_id
     and i.live_revision=p.post_id
    and i.item_id=:item_id"

    set context [list $title] 
</code></pre>

<h4>www/post/view.adp</h4>

<pre><code>&lt;master&gt;
  &lt;property name="context"&gt;@context;noquote@&lt;/property&gt;
  &lt;property name="title"&gt;@title@&lt;/property&gt;

  &lt;include src="../../lib/one-post"
           item_id="@item_id@"
           title="@title@"
           content="@content@"
           creation_user="@creation_user@"
           creation_date="@creation_date@"
           /&gt;
</code></pre>

<h4>lib/one-post.tcl</h4>

<pre><code>set package_url [ad_conn package_url]
set now [clock format [clock seconds] -format "%Y-%m-%d %H:%M:%S"]
set creation_date_pretty [util::age_pretty \
                              -timestamp_ansi $creation_date \
                              -sysdate_ansi $now]
set author [acs_community_member_link -user_id $creation_user]
set write_p [permission::permission_p -object_id $item_id -privilege write]
set perm_url [export_vars -base "${package_url}post/view" {item_id}]
</code></pre>

<h4>lib/one-post.adp</h4>

<pre><code>&lt;div class="post"&gt;
  &lt;h2&gt;&lt;a href="@perm_url@"&gt;@title@&lt;/a&gt;&lt;/h2&gt;
  &lt;p class="byline"&gt;
    Posted by @author;noquote@
    &lt;span class="date"&gt;@creation_date_pretty@&lt;/span&gt;
  &lt;/p&gt;
  &lt;div class="content"&gt;
    @content;noquote@
  &lt;/div&gt;
  &lt;p class="actions"&gt;
    &lt;if @write_p@&gt;
      &lt;a href="@package_url@post/ae?item_id=@item_id@"&gt;Edit&lt;/a&gt; |
      &lt;a href="@package_url@post/del?item_id=@item_id@"&gt;Delete&lt;/a&gt;
    &lt;/if&gt;
  &lt;/p&gt;
&lt;/div&gt;
</code></pre>

<h4>Notes</h4>

<p>You&#8217;ll notice that there are no SQL datamodel files. Since I&#8217;m using the CR, all of the datamodel is created by using the CR TCL API (specifically content::type::new). This package is subsite aware meaning you can install apps on multiple subsites and the data in each subsite will remain isolated from other subsites. It should uninstall itself cleanly since I&#8217;ve written callbacks for before-uninstantiate and before-uninstall.</p>

<p>Like I said, this is very simplistic. You can create, read, update and delete posts, but that&#8217;s about it. No commenting. No tags or categories. No RSS feeds. No search. But, since we&#8217;ve used the CR as our base, I think it would be very easy to extend the app to do all those things. I&#8217;m going to work on that, just for fun, of course. Thanks to <a href="http://www.thedesignexperience.org">Dave Bauer</a> for writing the TCL interface to the CR and for writing the wiki package which made me see the light about the benefits of using the CR.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2006/02/14/friendship">Friendship</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-02-14T00:00:00-05:00" pubdate data-updated="true">Feb 14<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Happy Valentine&#8217;s Day! Writing about love is a little risque for me, so here instead is a wonderful quote about friendship. I heard it on the <a href="http://uc.princeton.edu/main/">University Channel Podcast</a> where <a href="http://uc.princeton.edu/main/index.php?option=com_content&amp;amp;task=view&amp;amp;id=295&amp;amp;Itemid=8">Robert Seiple</a> mistakenly attributed it to George Eliot. It was <a href="http://www.geonius.com/eliot/quotes.html">actually written</a> by <a href="http://www.scholars.nus.edu.sg/victorian/authors/craik/craikov.html">Dinah Craik</a> in her novel <a href="http://www3.shropshire-cc.gov.uk/etexts/E000329.htm#X16">A life for a life</a> (1859).</p>

<pre>
Oh, the comfort --
The inexpressible comfort of feeling
safe with a person,
Having neither to weigh thoughts,
Nor measure words -- but pouring them
All right out -- just as they are --
Chaff and grain together --
Certain that a faithful hand will
Take and sift them --
Keep what is worth keeping --
and with the breath of kindness
Blow the rest away.
</pre>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2006/02/13/foreign-transaction-fees">Foreign Transaction Fees</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-02-13T00:00:00-05:00" pubdate data-updated="true">Feb 13<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Now that credit card companies are charging extra fees for foreign
transactions, you need to know where online companies are physically
located. For example, did you know that
<a href="http://abebooks.com">Abebooks</a>, an online aggregator of bookstores,
is based in Canada? We found out when we bought books from them and
found our credit card statement littered with foreign transaction
fees. The ironic thing is that the book actually shipped from the
U.S. (from Amazon.com, in fact). Of course, there&#8217;s not much Abebooks
can do about this, but you need to calculate the extra costs into the
transaction to see whether you&#8217;re still getting a good deal.</p>

<div id="comment-box">
<h2>Comments from old site</h2>

<div class="one-comment">
<p><b>Amazon.com charges credit cards directly</b></p>
<p>
Hi Vinod. I work in the online book industry. If you bought the book
from the Amazon.com website, they  charge credit cards directly,
rather than passing it along to Marketplace/zShops booksellers. The
charges couldn&#8217;t have been generated by Abebooks, because they never
got your credit card information.
</p>

<p>
Is it possible that (1) you bought the book directly from Abebooks,
rather than Amazon.com, (2) you bought the book from a non-US
Amazon.com site (e.g. Amazon.ca, Amazon.co.uk), or (3) that the
foreign transaction fees are for something altogether different?
</p>
<address class="signature">
<span class="author">Unregistered Visitor</span>
<span class="date">2006-02-14 16:52:21</span>
</address>
</div>

<div class="my-comment">
<p><b>Yes, I bought directly from Abebooks</b></p>
<p>
Sorry if I wasn&#8217;t clear about that. I didn&#8217;t buy from Amazon.com. As I
said in the post, I bought online on the Abebooks.com website. The
book just happened to come &#8220;packaged&#8221; in an Amazon cardboard box.
</p>
<address class="signature">
<span class="author">Vinod Kurup</span>
<span class="date">2006-02-14 17:18:24</span>
</address>
</div>

<div class="one-comment">
<p><b>Abe CC</b></p>
<p>
This will be more and more of an issue as Abebooks moves to process
the credit card transactions for all of their booksellers.
</p>
<p>
You can be an American buyer purchasing from an American seller and
still pay the 2-3% surcharge solely because ABE is in Canada.
</p>
<address class="signature">
<span class="author">Unregistered Visitor</span>
<span class="date">2006-02-17 22:56:00</span>
</address>
</div>

</div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2006/02/08/doing-nothing">Doing Nothing</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-02-08T00:00:00-05:00" pubdate data-updated="true">Feb 8<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>It&#8217;s time for my quarterly investment update. Every 3 months, I look at my portfolio and sell stocks that I don&#8217;t like and then buy ones that I do. This quarter, I&#8217;m doing <strong>nothing</strong>.</p>

<p>This is one of the hardest things for me to do. I like to trade. Sell a stock here, buy a new one here. It&#8217;s exciting. Especially when you sell a stock that&#8217;s been down for a while because then you no longer have to look at that red smirch on your portfolio every day. But while activity is a good thing in almost every other aspect of life, it can hurt you in investing. The undisputable fact is that the more you trade, the more you&#8217;ll lose on commissions and spreads. What&#8217;s more disputable, but true in my mind is that investing overactivity makes me do dumb things.</p>

<p>A couple of the stocks that I had sold over the past year have made strong runs since I sold them. AMN has gained 47% and DUCK has gained 20%. I probably shouldn&#8217;t have sold either of them, if I had followed my strict evaluation process. But I <strong>wanted</strong> to sell them. Each company had its problems, so I found good reasons to sell and justifed them to myself. The problem was that I didn&#8217;t follow the sell criteria that I had set up before I bought the stocks. I made up new ones just so I could sell the stock. If I had stuck with my initial criteria, I&#8217;d still be holding on to those two and enjoying my gains.</p>

<p>I guess my lesson is that you should decide under what conditions you would sell any stock <strong>before you buy it</strong>. Until those conditions appear, hold tight. This is especially true for small undervalued stocks because it can take a long time for the market to come around and properly value them. James Cloonan, over at <a href="http://aaii.com/">The American Association of Individual Investors</a> runs a <a href="http://aaii.com/aaiiportfolios/">Shadow Stock Portfolio</a> on which my portfolio is loosely based. He recommends giving small-cap value stocks at least 2 years to be recognized by the market.</p>

<p>Patience, young grasshopper!</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/15/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/13/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/07/28/cbv-dynamic">Using dynamic queries in a CBV</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/07/23/some-emacs-posts">Some Emacs Posts</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/07/22/pygments-py3">Pygments on Arch Linux</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/07/21/django-test-models">How to create test models in Django</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/21/peanut-allergy-a-personal-clinical-review">Peanut Allergy, a personal clinical review</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/17/priorities-and-gtd">Priorities and GTD</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/16/gtd-again">GTD again?</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/15/writing-paralysis">Writing paralysis</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/09/steal-my-web-app-idea">Steal My Web App Idea</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/12/30/how-to-change-the-rear-tire-on-a-12-inch-bicycle">How to change the rear tire on a 12 inch bicycle</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/11/05/nsbrief-gets-the-best-guests">NSBrief gets the best guests</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/10/24/emacs-for-python-programming">Emacs for Python Programming</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/10/15/emacs-autocomplete-stumbles-on-yasnippet">Emacs Autocomplete stumbles on yasnippet</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/10/14/ive-gone-to-the-dark-side">I&#8217;ve gone to the dark side</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/04/avik-arrives">Avik Arrives!</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/21/thoughts-on-free-will">Thoughts on Free Will</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/19/facebook-is-killing-blogging">Facebook is killing blogging</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/16/a-great-moment">A great moment</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/07/nasa-curiosity-lands">NASA Curiosity Lands</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/03/blogging-again">Blogging Again</a>
      </li>
    
  </ul>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("vkurup", 5, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/vkurup" class="twitter-follow-button" data-show-count="true">Follow @vkurup</a>
  
</section>


<section>
  <h1>My Pinboard</h1>
  <ul id="pinboard_linkroll">Fetching linkroll&#8230;</ul>
  <p><a href="http://pinboard.in/u:vkurup">My Pinboard Bookmarks &raquo;</a></p>
</section>
<script type="text/javascript">
  var linkroll = 'pinboard_linkroll'; //id target for pinboard list
  var pinboard_user = "vkurup"; //id target for pinboard list
  var pinboard_count = 10; //id target for pinboard list
  (function(){
    var pinboardInit = document.createElement('script');
    pinboardInit.type = 'text/javascript';
    pinboardInit.async = true;
    pinboardInit.src = '/javascripts/pinboard.js';
    document.getElementsByTagName('head')[0].appendChild(pinboardInit);
  })();
</script>




  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  <a rel="license"
  href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Some rights
  reserved</a> by <a rel="author" href="https://profiles.google.com/vvkurup/" title="View my Google Profile">Vinod Kurup</a> -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'vkurup';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'https://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
